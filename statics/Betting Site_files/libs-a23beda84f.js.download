if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");!function(t){"use strict";var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||2<e[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(),function(o){"use strict";o.fn.emulateTransitionEnd=function(t){var e=!1,i=this;o(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||o(i).trigger(o.support.transition.end)},t),this},o(function(){o.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}(),o.support.transition&&(o.event.special.bsTransitionEnd={bindType:o.support.transition.end,delegateType:o.support.transition.end,handle:function(t){if(o(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(s){"use strict";var e='[data-dismiss="alert"]',a=function(t){s(t).on("click",e,this.close)};a.VERSION="3.3.6",a.TRANSITION_DURATION=150,a.prototype.close=function(t){var e=s(this),i=e.attr("data-target");i||(i=(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,""));var o=s(i);function n(){o.detach().trigger("closed.bs.alert").remove()}t&&t.preventDefault(),o.length||(o=e.closest(".alert")),o.trigger(t=s.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),s.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(a.TRANSITION_DURATION):n())};var t=s.fn.alert;s.fn.alert=function(i){return this.each(function(){var t=s(this),e=t.data("bs.alert");e||t.data("bs.alert",e=new a(this)),"string"==typeof i&&e[i].call(t)})},s.fn.alert.Constructor=a,s.fn.alert.noConflict=function(){return s.fn.alert=t,this},s(document).on("click.bs.alert.data-api",e,a.prototype.close)}(jQuery),function(s){"use strict";var n=function(t,e){this.$element=s(t),this.options=s.extend({},n.DEFAULTS,e),this.isLoading=!1};function i(o){return this.each(function(){var t=s(this),e=t.data("bs.button"),i="object"==typeof o&&o;e||t.data("bs.button",e=new n(this,i)),"toggle"==o?e.toggle():o&&e.setState(o)})}n.VERSION="3.3.6",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var e="disabled",i=this.$element,o=i.is("input")?"val":"html",n=i.data();t+="Text",null==n.resetText&&i.data("resetText",i[o]()),setTimeout(s.proxy(function(){i[o](null==n[t]?this.options[t]:n[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(e).attr(e,e)):this.isLoading&&(this.isLoading=!1,i.removeClass(e).removeAttr(e))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var t=s.fn.button;s.fn.button=i,s.fn.button.Constructor=n,s.fn.button.noConflict=function(){return s.fn.button=t,this},s(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var e=s(t.target);e.hasClass("btn")||(e=e.closest(".btn")),i.call(e,"toggle"),s(t.target).is('input[type="radio"]')||s(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){s(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(p){"use strict";var c=function(t,e){this.$element=p(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",p.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",p.proxy(this.pause,this)).on("mouseleave.bs.carousel",p.proxy(this.cycle,this))};function a(n){return this.each(function(){var t=p(this),e=t.data("bs.carousel"),i=p.extend({},c.DEFAULTS,t.data(),"object"==typeof n&&n),o="string"==typeof n?n:i.slide;e||t.data("bs.carousel",e=new c(this,i)),"number"==typeof n?e.to(n):o?e[o]():i.interval&&e.pause().cycle()})}c.VERSION="3.3.6",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},c.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(p.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},c.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var o=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(o)},c.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(i<t?"next":"prev",this.$items.eq(t))},c.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&p.support.transition&&(this.$element.trigger(p.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(t,e){var i=this.$element.find(".item.active"),o=e||this.getItemForDirection(t,i),n=this.interval,s="next"==t?"left":"right",a=this;if(o.hasClass("active"))return this.sliding=!1;var r=o[0],l=p.Event("slide.bs.carousel",{relatedTarget:r,direction:s});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,n&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=p(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var d=p.Event("slid.bs.carousel",{relatedTarget:r,direction:s});return p.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger(d)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),n&&this.cycle(),this}};var t=p.fn.carousel;p.fn.carousel=a,p.fn.carousel.Constructor=c,p.fn.carousel.noConflict=function(){return p.fn.carousel=t,this};var e=function(t){var e,i=p(this),o=p(i.attr("data-target")||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var n=p.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(n.interval=!1),a.call(o,n),s&&o.data("bs.carousel").to(s),t.preventDefault()}};p(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),p(window).on("load",function(){p('[data-ride="carousel"]').each(function(){var t=p(this);a.call(t,t.data())})})}(jQuery),function(a){"use strict";var r=function(t,e){this.$element=a(t),this.options=a.extend({},r.DEFAULTS,e),this.$trigger=a('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(t){var e,i=t.attr("data-target")||(e=t.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return a(i)}function l(o){return this.each(function(){var t=a(this),e=t.data("bs.collapse"),i=a.extend({},r.DEFAULTS,t.data(),"object"==typeof o&&o);!e&&i.toggle&&/show|hide/.test(o)&&(i.toggle=!1),e||t.data("bs.collapse",e=new r(this,i)),"string"==typeof o&&e[o]()})}r.VERSION="3.3.6",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(t=e.data("bs.collapse"))&&t.transitioning)){var i=a.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){e&&e.length&&(l.call(e,"hide"),t||e.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var n=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return n.call(this);var s=a.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",a.proxy(n,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[o](this.$element[0][s])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=a.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var e=this.dimension();this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!a.support.transition)return i.call(this);this.$element[e](0).one("bsTransitionEnd",a.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(t,e){var i=a(e);this.addAriaAndCollapsedClass(n(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var t=a.fn.collapse;a.fn.collapse=l,a.fn.collapse.Constructor=r,a.fn.collapse.noConflict=function(){return a.fn.collapse=t,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var e=a(this);e.attr("data-target")||t.preventDefault();var i=n(e),o=i.data("bs.collapse")?"toggle":e.data();l.call(i,o)})}(jQuery),function(a){"use strict";var r='[data-toggle="dropdown"]',o=function(t){a(t).on("click.bs.dropdown",this.toggle)};function l(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var i=e&&a(e);return i&&i.length?i:t.parent()}function s(o){o&&3===o.which||(a(".dropdown-backdrop").remove(),a(r).each(function(){var t=a(this),e=l(t),i={relatedTarget:this};e.hasClass("open")&&(o&&"click"==o.type&&/input|textarea/i.test(o.target.tagName)&&a.contains(e[0],o.target)||(e.trigger(o=a.Event("hide.bs.dropdown",i)),o.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",i)))))}))}o.VERSION="3.3.6",o.prototype.toggle=function(t){var e=a(this);if(!e.is(".disabled, :disabled")){var i=l(e),o=i.hasClass("open");if(s(),!o){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",s);var n={relatedTarget:this};if(i.trigger(t=a.Event("show.bs.dropdown",n)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(a.Event("shown.bs.dropdown",n))}return!1}},o.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=a(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var i=l(e),o=i.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&i.find(r).trigger("focus"),e.trigger("click");var n=i.find(".dropdown-menu li:not(.disabled):visible a");if(n.length){var s=n.index(t.target);38==t.which&&0<s&&s--,40==t.which&&s<n.length-1&&s++,~s||(s=0),n.eq(s).trigger("focus")}}}};var t=a.fn.dropdown;a.fn.dropdown=function(i){return this.each(function(){var t=a(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new o(this)),"string"==typeof i&&e[i].call(t)})},a.fn.dropdown.Constructor=o,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=t,this},a(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,o.prototype.toggle).on("keydown.bs.dropdown.data-api",r,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),function(s){"use strict";var a=function(t,e){this.options=e,this.$body=s(document.body),this.$element=s(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,s.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function r(o,n){return this.each(function(){var t=s(this),e=t.data("bs.modal"),i=s.extend({},a.DEFAULTS,t.data(),"object"==typeof o&&o);e||t.data("bs.modal",e=new a(this,i)),"string"==typeof o?e[o](n):i.show&&e.show(n)})}a.VERSION="3.3.6",a.TRANSITION_DURATION=300,a.BACKDROP_TRANSITION_DURATION=150,a.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},a.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},a.prototype.show=function(i){var o=this,t=s.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',s.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(t){s(t.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var t=s.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),t&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var e=s.Event("shown.bs.modal",{relatedTarget:i});t?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(a.TRANSITION_DURATION):o.$element.trigger("focus").trigger(e)}))},a.prototype.hide=function(t){t&&t.preventDefault(),t=s.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),s(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),s.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",s.proxy(this.hideModal,this)).emulateTransitionEnd(a.TRANSITION_DURATION):this.hideModal())},a.prototype.enforceFocus=function(){s(document).off("focusin.bs.modal").on("focusin.bs.modal",s.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},a.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",s.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},a.prototype.resize=function(){this.isShown?s(window).on("resize.bs.modal",s.proxy(this.handleUpdate,this)):s(window).off("resize.bs.modal")},a.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},a.prototype.backdrop=function(t){var e=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=s.support.transition&&i;if(this.$backdrop=s(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",s.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var n=function(){e.removeBackdrop(),t&&t()};s.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):n()}else t&&t()},a.prototype.handleUpdate=function(){this.adjustDialog()},a.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},a.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},a.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},a.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},a.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},a.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var t=s.fn.modal;s.fn.modal=r,s.fn.modal.Constructor=a,s.fn.modal.noConflict=function(){return s.fn.modal=t,this},s(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=s(this),i=e.attr("href"),o=s(e.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),n=o.data("bs.modal")?"toggle":s.extend({remote:!/#/.test(i)&&i},o.data(),e.data());e.is("a")&&t.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})}),r.call(o,n,this)})}(jQuery),function(g){"use strict";var m=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};m.VERSION="3.3.6",m.TRANSITION_DURATION=150,m.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},m.prototype.init=function(t,e,i){if(this.enabled=!0,this.type=t,this.$element=g(e),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&g(g.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),n=o.length;n--;){var s=o[n];if("click"==s)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",r="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},m.prototype.getDefaults=function(){return m.DEFAULTS},m.prototype.getOptions=function(t){return(t=g.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},m.prototype.getDelegateOptions=function(){var i={},o=this.getDefaults();return this._options&&g.each(this._options,function(t,e){o[t]!=e&&(i[t]=e)}),i},m.prototype.enter=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),t instanceof g.Event&&(e.inState["focusin"==t.type?"focus":"hover"]=!0),e.tip().hasClass("in")||"in"==e.hoverState)e.hoverState="in";else{if(clearTimeout(e.timeout),e.hoverState="in",!e.options.delay||!e.options.delay.show)return e.show();e.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)}},m.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},m.prototype.leave=function(t){var e=t instanceof this.constructor?t:g(t.currentTarget).data("bs."+this.type);if(e||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e)),t instanceof g.Event&&(e.inState["focusout"==t.type?"focus":"hover"]=!1),!e.isInStateTrue()){if(clearTimeout(e.timeout),e.hoverState="out",!e.options.delay||!e.options.delay.hide)return e.hide();e.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)}},m.prototype.show=function(){var t=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var e=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!e)return;var i=this,o=this.tip(),n=this.getUID(this.type);this.setContent(),o.attr("id",n),this.$element.attr("aria-describedby",n),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,r=a.test(s);r&&(s=s.replace(a,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),h=o[0].offsetWidth,d=o[0].offsetHeight;if(r){var p=s,c=this.getPosition(this.$viewport);s="bottom"==s&&l.bottom+d>c.bottom?"top":"top"==s&&l.top-d<c.top?"bottom":"right"==s&&l.right+h>c.width?"left":"left"==s&&l.left-h<c.left?"right":s,o.removeClass(p).addClass(s)}var f=this.getCalculatedOffset(s,l,h,d);this.applyPlacement(f,s);var u=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};g.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",u).emulateTransitionEnd(m.TRANSITION_DURATION):u()}},m.prototype.applyPlacement=function(t,e){var i=this.tip(),o=i[0].offsetWidth,n=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),t.top+=s,t.left+=a,g.offset.setOffset(i[0],g.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},t),0),i.addClass("in");var r=i[0].offsetWidth,l=i[0].offsetHeight;"top"==e&&l!=n&&(t.top=t.top+n-l);var h=this.getViewportAdjustedDelta(e,t,r,l);h.left?t.left+=h.left:t.top+=h.top;var d=/top|bottom/.test(e),p=d?2*h.left-o+r:2*h.top-n+l,c=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][c],d)},m.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},m.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},m.prototype.hide=function(t){var e=this,i=g(this.$tip),o=g.Event("hide.bs."+this.type);function n(){"in"!=e.hoverState&&i.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),t&&t()}if(this.$element.trigger(o),!o.isDefaultPrevented())return i.removeClass("in"),g.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",n).emulateTransitionEnd(m.TRANSITION_DURATION):n(),this.hoverState=null,this},m.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},m.prototype.hasContent=function(){return this.getTitle()},m.prototype.getPosition=function(t){var e=(t=t||this.$element)[0],i="BODY"==e.tagName,o=e.getBoundingClientRect();null==o.width&&(o=g.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var n=i?{top:0,left:0}:t.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},a=i?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},o,s,a,n)},m.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},m.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+o;r<a.top?n.top=a.top-r:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=e.left-s,d=e.left+s+i;h<a.left?n.left=a.left-h:d>a.right&&(n.left=a.left+a.width-d)}return n},m.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},m.prototype.getUID=function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},m.prototype.tip=function(){if(!this.$tip&&(this.$tip=g(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},m.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},m.prototype.enable=function(){this.enabled=!0},m.prototype.disable=function(){this.enabled=!1},m.prototype.toggleEnabled=function(){this.enabled=!this.enabled},m.prototype.toggle=function(t){var e=this;t&&((e=g(t.currentTarget).data("bs."+this.type))||(e=new this.constructor(t.currentTarget,this.getDelegateOptions()),g(t.currentTarget).data("bs."+this.type,e))),t?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},m.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var t=g.fn.tooltip;g.fn.tooltip=function(o){return this.each(function(){var t=g(this),e=t.data("bs.tooltip"),i="object"==typeof o&&o;!e&&/destroy|hide/.test(o)||(e||t.data("bs.tooltip",e=new m(this,i)),"string"==typeof o&&e[o]())})},g.fn.tooltip.Constructor=m,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=t,this}}(jQuery),function(n){"use strict";var s=function(t,e){this.init("popover",t,e)};if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");s.VERSION="3.3.6",s.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((s.prototype=n.extend({},n.fn.tooltip.Constructor.prototype)).constructor=s).prototype.getDefaults=function(){return s.DEFAULTS},s.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},s.prototype.hasContent=function(){return this.getTitle()||this.getContent()},s.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var t=n.fn.popover;n.fn.popover=function(o){return this.each(function(){var t=n(this),e=t.data("bs.popover"),i="object"==typeof o&&o;!e&&/destroy|hide/.test(o)||(e||t.data("bs.popover",e=new s(this,i)),"string"==typeof o&&e[o]())})},n.fn.popover.Constructor=s,n.fn.popover.noConflict=function(){return n.fn.popover=t,this}}(jQuery),function(s){"use strict";function n(t,e){this.$body=s(document.body),this.$scrollElement=s(t).is(document.body)?s(window):s(t),this.options=s.extend({},n.DEFAULTS,e),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s.proxy(this.process,this)),this.refresh(),this.process()}function e(o){return this.each(function(){var t=s(this),e=t.data("bs.scrollspy"),i="object"==typeof o&&o;e||t.data("bs.scrollspy",e=new n(this,i)),"string"==typeof o&&e[o]()})}n.VERSION="3.3.6",n.DEFAULTS={offset:10},n.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},n.prototype.refresh=function(){var t=this,o="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),s.isWindow(this.$scrollElement[0])||(o="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=s(this),e=t.data("target")||t.attr("href"),i=/^#./.test(e)&&s(e);return i&&i.length&&i.is(":visible")&&[[i[o]().top+n,e]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},n.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),n=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),o<=e)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<n[0])return this.activeTarget=null,this.clear();for(t=n.length;t--;)a!=s[t]&&e>=n[t]&&(void 0===n[t+1]||e<n[t+1])&&this.activate(s[t])},n.prototype.activate=function(t){this.activeTarget=t,this.clear();var e=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=s(e).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},n.prototype.clear=function(){s(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var t=s.fn.scrollspy;s.fn.scrollspy=e,s.fn.scrollspy.Constructor=n,s.fn.scrollspy.noConflict=function(){return s.fn.scrollspy=t,this},s(window).on("load.bs.scrollspy.data-api",function(){s('[data-spy="scroll"]').each(function(){var t=s(this);e.call(t,t.data())})})}(jQuery),function(r){"use strict";var a=function(t){this.element=r(t)};function e(i){return this.each(function(){var t=r(this),e=t.data("bs.tab");e||t.data("bs.tab",e=new a(this)),"string"==typeof i&&e[i]()})}a.VERSION="3.3.6",a.TRANSITION_DURATION=150,a.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=e.find(".active:last a"),n=r.Event("hide.bs.tab",{relatedTarget:t[0]}),s=r.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(n),t.trigger(s),!s.isDefaultPrevented()&&!n.isDefaultPrevented()){var a=r(i);this.activate(t.closest("li"),e),this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},a.prototype.activate=function(t,e,i){var o=e.find("> .active"),n=i&&r.support.transition&&(o.length&&o.hasClass("fade")||!!e.find("> .fade").length);function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),n?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}o.length&&n?o.one("bsTransitionEnd",s).emulateTransitionEnd(a.TRANSITION_DURATION):s(),o.removeClass("in")};var t=r.fn.tab;r.fn.tab=e,r.fn.tab.Constructor=a,r.fn.tab.noConflict=function(){return r.fn.tab=t,this};var i=function(t){t.preventDefault(),e.call(r(this),"show")};r(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(l){"use strict";var h=function(t,e){this.options=l.extend({},h.DEFAULTS,e),this.$target=l(this.options.target).on("scroll.bs.affix.data-api",l.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",l.proxy(this.checkPositionWithEventLoop,this)),this.$element=l(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function i(o){return this.each(function(){var t=l(this),e=t.data("bs.affix"),i="object"==typeof o&&o;e||t.data("bs.affix",e=new h(this,i)),"string"==typeof o&&e[o]()})}h.VERSION="3.3.6",h.RESET="affix affix-top affix-bottom",h.DEFAULTS={offset:0,target:window},h.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return n<i&&"top";if("bottom"==this.affixed)return null!=i?!(n+this.unpin<=s.top)&&"bottom":!(n+a<=t-o)&&"bottom";var r=null==this.affixed,l=r?n:s.top;return null!=i&&n<=i?"top":null!=o&&t-o<=l+(r?a:e)&&"bottom"},h.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(h.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},h.prototype.checkPositionWithEventLoop=function(){setTimeout(l.proxy(this.checkPosition,this),1)},h.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),e=this.options.offset,i=e.top,o=e.bottom,n=Math.max(l(document).height(),l(document.body).height());"object"!=typeof e&&(o=i=e),"function"==typeof i&&(i=e.top(this.$element)),"function"==typeof o&&(o=e.bottom(this.$element));var s=this.getState(n,t,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var a="affix"+(s?"-"+s:""),r=l.Event(a+".bs.affix");if(this.$element.trigger(r),r.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(h.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:n-t-o})}};var t=l.fn.affix;l.fn.affix=i,l.fn.affix.Constructor=h,l.fn.affix.noConflict=function(){return l.fn.affix=t,this},l(window).on("load",function(){l('[data-spy="affix"]').each(function(){var t=l(this),e=t.data();e.offset=e.offset||{},null!=e.offsetBottom&&(e.offset.bottom=e.offsetBottom),null!=e.offsetTop&&(e.offset.top=e.offsetTop),i.call(t,e)})})}(jQuery);
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,i;function c(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function u(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function l(e){return void 0===e}function h(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,s=[];for(n=0;n<e.length;++n)s.push(t(e[n],n));return s}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){for(var n in t)m(t,n)&&(e[n]=t[n]);return m(t,"toString")&&(e.toString=t.toString),m(t,"valueOf")&&(e.valueOf=t.valueOf),e}function y(e,t,n,s){return Tt(e,t,n,s,!0).utc()}function g(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function v(e){if(null==e._isValid){var t=g(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function p(e){var t=y(NaN);return null!=e?_(g(t),e):g(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1};var r=c.momentProperties=[];function w(e,t){var n,s,i;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=g(t)),l(t._locale)||(e._locale=t._locale),0<r.length)for(n=0;n<r.length;n++)l(i=t[s=r[n]])||(e[s]=i);return e}var t=!1;function M(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,c.updateOffset(this),t=!1)}function k(e){return e instanceof M||null!=e&&null!=e._isAMomentObject}function S(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function D(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=S(t)),n}function a(e,t,n){var s,i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0;for(s=0;s<i;s++)(n&&e[s]!==t[s]||!n&&D(e[s])!==D(t[s]))&&a++;return a+r}function Y(e){!1===c.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(i,r){var a=!0;return _(function(){if(null!=c.deprecationHandler&&c.deprecationHandler(null,i),a){for(var e,t=[],n=0;n<arguments.length;n++){if(e="","object"==typeof arguments[n]){for(var s in e+="\n["+n+"] ",arguments[0])e+=s+": "+arguments[0][s]+", ";e=e.slice(0,-2)}else e=arguments[n];t.push(e)}Y(i+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),a=!1}return r.apply(this,arguments)},r)}var s,O={};function T(e,t){null!=c.deprecationHandler&&c.deprecationHandler(e,t),O[e]||(Y(t),O[e]=!0)}function b(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function x(e,t){var n,s=_({},e);for(n in t)m(t,n)&&(u(e[n])&&u(t[n])?(s[n]={},_(s[n],e[n]),_(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)m(e,n)&&!m(t,n)&&u(e[n])&&(s[n]=_({},s[n]));return s}function P(e){null!=e&&this.set(e)}c.suppressDeprecationWarnings=!1,c.deprecationHandler=null,s=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)m(e,t)&&n.push(t);return n};var W={};function C(e,t){var n=e.toLowerCase();W[n]=W[n+"s"]=W[t]=e}function H(e){return"string"==typeof e?W[e]||W[e.toLowerCase()]:void 0}function R(e){var t,n,s={};for(n in e)m(e,n)&&(t=H(n))&&(s[t]=e[n]);return s}var U={};function F(e,t){U[e]=t}function L(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,G=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,V={},E={};function I(e,t,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),e&&(E[e]=i),t&&(E[t[0]]=function(){return L(i.apply(this,arguments),t[1],t[2])}),n&&(E[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function A(e,t){return e.isValid()?(t=j(t,e.localeData()),V[t]=V[t]||function(s){var e,i,t,r=s.match(N);for(e=0,i=r.length;e<i;e++)E[r[e]]?r[e]=E[r[e]]:r[e]=(t=r[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(e){var t,n="";for(t=0;t<i;t++)n+=b(r[t])?r[t].call(e,s):r[t];return n}}(t),V[t](e)):e.localeData().invalidDate()}function j(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(G.lastIndex=0;0<=n&&G.test(e);)e=e.replace(G,s),G.lastIndex=0,n-=1;return e}var Z=/\d/,z=/\d\d/,$=/\d{3}/,q=/\d{4}/,J=/[+-]?\d{6}/,B=/\d\d?/,Q=/\d\d\d\d?/,X=/\d\d\d\d\d\d?/,K=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,ne=/\d+/,se=/[+-]?\d+/,ie=/Z|[+-]\d\d:?\d\d/gi,re=/Z|[+-]\d\d(?::?\d\d)?/gi,ae=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,oe={};function ue(e,n,s){oe[e]=b(n)?n:function(e,t){return e&&s?s:n}}function le(e,t){return m(oe,e)?oe[e](t._strict,t._locale):new RegExp(he(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function he(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var de={};function ce(e,n){var t,s=n;for("string"==typeof e&&(e=[e]),h(n)&&(s=function(e,t){t[n]=D(e)}),t=0;t<e.length;t++)de[e[t]]=s}function fe(e,i){ce(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var me=0,_e=1,ye=2,ge=3,ve=4,pe=5,we=6,Me=7,ke=8;function Se(e){return De(e)?366:365}function De(e){return e%4==0&&e%100!=0||e%400==0}I("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),I(0,["YY",2],0,function(){return this.year()%100}),I(0,["YYYY",4],0,"year"),I(0,["YYYYY",5],0,"year"),I(0,["YYYYYY",6,!0],0,"year"),C("year","y"),F("year",1),ue("Y",se),ue("YY",B,z),ue("YYYY",ee,q),ue("YYYYY",te,J),ue("YYYYYY",te,J),ce(["YYYYY","YYYYYY"],me),ce("YYYY",function(e,t){t[me]=2===e.length?c.parseTwoDigitYear(e):D(e)}),ce("YY",function(e,t){t[me]=c.parseTwoDigitYear(e)}),ce("Y",function(e,t){t[me]=parseInt(e,10)}),c.parseTwoDigitYear=function(e){return D(e)+(68<D(e)?1900:2e3)};var Ye,Oe=Te("FullYear",!0);function Te(t,n){return function(e){return null!=e?(xe(this,t,e),c.updateOffset(this,n),this):be(this,t)}}function be(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function xe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&De(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Pe(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Pe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1===s?De(e)?29:28:31-s%7%2}Ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},I("M",["MM",2],"Mo",function(){return this.month()+1}),I("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),I("MMMM",0,0,function(e){return this.localeData().months(this,e)}),C("month","M"),F("month",8),ue("M",B),ue("MM",B,z),ue("MMM",function(e,t){return t.monthsShortRegex(e)}),ue("MMMM",function(e,t){return t.monthsRegex(e)}),ce(["M","MM"],function(e,t){t[_e]=D(e)-1}),ce(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[_e]=i:g(n).invalidMonth=e});var We=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ce="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var He="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Re(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=D(t);else if(!h(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Pe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ue(e){return null!=e?(Re(this,e),c.updateOffset(this,!0),this):be(this,"Month")}var Fe=ae;var Le=ae;function Ne(){function e(e,t){return t.length-e.length}var t,n,s=[],i=[],r=[];for(t=0;t<12;t++)n=y([2e3,t]),s.push(this.monthsShort(n,"")),i.push(this.months(n,"")),r.push(this.months(n,"")),r.push(this.monthsShort(n,""));for(s.sort(e),i.sort(e),r.sort(e),t=0;t<12;t++)s[t]=he(s[t]),i[t]=he(i[t]);for(t=0;t<24;t++)r[t]=he(r[t]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ge(e){var t;if(e<100&&0<=e){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function Ve(e,t,n){var s=7+t-n;return-((7+Ge(e,0,s).getUTCDay()-t)%7)+s-1}function Ee(e,t,n,s,i){var r,a,o=1+7*(t-1)+(7+n-s)%7+Ve(e,s,i);return a=o<=0?Se(r=e-1)+o:o>Se(e)?(r=e+1,o-Se(e)):(r=e,o),{year:r,dayOfYear:a}}function Ie(e,t,n){var s,i,r=Ve(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=a+Ae(i=e.year()-1,t,n):a>Ae(e.year(),t,n)?(s=a-Ae(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function Ae(e,t,n){var s=Ve(e,t,n),i=Ve(e+1,t,n);return(Se(e)-s+i)/7}I("w",["ww",2],"wo","week"),I("W",["WW",2],"Wo","isoWeek"),C("week","w"),C("isoWeek","W"),F("week",5),F("isoWeek",5),ue("w",B),ue("ww",B,z),ue("W",B),ue("WW",B,z),fe(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=D(e)});function je(e,t){return e.slice(t,7).concat(e.slice(0,t))}I("d",0,"do","day"),I("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),I("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),I("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),I("e",0,0,"weekday"),I("E",0,0,"isoWeekday"),C("day","d"),C("weekday","e"),C("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),ue("d",B),ue("e",B),ue("E",B),ue("dd",function(e,t){return t.weekdaysMinRegex(e)}),ue("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ue("dddd",function(e,t){return t.weekdaysRegex(e)}),fe(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e}),fe(["d","e","E"],function(e,t,n,s){t[s]=D(e)});var Ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var $e="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var qe=ae;var Je=ae;var Be=ae;function Qe(){function e(e,t){return t.length-e.length}var t,n,s,i,r,a=[],o=[],u=[],l=[];for(t=0;t<7;t++)n=y([2e3,1]).day(t),s=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),r=this.weekdays(n,""),a.push(s),o.push(i),u.push(r),l.push(s),l.push(i),l.push(r);for(a.sort(e),o.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)o[t]=he(o[t]),u[t]=he(u[t]),l[t]=he(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Xe(){return this.hours()%12||12}function Ke(e,t){I(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function et(e,t){return t._meridiemParse}I("H",["HH",2],0,"hour"),I("h",["hh",2],0,Xe),I("k",["kk",2],0,function(){return this.hours()||24}),I("hmm",0,0,function(){return""+Xe.apply(this)+L(this.minutes(),2)}),I("hmmss",0,0,function(){return""+Xe.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)}),I("Hmm",0,0,function(){return""+this.hours()+L(this.minutes(),2)}),I("Hmmss",0,0,function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)}),Ke("a",!0),Ke("A",!1),C("hour","h"),F("hour",13),ue("a",et),ue("A",et),ue("H",B),ue("h",B),ue("k",B),ue("HH",B,z),ue("hh",B,z),ue("kk",B,z),ue("hmm",Q),ue("hmmss",X),ue("Hmm",Q),ue("Hmmss",X),ce(["H","HH"],ge),ce(["k","kk"],function(e,t,n){var s=D(e);t[ge]=24===s?0:s}),ce(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ce(["h","hh"],function(e,t,n){t[ge]=D(e),g(n).bigHour=!0}),ce("hmm",function(e,t,n){var s=e.length-2;t[ge]=D(e.substr(0,s)),t[ve]=D(e.substr(s)),g(n).bigHour=!0}),ce("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[ge]=D(e.substr(0,s)),t[ve]=D(e.substr(s,2)),t[pe]=D(e.substr(i)),g(n).bigHour=!0}),ce("Hmm",function(e,t,n){var s=e.length-2;t[ge]=D(e.substr(0,s)),t[ve]=D(e.substr(s))}),ce("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[ge]=D(e.substr(0,s)),t[ve]=D(e.substr(s,2)),t[pe]=D(e.substr(i))});var tt,nt=Te("Hours",!0),st={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ce,monthsShort:He,week:{dow:0,doy:6},weekdays:Ze,weekdaysMin:$e,weekdaysShort:ze,meridiemParse:/[ap]\.?m?\.?/i},it={},rt={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function ot(e){var t=null;if(!it[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=tt._abbr,require("./locale/"+e),ut(t)}catch(e){}return it[e]}function ut(e,t){var n;return e&&((n=l(t)?ht(e):lt(e,t))?tt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),tt._abbr}function lt(e,t){if(null===t)return delete it[e],null;var n,s=st;if(t.abbr=e,null!=it[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=it[e]._config;else if(null!=t.parentLocale)if(null!=it[t.parentLocale])s=it[t.parentLocale]._config;else{if(null==(n=ot(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;s=n._config}return it[e]=new P(x(s,t)),rt[e]&&rt[e].forEach(function(e){lt(e.name,e.config)}),ut(e),it[e]}function ht(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return tt;if(!o(e)){if(t=ot(e))return t;e=[e]}return function(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=at(e[r]).split("-")).length,n=(n=at(e[r+1]))?n.split("-"):null;0<t;){if(s=ot(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&a(i,n,!0)>=t-1)break;t--}r++}return tt}(e)}function dt(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[_e]<0||11<n[_e]?_e:n[ye]<1||n[ye]>Pe(n[me],n[_e])?ye:n[ge]<0||24<n[ge]||24===n[ge]&&(0!==n[ve]||0!==n[pe]||0!==n[we])?ge:n[ve]<0||59<n[ve]?ve:n[pe]<0||59<n[pe]?pe:n[we]<0||999<n[we]?we:-1,g(e)._overflowDayOfYear&&(t<me||ye<t)&&(t=ye),g(e)._overflowWeeks&&-1===t&&(t=Me),g(e)._overflowWeekday&&-1===t&&(t=ke),g(e).overflow=t),e}function ct(e,t,n){return null!=e?e:null!=t?t:n}function ft(e){var t,n,s,i,r,a=[];if(!e._d){var o,u;for(o=e,u=new Date(c.now()),s=o._useUTC?[u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()]:[u.getFullYear(),u.getMonth(),u.getDate()],e._w&&null==e._a[ye]&&null==e._a[_e]&&function(e){var t,n,s,i,r,a,o,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)r=1,a=4,n=ct(t.GG,e._a[me],Ie(bt(),1,4).year),s=ct(t.W,1),((i=ct(t.E,1))<1||7<i)&&(u=!0);else{r=e._locale._week.dow,a=e._locale._week.doy;var l=Ie(bt(),r,a);n=ct(t.gg,e._a[me],l.year),s=ct(t.w,l.week),null!=t.d?((i=t.d)<0||6<i)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(u=!0)):i=r}s<1||s>Ae(n,r,a)?g(e)._overflowWeeks=!0:null!=u?g(e)._overflowWeekday=!0:(o=Ee(n,s,i,r,a),e._a[me]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=ct(e._a[me],s[me]),(e._dayOfYear>Se(r)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=Ge(r,0,e._dayOfYear),e._a[_e]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=s[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ge]&&0===e._a[ve]&&0===e._a[pe]&&0===e._a[we]&&(e._nextDay=!0,e._a[ge]=0),e._d=(e._useUTC?Ge:function(e,t,n,s,i,r,a){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ge]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}var mt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=/Z|[+-]\d\d(?::?\d\d)?/,gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],vt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],pt=/^\/?Date\((\-?\d+)/i;function wt(e){var t,n,s,i,r,a,o=e._i,u=mt.exec(o)||_t.exec(o);if(u){for(g(e).iso=!0,t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[1])){i=gt[t][0],s=!1!==gt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=vt.length;t<n;t++)if(vt[t][1].exec(u[3])){r=(u[2]||" ")+vt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!yt.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),Yt(e)}else e._isValid=!1}var Mt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function kt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(e),He.indexOf(t),parseInt(n,10),parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}var St={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Dt(e){var t,n,s,i=Mt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(i){var r=kt(i[4],i[3],i[2],i[5],i[6],i[7]);if(t=i[1],n=r,s=e,t&&ze.indexOf(t)!==new Date(n[0],n[1],n[2]).getDay()&&(g(s).weekdayMismatch=!0,!(s._isValid=!1)))return;e._a=r,e._tzm=function(e,t,n){if(e)return St[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return(s-i)/100*60+i}(i[8],i[9],i[10]),e._d=Ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function Yt(e){if(e._f!==c.ISO_8601)if(e._f!==c.RFC_2822){e._a=[],g(e).empty=!0;var t,n,s,i,r,a,o,u,l=""+e._i,h=l.length,d=0;for(s=j(e._f,e._locale).match(N)||[],t=0;t<s.length;t++)i=s[t],(n=(l.match(le(i,e))||[])[0])&&(0<(r=l.substr(0,l.indexOf(n))).length&&g(e).unusedInput.push(r),l=l.slice(l.indexOf(n)+n.length),d+=n.length),E[i]?(n?g(e).empty=!1:g(e).unusedTokens.push(i),a=i,u=e,null!=(o=n)&&m(de,a)&&de[a](o,u._a,u,a)):e._strict&&!n&&g(e).unusedTokens.push(i);g(e).charsLeftOver=h-d,0<l.length&&g(e).unusedInput.push(l),e._a[ge]<=12&&!0===g(e).bigHour&&0<e._a[ge]&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[ge]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0)),t)}(e._locale,e._a[ge],e._meridiem),ft(e),dt(e)}else Dt(e);else wt(e)}function Ot(e){var t,n,s,i,r=e._i,a=e._f;return e._locale=e._locale||ht(e._l),null===r||void 0===a&&""===r?p({nullInput:!0}):("string"==typeof r&&(e._i=r=e._locale.preparse(r)),k(r)?new M(dt(r)):(d(r)?e._d=r:o(a)?function(e){var t,n,s,i,r;if(0===e._f.length)return g(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)r=0,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Yt(t),v(t)&&(r+=g(t).charsLeftOver,r+=10*g(t).unusedTokens.length,g(t).score=r,(null==s||r<s)&&(s=r,n=t));_(e,n||t)}(e):a?Yt(e):l(n=(t=e)._i)?t._d=new Date(c.now()):d(n)?t._d=new Date(n.valueOf()):"string"==typeof n?(s=t,null===(i=pt.exec(s._i))?(wt(s),!1===s._isValid&&(delete s._isValid,Dt(s),!1===s._isValid&&(delete s._isValid,c.createFromInputFallback(s)))):s._d=new Date(+i[1])):o(n)?(t._a=f(n.slice(0),function(e){return parseInt(e,10)}),ft(t)):u(n)?function(e){if(!e._d){var t=R(e._i);e._a=f([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ft(e)}}(t):h(n)?t._d=new Date(n):c.createFromInputFallback(t),v(e)||(e._d=null),e))}function Tt(e,t,n,s,i){var r,a={};return!0!==n&&!1!==n||(s=n,n=void 0),(u(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=s,(r=new M(dt(Ot(a))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function bt(e,t,n,s){return Tt(e,t,n,s,!1)}c.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),c.ISO_8601=function(){},c.RFC_2822=function(){};var xt=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:p()}),Pt=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=bt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:p()});function Wt(e,t){var n,s;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return bt();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Ct=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ht(e){var t=R(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,h=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Ye.call(Ct,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,s=0;s<Ct.length;++s)if(e[Ct[s]]){if(n)return!1;parseFloat(e[Ct[s]])!==D(e[Ct[s]])&&(n=!0)}return!0}(t),this._milliseconds=+h+1e3*l+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=ht(),this._bubble()}function Rt(e){return e instanceof Ht}function Ut(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){I(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+L(~~(e/60),2)+n+L(~~e%60,2)})}Ft("Z",":"),Ft("ZZ",""),ue("Z",re),ue("ZZ",re),ce(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Nt(re,e)});var Lt=/([\+\-]|\d\d)/gi;function Nt(e,t){var n=(t||"").match(e);if(null===n)return null;var s=((n[n.length-1]||[])+"").match(Lt)||["-",0,0],i=60*s[1]+D(s[2]);return 0===i?0:"+"===s[0]?i:-i}function Gt(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(k(e)||d(e)?e.valueOf():bt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),c.updateOffset(n,!1),n):bt(e).local()}function Vt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Et(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}c.updateOffset=function(){};var It=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,At=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function jt(e,t){var n,s,i,r=e,a=null;return Rt(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:h(e)?(r={},t?r[t]=e:r.milliseconds=e):(a=It.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:D(a[ye])*n,h:D(a[ge])*n,m:D(a[ve])*n,s:D(a[pe])*n,ms:D(Ut(1e3*a[we]))*n}):(a=At.exec(e))?(n="-"===a[1]?-1:1,r={y:Zt(a[2],n),M:Zt(a[3],n),w:Zt(a[4],n),d:Zt(a[5],n),h:Zt(a[6],n),m:Zt(a[7],n),s:Zt(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Gt(t,e),e.isBefore(t)?n=zt(e,t):((n=zt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(bt(r.from),bt(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new Ht(r),Rt(e)&&m(e,"_locale")&&(s._locale=e._locale),s}function Zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function zt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function $t(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(T(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),qt(this,jt(e="string"==typeof e?+e:e,t),s),this}}function qt(e,t,n,s){var i=t._milliseconds,r=Ut(t._days),a=Ut(t._months);e.isValid()&&(s=null==s||s,a&&Re(e,be(e,"Month")+a*n),r&&xe(e,"Date",be(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+i*n),s&&c.updateOffset(e,r||a))}jt.fn=Ht.prototype,jt.invalid=function(){return jt(NaN)};var Jt=$t(1,"add"),Bt=$t(-1,"subtract");function Qt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months");return-(n+(t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(n+1,"months")-s)))||0}function Xt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ht(e))&&(this._locale=t),this)}c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Kt=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function en(){return this._locale}var tn=126227808e5;function nn(e,t){return(e%t+t)%t}function sn(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-tn:new Date(e,t,n).valueOf()}function rn(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-tn:Date.UTC(e,t,n)}function an(e,t){I(0,[e,e.length],0,t)}function on(e,t,n,s,i){var r;return null==e?Ie(this,s,i).year:((r=Ae(e,s,i))<t&&(t=r),function(e,t,n,s,i){var r=Ee(e,t,n,s,i),a=Ge(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}I(0,["gg",2],0,function(){return this.weekYear()%100}),I(0,["GG",2],0,function(){return this.isoWeekYear()%100}),an("gggg","weekYear"),an("ggggg","weekYear"),an("GGGG","isoWeekYear"),an("GGGGG","isoWeekYear"),C("weekYear","gg"),C("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),ue("G",se),ue("g",se),ue("GG",B,z),ue("gg",B,z),ue("GGGG",ee,q),ue("gggg",ee,q),ue("GGGGG",te,J),ue("ggggg",te,J),fe(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=D(e)}),fe(["gg","GG"],function(e,t,n,s){t[s]=c.parseTwoDigitYear(e)}),I("Q",0,"Qo","quarter"),C("quarter","Q"),F("quarter",7),ue("Q",Z),ce("Q",function(e,t){t[_e]=3*(D(e)-1)}),I("D",["DD",2],"Do","date"),C("date","D"),F("date",9),ue("D",B),ue("DD",B,z),ue("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ce(["D","DD"],ye),ce("Do",function(e,t){t[ye]=D(e.match(B)[0])});var un=Te("Date",!0);I("DDD",["DDDD",3],"DDDo","dayOfYear"),C("dayOfYear","DDD"),F("dayOfYear",4),ue("DDD",K),ue("DDDD",$),ce(["DDD","DDDD"],function(e,t,n){n._dayOfYear=D(e)}),I("m",["mm",2],0,"minute"),C("minute","m"),F("minute",14),ue("m",B),ue("mm",B,z),ce(["m","mm"],ve);var ln=Te("Minutes",!1);I("s",["ss",2],0,"second"),C("second","s"),F("second",15),ue("s",B),ue("ss",B,z),ce(["s","ss"],pe);var hn,dn=Te("Seconds",!1);for(I("S",0,0,function(){return~~(this.millisecond()/100)}),I(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),I(0,["SSS",3],0,"millisecond"),I(0,["SSSS",4],0,function(){return 10*this.millisecond()}),I(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),I(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),I(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),I(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),I(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),C("millisecond","ms"),F("millisecond",16),ue("S",K,Z),ue("SS",K,z),ue("SSS",K,$),hn="SSSS";hn.length<=9;hn+="S")ue(hn,ne);function cn(e,t){t[we]=D(1e3*("0."+e))}for(hn="S";hn.length<=9;hn+="S")ce(hn,cn);var fn=Te("Milliseconds",!1);I("z",0,0,"zoneAbbr"),I("zz",0,0,"zoneName");var mn=M.prototype;function _n(e){return e}mn.add=Jt,mn.calendar=function(e,t){var n=e||bt(),s=Gt(n,this).startOf("day"),i=c.calendarFormat(this,s)||"sameElse",r=t&&(b(t[i])?t[i].call(this,n):t[i]);return this.format(r||this.localeData().calendar(i,this,bt(n)))},mn.clone=function(){return new M(this)},mn.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Gt(e,this)).isValid())return NaN;switch(i=6e4*(s.utcOffset()-this.utcOffset()),t=H(t)){case"year":r=Qt(this,s)/12;break;case"month":r=Qt(this,s);break;case"quarter":r=Qt(this,s)/3;break;case"second":r=(this-s)/1e3;break;case"minute":r=(this-s)/6e4;break;case"hour":r=(this-s)/36e5;break;case"day":r=(this-s-i)/864e5;break;case"week":r=(this-s-i)/6048e5;break;default:r=this-s}return n?r:S(r)},mn.endOf=function(e){var t;if(void 0===(e=H(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?rn:sn;switch(e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-nn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-nn(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-nn(t,1e3)-1}return this._d.setTime(t),c.updateOffset(this,!0),this},mn.format=function(e){e||(e=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);var t=A(this,e);return this.localeData().postformat(t)},mn.from=function(e,t){return this.isValid()&&(k(e)&&e.isValid()||bt(e).isValid())?jt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},mn.fromNow=function(e){return this.from(bt(),e)},mn.to=function(e,t){return this.isValid()&&(k(e)&&e.isValid()||bt(e).isValid())?jt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},mn.toNow=function(e){return this.to(bt(),e)},mn.get=function(e){return b(this[e=H(e)])?this[e]():this},mn.invalidAt=function(){return g(this).overflow},mn.isAfter=function(e,t){var n=k(e)?e:bt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=H(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},mn.isBefore=function(e,t){var n=k(e)?e:bt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=H(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},mn.isBetween=function(e,t,n,s){var i=k(e)?e:bt(e),r=k(t)?t:bt(t);return!!(this.isValid()&&i.isValid()&&r.isValid())&&("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(r,n):!this.isAfter(r,n))},mn.isSame=function(e,t){var n,s=k(e)?e:bt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=H(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},mn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},mn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},mn.isValid=function(){return v(this)},mn.lang=Kt,mn.locale=Xt,mn.localeData=en,mn.max=Pt,mn.min=xt,mn.parsingFlags=function(){return _({},g(this))},mn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:U[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=R(e)),s=0;s<n.length;s++)this[n[s].unit](e[n[s].unit]);else if(b(this[e=H(e)]))return this[e](t);return this},mn.startOf=function(e){var t;if(void 0===(e=H(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?rn:sn;switch(e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=nn(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=nn(t,6e4);break;case"second":t=this._d.valueOf(),t-=nn(t,1e3)}return this._d.setTime(t),c.updateOffset(this,!0),this},mn.subtract=Bt,mn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},mn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},mn.toDate=function(){return new Date(this.valueOf())},mn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?A(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):b(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",A(n,"Z")):A(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},mn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+s+"-MM-DD[T]HH:mm:ss.SSS"+i)},mn.toJSON=function(){return this.isValid()?this.toISOString():null},mn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},mn.unix=function(){return Math.floor(this.valueOf()/1e3)},mn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},mn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},mn.year=Oe,mn.isLeapYear=function(){return De(this.year())},mn.weekYear=function(e){return on.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},mn.isoWeekYear=function(e){return on.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},mn.quarter=mn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},mn.month=Ue,mn.daysInMonth=function(){return Pe(this.year(),this.month())},mn.week=mn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},mn.isoWeek=mn.isoWeeks=function(e){var t=Ie(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},mn.weeksInYear=function(){var e=this.localeData()._week;return Ae(this.year(),e.dow,e.doy)},mn.isoWeeksInYear=function(){return Ae(this.year(),1,4)},mn.date=un,mn.day=mn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},mn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},mn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,n,s=(t=e,n=this.localeData(),"string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?s:s-7)},mn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},mn.hour=mn.hours=nt,mn.minute=mn.minutes=ln,mn.second=mn.seconds=dn,mn.millisecond=mn.milliseconds=fn,mn.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?i:Vt(this);if("string"==typeof e){if(null===(e=Nt(re,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Vt(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?qt(this,jt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null)),this},mn.utc=function(e){return this.utcOffset(0,e)},mn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Vt(this),"m")),this},mn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Nt(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},mn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?bt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},mn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},mn.isLocal=function(){return!!this.isValid()&&!this._isUTC},mn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},mn.isUtc=Et,mn.isUTC=Et,mn.zoneAbbr=function(){return this._isUTC?"UTC":""},mn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},mn.dates=n("dates accessor is deprecated. Use date instead.",un),mn.months=n("months accessor is deprecated. Use month instead",Ue),mn.years=n("years accessor is deprecated. Use year instead",Oe),mn.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),mn.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e={};if(w(e,this),(e=Ot(e))._a){var t=e._isUTC?y(e._a):bt(e._a);this._isDSTShifted=this.isValid()&&0<a(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var yn=P.prototype;function gn(e,t,n,s){var i=ht(),r=y().set(s,t);return i[n](r,e)}function vn(e,t,n){if(h(e)&&(t=e,e=void 0),e=e||"",null!=t)return gn(e,t,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=gn(e,s,n,"month");return i}function pn(e,t,n,s){t=("boolean"==typeof e?h(t)&&(n=t,t=void 0):(t=e,e=!1,h(n=t)&&(n=t,t=void 0)),t||"");var i,r=ht(),a=e?r._week.dow:0;if(null!=n)return gn(t,(n+a)%7,s,"day");var o=[];for(i=0;i<7;i++)o[i]=gn(t,(i+a)%7,s,"day");return o}yn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return b(s)?s.call(t,n):s},yn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},yn.invalidDate=function(){return this._invalidDate},yn.ordinal=function(e){return this._ordinal.replace("%d",e)},yn.preparse=_n,yn.postformat=_n,yn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return b(i)?i(e,t,n,s):i.replace(/%d/i,e)},yn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return b(n)?n(t):n.replace(/%s/i,t)},yn.set=function(e){var t,n;for(n in e)b(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},yn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||We).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},yn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[We.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},yn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=y([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Ye.call(this._shortMonthsParse,a))?i:-1!==(i=Ye.call(this._longMonthsParse,a))?i:null:-1!==(i=Ye.call(this._longMonthsParse,a))?i:-1!==(i=Ye.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=y([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},yn.monthsRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||Ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=Le),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},yn.monthsShortRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||Ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Fe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},yn.week=function(e){return Ie(e,this._week.dow,this._week.doy).week},yn.firstDayOfYear=function(){return this._week.doy},yn.firstDayOfWeek=function(){return this._week.dow},yn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?je(n,this._week.dow):e?n[e.day()]:n},yn.weekdaysMin=function(e){return!0===e?je(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},yn.weekdaysShort=function(e){return!0===e?je(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},yn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=y([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Ye.call(this._minWeekdaysParse,a))?i:-1!==(i=Ye.call(this._weekdaysParse,a))?i:-1!==(i=Ye.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=y([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},yn.weekdaysRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=qe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},yn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},yn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Be),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},yn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},yn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},ut("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===D(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),c.lang=n("moment.lang is deprecated. Use moment.locale instead.",ut),c.langData=n("moment.langData is deprecated. Use moment.localeData instead.",ht);var wn=Math.abs;function Mn(e,t,n,s){var i=jt(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function kn(e){return e<0?Math.floor(e):Math.ceil(e)}function Sn(e){return 4800*e/146097}function Dn(e){return 146097*e/4800}function Yn(e){return function(){return this.as(e)}}var On=Yn("ms"),Tn=Yn("s"),bn=Yn("m"),xn=Yn("h"),Pn=Yn("d"),Wn=Yn("w"),Cn=Yn("M"),Hn=Yn("Q"),Rn=Yn("y");function Un(e){return function(){return this.isValid()?this._data[e]:NaN}}var Fn=Un("milliseconds"),Ln=Un("seconds"),Nn=Un("minutes"),Gn=Un("hours"),Vn=Un("days"),En=Un("months"),In=Un("years");var An=Math.round,jn={ss:44,s:45,m:45,h:22,d:26,M:11};var Zn=Math.abs;function zn(e){return(0<e)-(e<0)||+e}function $n(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Zn(this._milliseconds)/1e3,s=Zn(this._days),i=Zn(this._months);t=S((e=S(n/60))/60),n%=60,e%=60;var r=S(i/12),a=i%=12,o=s,u=t,l=e,h=n?n.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var c=d<0?"-":"",f=zn(this._months)!==zn(d)?"-":"",m=zn(this._days)!==zn(d)?"-":"",_=zn(this._milliseconds)!==zn(d)?"-":"";return c+"P"+(r?f+r+"Y":"")+(a?f+a+"M":"")+(o?m+o+"D":"")+(u||l||h?"T":"")+(u?_+u+"H":"")+(l?_+l+"M":"")+(h?_+h+"S":"")}var qn=Ht.prototype;return qn.isValid=function(){return this._isValid},qn.abs=function(){var e=this._data;return this._milliseconds=wn(this._milliseconds),this._days=wn(this._days),this._months=wn(this._months),e.milliseconds=wn(e.milliseconds),e.seconds=wn(e.seconds),e.minutes=wn(e.minutes),e.hours=wn(e.hours),e.months=wn(e.months),e.years=wn(e.years),this},qn.add=function(e,t){return Mn(this,e,t,1)},qn.subtract=function(e,t){return Mn(this,e,t,-1)},qn.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=H(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864e5,n=this._months+Sn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Dn(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}},qn.asMilliseconds=On,qn.asSeconds=Tn,qn.asMinutes=bn,qn.asHours=xn,qn.asDays=Pn,qn.asWeeks=Wn,qn.asMonths=Cn,qn.asQuarters=Hn,qn.asYears=Rn,qn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*D(this._months/12):NaN},qn._bubble=function(){var e,t,n,s,i,r=this._milliseconds,a=this._days,o=this._months,u=this._data;return 0<=r&&0<=a&&0<=o||r<=0&&a<=0&&o<=0||(r+=864e5*kn(Dn(o)+a),o=a=0),u.milliseconds=r%1e3,e=S(r/1e3),u.seconds=e%60,t=S(e/60),u.minutes=t%60,n=S(t/60),u.hours=n%24,o+=i=S(Sn(a+=S(n/24))),a-=kn(Dn(i)),s=S(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},qn.clone=function(){return jt(this)},qn.get=function(e){return e=H(e),this.isValid()?this[e+"s"]():NaN},qn.milliseconds=Fn,qn.seconds=Ln,qn.minutes=Nn,qn.hours=Gn,qn.days=Vn,qn.weeks=function(){return S(this.days()/7)},qn.months=En,qn.years=In,qn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,n,s,i,r,a,o,u,l,h,d,c=this.localeData(),f=(n=!e,s=c,i=jt(t=this).abs(),r=An(i.as("s")),a=An(i.as("m")),o=An(i.as("h")),u=An(i.as("d")),l=An(i.as("M")),h=An(i.as("y")),(d=r<=jn.ss&&["s",r]||r<jn.s&&["ss",r]||a<=1&&["m"]||a<jn.m&&["mm",a]||o<=1&&["h"]||o<jn.h&&["hh",o]||u<=1&&["d"]||u<jn.d&&["dd",u]||l<=1&&["M"]||l<jn.M&&["MM",l]||h<=1&&["y"]||["yy",h])[2]=n,d[3]=0<+t,d[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,d));return e&&(f=c.pastFuture(+this,f)),c.postformat(f)},qn.toISOString=$n,qn.toString=$n,qn.toJSON=$n,qn.locale=Xt,qn.localeData=en,qn.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",$n),qn.lang=Kt,I("X",0,0,"unix"),I("x",0,0,"valueOf"),ue("x",se),ue("X",/[+-]?\d+(\.\d{1,3})?/),ce("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),ce("x",function(e,t,n){n._d=new Date(D(e))}),c.version="2.24.0",e=bt,c.fn=mn,c.min=function(){return Wt("isBefore",[].slice.call(arguments,0))},c.max=function(){return Wt("isAfter",[].slice.call(arguments,0))},c.now=function(){return Date.now?Date.now():+new Date},c.utc=y,c.unix=function(e){return bt(1e3*e)},c.months=function(e,t){return vn(e,t,"months")},c.isDate=d,c.locale=ut,c.invalid=p,c.duration=jt,c.isMoment=k,c.weekdays=function(e,t,n){return pn(e,t,n,"weekdays")},c.parseZone=function(){return bt.apply(null,arguments).parseZone()},c.localeData=ht,c.isDuration=Rt,c.monthsShort=function(e,t){return vn(e,t,"monthsShort")},c.weekdaysMin=function(e,t,n){return pn(e,t,n,"weekdaysMin")},c.defineLocale=lt,c.updateLocale=function(e,t){if(null!=t){var n,s,i=st;null!=(s=ot(e))&&(i=s._config),(n=new P(t=x(i,t))).parentLocale=it[e],it[e]=n,ut(e)}else null!=it[e]&&(null!=it[e].parentLocale?it[e]=it[e].parentLocale:null!=it[e]&&delete it[e]);return it[e]},c.locales=function(){return s(it)},c.weekdaysShort=function(e,t,n){return pn(e,t,n,"weekdaysShort")},c.normalizeUnits=H,c.relativeTimeRounding=function(e){return void 0===e?An:"function"==typeof e&&(An=e,!0)},c.relativeTimeThreshold=function(e,t){return void 0!==jn[e]&&(void 0===t?jn[e]:(jn[e]=t,"s"===e&&(jn.ss=t-1),!0))},c.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},c.prototype=mn,c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},c});
!function(e,o){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?o(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],o):o(e.moment)}(this,function(e){"use strict";var n="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),s="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),o=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],t=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;return e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,o){return e?/-MMM-/.test(o)?s[e.month()]:n[e.month()]:n},monthsRegex:t,monthsShortRegex:t,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})});
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).diffusion=e()}(function(){var e=function(t){var r;return function(e){return r||t(r={exports:{},parent:e},r.exports),r.exports}},a=e(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=require("zlib");t.decompressSync=function(e){return r.inflateSync(e)}}),t=e(function(e,D){(function(l){"use strict";var e="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;D.Buffer=l,D.INSPECT_MAX_BYTES=50;var r=2147483647;function s(e){if(r<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return o(e)}function n(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|p(e,t),n=s(r),o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return i(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(N(e,ArrayBuffer)||e&&N(e.buffer,ArrayBuffer))return c(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(N(e,SharedArrayBuffer)||e&&N(e.buffer,SharedArrayBuffer)))return c(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);var o=function(e){if(l.isBuffer(e)){var t=0|u(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||M(e.length)?s(0):i(e):"Buffer"===e.type&&Array.isArray(e.data)?i(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function o(e){return a(e),s(e<0?0:0|u(e))}function i(e){for(var t=e.length<0?0:0|u(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function c(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function u(e){if(r<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||N(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return C(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return A(e).length;default:if(o)return n?-1:C(e).length;t=(""+t).toLowerCase(),o=!0}}function f(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function h(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),M(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:d(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):d(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function d(e,t,r,n,o){var i,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a/=s=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var p=-1;for(i=r;i<a;i++)if(u(e,i)===u(t,-1===p?0:i-p)){if(-1===p&&(p=i),i-p+1===c)return p*s}else-1!==p&&(i-=i-p),p=-1}else for(a<r+c&&(r=a-c),i=r;0<=i;i--){for(var l=!0,f=0;f<c;f++)if(u(e,i+f)!==u(t,f)){l=!1;break}if(l)return i}return-1}function y(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;i/2<n&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(M(a))return s;e[r+s]=a}return s}function v(e,t,r,n){return P(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function _(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,c,u=e[o],p=null,l=239<u?4:223<u?3:191<u?2:1;if(o+l<=r)switch(l){case 1:u<128&&(p=u);break;case 2:128==(192&(i=e[o+1]))&&127<(c=(31&u)<<6|63&i)&&(p=c);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(c=(15&u)<<12|(63&i)<<6|63&s)&&(c<55296||57343<c)&&(p=c);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)&&c<1114112&&(p=c)}null===p?(p=65533,l=1):65535<p&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),o+=l}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=S));return r}(n)}(l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return n(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return o=t,i=r,a(n=e),n<=0?s(n):void 0!==o?"string"==typeof i?s(n).fill(o,i):s(n).fill(o):s(n);var n,o,i},l.allocUnsafe=function(e){return o(e)},l.allocUnsafeSlow=function(e){return o(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(N(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),N(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(r=t=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(N(i,Uint8Array)&&(i=l.from(i)),!l.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},l.prototype.toLocaleString=l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):function(e,t,r){var n,o,i,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return w(this,t,r);case"utf8":case"utf-8":return _(this,t,r);case"ascii":return E(this,t,r);case"latin1":case"binary":return m(this,t,r);case"base64":return n=this,i=r,0===(o=t)&&i===n.length?ua.fromByteArray(n):ua.fromByteArray(n.slice(o,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,t,r);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=D.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},e&&(l.prototype[e]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,o){if(N(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=t)return 0;if(o<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(n,o),u=e.slice(t,r),p=0;p<a;++p)if(c[p]!==u[p]){i=c[p],s=u[p];break}return i<s?-1:s<i?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return h(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return h(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o,i,s,a,c,u,p,l,f,h=this.length-t;if((void 0===r||h<r)&&(r=h),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var d=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return l=t,f=r,P(C(e,(p=this).length-l),p,l,f);case"ascii":return v(this,e,t,r);case"latin1":case"binary":return v(this,e,t,r);case"base64":return a=this,c=t,u=r,P(A(e),a,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i=t,s=r,P(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(e,(o=this).length-i),o,i,s);default:if(d)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function E(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function m(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function w(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||n<r)&&(r=n);for(var o="",i=t;i<r;++i)o+=L[e[i]];return o}function g(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function T(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,r,n,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function I(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(e,t,r,n,o){return t=+t,r>>>=0,o||I(e,0,r,4),_a.write(e,t,r,n,23,4),r+4}function b(e,t,r,n,o){return t=+t,r>>>=0,o||I(e,0,r,8),_a.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e+--t],o=1;0<t&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);for(var n=t,o=1,i=this[e+--n];0<n&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),_a.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),_a.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),_a.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),_a.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||O(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||O(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);O(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);O(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return b(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return b(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=o-1;0<=i;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var o=e.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(e=o)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=l.isBuffer(e)?e:l.from(e,n),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var t=/[^+/0-9A-Za-z-_]/g;function C(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(t-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function A(e){return ua.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(t,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function P(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function N(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function M(e){return e!=e}var L=function(){for(var e=new Array(256),t=0;t<16;++t)for(var r=16*t,n=0;n<16;++n)e[r+n]="0123456789abcdef"[t]+"0123456789abcdef"[n];return e}()}).call(this,t({}).Buffer)}),r=Math.ceil,n=Math.floor,h=function(e){return isNaN(e=+e)?0:(0<e?n:r)(e)},c=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},o={charAt:(!0,function(e,t){var r,n,o=String(c(e)),i=h(t),s=o.length;return i<0||s<=i?"":(r=o.charCodeAt(i))<55296||56319<r||i+1===s||(n=o.charCodeAt(i+1))<56320||57343<n?o.charAt(i):o.slice(i,i+2)})},v={};(function(e){var t=function(e){return e&&e.Math==Math&&e};v=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||Function("return this")()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _=function(e){try{return!!e()}catch(e){return!0}},u=!_(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),S=function(e){return"object"==typeof e?null!==e:"function"==typeof e},i=v.document,s=S(i)&&S(i.createElement),p=function(e){return s?i.createElement(e):{}},l=!u&&!_(function(){return 7!=Object.defineProperty(p("div"),"a",{get:function(){return 7}}).a}),d=function(e){if(!S(e))throw TypeError(String(e)+" is not an object");return e},f=function(e,t){if(!S(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!S(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!S(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!S(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},y={},E=Object.defineProperty;y.f=u?E:function(e,t,r){if(d(e),t=f(t,!0),d(r),l)try{return E(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var m=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},w=u?function(e,t,r){return y.f(e,t,m(1,r))}:function(e,t,r){return e[t]=r,e},g=function(t,r){try{w(v,t,r)}catch(e){v[t]=r}return r},T=v["__core-js_shared__"]||g("__core-js_shared__",{}),O=Function.toString;"function"!=typeof T.inspectSource&&(T.inspectSource=function(e){return O.call(e)});var I,R=T.inspectSource,b=v.WeakMap,C="function"==typeof b&&/native code/.test(R(b)),A={}.hasOwnProperty,P=function(e,t){return A.call(e,t)};(I=function(e,t){return T[e]||(T[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"});var N,M,L,D=0,j=Math.random(),U=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++D+j).toString(36)},x=I("keys"),B=function(e){return x[e]||(x[e]=U(e))},k={},q=v.WeakMap;if(C){var V=new q,F=V.get,G=V.has,H=V.set;N=function(e,t){return H.call(V,e,t),t},M=function(e){return F.call(V,e)||{}},L=function(e){return G.call(V,e)}}else{var W=B("state");k[W]=!0,N=function(e,t){return w(e,W,t),t},M=function(e){return P(e,W)?e[W]:{}},L=function(e){return P(e,W)}}var Y={set:N,get:M,enforce:function(e){return L(e)?M(e):N(e,{})},getterFor:function(r){return function(e){var t;if(!S(e)||(t=M(e)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return t}}},z={},$={}.propertyIsEnumerable,Q=Object.getOwnPropertyDescriptor,K=Q&&!$.call({1:2},1);z.f=K?function(e){var t=Q(this,e);return!!t&&t.enumerable}:$;var J={}.toString,X=function(e){return J.call(e).slice(8,-1)},Z="".split,ee=_(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==X(e)?Z.call(e,""):Object(e)}:Object,te=function(e){return ee(c(e))},re={},ne=Object.getOwnPropertyDescriptor;re.f=u?ne:function(e,t){if(e=te(e),t=f(t,!0),l)try{return ne(e,t)}catch(e){}if(P(e,t))return m(!z.f.call(e,t),e[t])};var oe,ie=Y.get,se=Y.enforce,ae=String(String).split("String");(oe=function(e,t,r,n){var o=!!n&&!!n.unsafe,i=!!n&&!!n.enumerable,s=!!n&&!!n.noTargetGet;"function"==typeof r&&("string"!=typeof t||P(r,"name")||w(r,"name",t),se(r).source=ae.join("string"==typeof t?t:"")),e!==v?(o?!s&&e[t]&&(i=!0):delete e[t],i?e[t]=r:w(e,t,r)):i?e[t]=r:g(t,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&ie(this).source||R(this)});var ce=v,ue=function(e){return"function"==typeof e?e:void 0},pe=function(e,t){return arguments.length<2?ue(ce[e])||ue(v[e]):ce[e]&&ce[e][t]||v[e]&&v[e][t]},le=Math.min,fe=function(e){return 0<e?le(h(e),9007199254740991):0},he=Math.max,de=Math.min,ye=function(e,t){var r=h(e);return r<0?he(r+t,0):de(r,t)},ve=function(a){return function(e,t,r){var n,o=te(e),i=fe(o.length),s=ye(r,i);if(a&&t!=t){for(;s<i;)if((n=o[s++])!=n)return!0}else for(;s<i;s++)if((a||s in o)&&o[s]===t)return a||s||0;return!a&&-1}},_e={includes:ve(!0),indexOf:ve(!1)},Se=_e.indexOf,Ee=function(e,t){var r,n=te(e),o=0,i=[];for(r in n)!P(k,r)&&P(n,r)&&i.push(r);for(;t.length>o;)P(n,r=t[o++])&&(~Se(i,r)||i.push(r));return i},me=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],we={},ge=me.concat("length","prototype");we.f=Object.getOwnPropertyNames||function(e){return Ee(e,ge)};var Te={};Te.f=Object.getOwnPropertySymbols;var Oe,Ie,Re,be=pe("Reflect","ownKeys")||function(e){var t=we.f(d(e)),r=Te.f;return r?t.concat(r(e)):t},Ce=function(e,t){for(var r=be(t),n=y.f,o=re.f,i=0;i<r.length;i++){var s=r[i];P(e,s)||n(e,s,o(t,s))}},Ae=/#|\.prototype\./,Pe=function(e,t){var r=Me[Ne(e)];return r==De||r!=Le&&("function"==typeof t?_(t):!!t)},Ne=Pe.normalize=function(e){return String(e).replace(Ae,".").toLowerCase()},Me=Pe.data={},Le=Pe.NATIVE="N",De=Pe.POLYFILL="P",je=Pe,Ue=re.f,xe=function(e,t){var r,n,o,i,s,a=e.target,c=e.global,u=e.stat;if(r=c?v:u?v[a]||g(a,{}):(v[a]||{}).prototype)for(n in t){if(i=t[n],o=e.noTargetGet?(s=Ue(r,n))&&s.value:r[n],!je(c?n:a+(u?".":"#")+n,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;Ce(i,o)}(e.sham||o&&o.sham)&&w(i,"sham",!0),oe(r,n,i,e)}},Be=function(e){return Object(c(e))},ke=!_(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),qe=B("IE_PROTO"),Ve=Object.prototype,Fe=ke?Object.getPrototypeOf:function(e){return e=Be(e),P(e,qe)?e[qe]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ve:null},Ge=!!Object.getOwnPropertySymbols&&!_(function(){return!String(Symbol())}),He=Ge&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,We=I("wks"),Ye=v.Symbol,ze=He?Ye:Ye&&Ye.withoutSetter||U,$e=function(e){return P(We,e)||(Ge&&P(Ye,e)?We[e]=Ye[e]:We[e]=ze("Symbol."+e)),We[e]},Qe=$e("iterator"),Ke=!1;[].keys&&("next"in(Re=[].keys())?(Ie=Fe(Fe(Re)))!==Object.prototype&&(Oe=Ie):Ke=!0),null==Oe&&(Oe={}),P(Oe,Qe)||w(Oe,Qe,function(){return this});var Je,Xe={IteratorPrototype:Oe,BUGGY_SAFARI_ITERATORS:Ke},Ze=Object.keys||function(e){return Ee(e,me)},et=u?Object.defineProperties:function(e,t){d(e);for(var r,n=Ze(t),o=n.length,i=0;i<o;)y.f(e,r=n[i++],t[r]);return e},tt=pe("document","documentElement"),rt=B("IE_PROTO"),nt=function(){},ot=function(e){return"<script>"+e+"<\/script>"},it=function(){try{Je=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;it=Je?function(e){e.write(ot("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Je):((t=p("iframe")).style.display="none",tt.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(ot("document.F=Object")),e.close(),e.F);for(var r=me.length;r--;)delete it.prototype[me[r]];return it()};k[rt]=!0;var st=Object.create||function(e,t){var r;return null!==e?(nt.prototype=d(e),r=new nt,nt.prototype=null,r[rt]=e):r=it(),void 0===t?r:et(r,t)},at=y.f,ct=$e("toStringTag"),ut=function(e,t,r){e&&!P(e=r?e:e.prototype,ct)&&at(e,ct,{configurable:!0,value:t})},pt={},lt=Xe.IteratorPrototype,ft=function(){return this},ht=Object.setPrototypeOf||("__proto__"in{}?function(){var r,n=!1,e={};try{(r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),n=e instanceof Array}catch(r){}return function(e,t){return d(e),function(e){if(!S(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(t),n?r.call(e,t):e.__proto__=t,e}}():void 0),dt=Xe.IteratorPrototype,yt=Xe.BUGGY_SAFARI_ITERATORS,vt=$e("iterator"),_t=function(){return this},St=function(e,t,r,n,o,i,s){var a,c,u;c=n,u=t+" Iterator",(a=r).prototype=st(lt,{next:m(1,c)}),ut(a,u,!1),pt[u]=ft;var p,l,f,h=function(e){if(e===o&&S)return S;if(!yt&&e in v)return v[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},d=t+" Iterator",y=!1,v=e.prototype,_=v[vt]||v["@@iterator"]||o&&v[o],S=!yt&&_||h(o),E="Array"==t&&v.entries||_;if(E&&(p=Fe(E.call(new e)),dt!==Object.prototype&&p.next&&(Fe(p)!==dt&&(ht?ht(p,dt):"function"!=typeof p[vt]&&w(p,vt,_t)),ut(p,d,!0))),"values"==o&&_&&"values"!==_.name&&(y=!0,S=function(){return _.call(this)}),v[vt]!==S&&w(v,vt,S),pt[t]=S,o)if(l={values:h("values"),keys:i?S:h("keys"),entries:h("entries")},s)for(f in l)!yt&&!y&&f in v||oe(v,f,l[f]);else xe({target:t,proto:!0,forced:yt||y},l);return l},Et=o.charAt,mt=Y.set,wt=Y.getterFor("String Iterator");St(String,"String",function(e){mt(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=wt(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=Et(r,n),t.index+=e.length,{value:e,done:!1})});var gt=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Tt=function(n,o,e){if(gt(n),void 0===o)return n;switch(e){case 0:return function(){return n.call(o)};case 1:return function(e){return n.call(o,e)};case 2:return function(e,t){return n.call(o,e,t)};case 3:return function(e,t,r){return n.call(o,e,t,r)}}return function(){return n.apply(o,arguments)}},Ot=function(e,t,r,n){try{return n?t(d(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&d(o.call(e)),t}},It=$e("iterator"),Rt=Array.prototype,bt=function(e){return void 0!==e&&(pt.Array===e||Rt[It]===e)},Ct=function(e,t,r){var n=f(t);n in e?y.f(e,n,m(0,r)):e[n]=r},At={};At[$e("toStringTag")]="z";var Pt="[object z]"===String(At),Nt=$e("toStringTag"),Mt="Arguments"==X(function(){return arguments}()),Lt=Pt?X:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Nt))?r:Mt?X(t):"Object"==(n=X(t))&&"function"==typeof t.callee?"Arguments":n},Dt=$e("iterator"),jt=function(e){if(null!=e)return e[Dt]||e["@@iterator"]||pt[Lt(e)]},Ut=$e("iterator"),xt=!1;try{var Bt=0,kt={next:function(){return{done:!!Bt++}},return:function(){xt=!0}};kt[Ut]=function(){return this},Array.from(kt,function(){throw 2})}catch(e){}var qt=function(e,t){if(!t&&!xt)return!1;var r=!1;try{var n={};n[Ut]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},Vt=!qt(function(e){Array.from(e)});xe({target:"Array",stat:!0,forced:Vt},{from:function(e){var t,r,n,o,i,s,a=Be(e),c="function"==typeof this?this:Array,u=arguments.length,p=1<u?arguments[1]:void 0,l=void 0!==p,f=jt(a),h=0;if(l&&(p=Tt(p,2<u?arguments[2]:void 0,2)),null==f||c==Array&&bt(f))for(r=new c(t=fe(a.length));h<t;h++)s=l?p(a[h],h):a[h],Ct(r,h,s);else for(i=(o=f.call(a)).next,r=new c;!(n=i.call(o)).done;h++)s=l?Ot(o,p,[n.value,h],!0):n.value,Ct(r,h,s);return r.length=h,r}});var Ft=Array.isArray||function(e){return"Array"==X(e)};xe({target:"Array",stat:!0},{isArray:Ft});var Gt=_(function(){function e(){}return!(Array.of.call(e)instanceof e)});xe({target:"Array",stat:!0,forced:Gt},{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);e<t;)Ct(r,e,arguments[e++]);return r.length=t,r}});var Ht,Wt,Yt=$e("species"),zt=function(e,t){var r;return Ft(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!Ft(r.prototype)?S(r)&&null===(r=r[Yt])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)},$t=pe("navigator","userAgent")||"",Qt=v.process,Kt=Qt&&Qt.versions,Jt=Kt&&Kt.v8;Jt?Wt=(Ht=Jt.split("."))[0]+Ht[1]:$t&&(!(Ht=$t.match(/Edge\/(\d+)/))||74<=Ht[1])&&(Ht=$t.match(/Chrome\/(\d+)/))&&(Wt=Ht[1]);var Xt=Wt&&+Wt,Zt=$e("species"),er=function(t){return 51<=Xt||!_(function(){var e=[];return(e.constructor={})[Zt]=function(){return{foo:1}},1!==e[t](Boolean).foo})},tr=$e("isConcatSpreadable"),rr=51<=Xt||!_(function(){var e=[];return e[tr]=!1,e.concat()[0]!==e}),nr=er("concat"),or=function(e){if(!S(e))return!1;var t=e[tr];return void 0!==t?!!t:Ft(e)};xe({target:"Array",proto:!0,forced:!rr||!nr},{concat:function(e){var t,r,n,o,i,s=Be(this),a=zt(s,0),c=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?s:arguments[t],or(i)){if(9007199254740991<c+(o=fe(i.length)))throw TypeError("Maximum allowed index exceeded");for(r=0;r<o;r++,c++)r in i&&Ct(a,c,i[r])}else{if(9007199254740991<=c)throw TypeError("Maximum allowed index exceeded");Ct(a,c++,i)}return a.length=c,a}});var ir=Math.min,sr=[].copyWithin||function(e,t){var r=Be(this),n=fe(r.length),o=ye(e,n),i=ye(t,n),s=2<arguments.length?arguments[2]:void 0,a=ir((void 0===s?n:ye(s,n))-i,n-o),c=1;for(i<o&&o<i+a&&(c=-1,i+=a-1,o+=a-1);0<a--;)i in r?r[o]=r[i]:delete r[o],o+=c,i+=c;return r},ar=$e("unscopables"),cr=Array.prototype;null==cr[ar]&&y.f(cr,ar,{configurable:!0,value:st(null)});var ur=function(e){cr[ar][e]=!0};xe({target:"Array",proto:!0},{copyWithin:sr}),ur("copyWithin");var pr=[].push,lr=function(h){var d=1==h,y=2==h,v=3==h,_=4==h,S=6==h,E=5==h||S;return function(e,t,r,n){for(var o,i,s=Be(e),a=ee(s),c=Tt(t,r,3),u=fe(a.length),p=0,l=n||zt,f=d?l(e,u):y?l(e,0):void 0;p<u;p++)if((E||p in a)&&(i=c(o=a[p],p,s),h))if(d)f[p]=i;else if(i)switch(h){case 3:return!0;case 5:return o;case 6:return p;case 2:pr.call(f,o)}else if(_)return!1;return S?-1:v||_?_:f}},fr={forEach:lr(0),map:lr(1),filter:lr(2),some:lr(3),every:lr(4),find:lr(5),findIndex:lr(6)},hr=function(e,t){var r=[][e];return!!r&&_(function(){r.call(null,t||function(){throw 1},1)})},dr=Object.defineProperty,yr={},vr=function(e){throw e},_r=function(e,t){if(P(yr,e))return yr[e];t||(t={});var r=[][e],n=!!P(t,"ACCESSORS")&&t.ACCESSORS,o=P(t,0)?t[0]:vr,i=P(t,1)?t[1]:void 0;return yr[e]=!!r&&!_(function(){if(n&&!u)return!0;var e={length:-1};n?dr(e,1,{enumerable:!0,get:vr}):e[1]=1,r.call(e,o,i)})},Sr=fr.every,Er=hr("every"),mr=_r("every");xe({target:"Array",proto:!0,forced:!Er||!mr},{every:function(e){return Sr(this,e,1<arguments.length?arguments[1]:void 0)}}),xe({target:"Array",proto:!0},{fill:function(e){for(var t=Be(this),r=fe(t.length),n=arguments.length,o=ye(1<n?arguments[1]:void 0,r),i=2<n?arguments[2]:void 0,s=void 0===i?r:ye(i,r);o<s;)t[o++]=e;return t}}),ur("fill");var wr=fr.filter,gr=er("filter"),Tr=_r("filter");xe({target:"Array",proto:!0,forced:!gr||!Tr},{filter:function(e){return wr(this,e,1<arguments.length?arguments[1]:void 0)}});var Or=fr.find,Ir=!0,Rr=_r("find");"find"in[]&&Array(1).find(function(){Ir=!1}),xe({target:"Array",proto:!0,forced:Ir||!Rr},{find:function(e){return Or(this,e,1<arguments.length?arguments[1]:void 0)}}),ur("find");var br=fr.findIndex,Cr=!0,Ar=_r("findIndex");"findIndex"in[]&&Array(1).findIndex(function(){Cr=!1}),xe({target:"Array",proto:!0,forced:Cr||!Ar},{findIndex:function(e){return br(this,e,1<arguments.length?arguments[1]:void 0)}}),ur("findIndex");var Pr=function(e,t,r,n,o,i,s,a){for(var c,u=o,p=0,l=!!s&&Tt(s,a,3);p<n;){if(p in r){if(c=l?l(r[p],p,t):r[p],0<i&&Ft(c))u=Pr(e,t,c,fe(c.length),u,i-1)-1;else{if(9007199254740991<=u)throw TypeError("Exceed the acceptable array length");e[u]=c}u++}p++}return u},Nr=Pr;xe({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=Be(this),r=fe(t.length),n=zt(t,0);return n.length=Nr(n,t,t,r,0,void 0===e?1:h(e)),n}}),xe({target:"Array",proto:!0},{flatMap:function(e){var t,r=Be(this),n=fe(r.length);return gt(e),(t=zt(r,0)).length=Nr(t,r,r,n,0,1,e,1<arguments.length?arguments[1]:void 0),t}});var Mr=fr.forEach,Lr=hr("forEach"),Dr=_r("forEach"),jr=Lr&&Dr?[].forEach:function(e){return Mr(this,e,1<arguments.length?arguments[1]:void 0)};xe({target:"Array",proto:!0,forced:[].forEach!=jr},{forEach:jr});var Ur=_e.includes,xr=_r("indexOf",{ACCESSORS:!0,1:0});xe({target:"Array",proto:!0,forced:!xr},{includes:function(e){return Ur(this,e,1<arguments.length?arguments[1]:void 0)}}),ur("includes");var Br=_e.indexOf,kr=[].indexOf,qr=!!kr&&1/[1].indexOf(1,-0)<0,Vr=hr("indexOf"),Fr=_r("indexOf",{ACCESSORS:!0,1:0});xe({target:"Array",proto:!0,forced:qr||!Vr||!Fr},{indexOf:function(e){return qr?kr.apply(this,arguments)||0:Br(this,e,1<arguments.length?arguments[1]:void 0)}});var Gr=Y.set,Hr=Y.getterFor("Array Iterator"),Wr=St(Array,"Array",function(e,t){Gr(this,{type:"Array Iterator",target:te(e),index:0,kind:t})},function(){var e=Hr(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?{value:e.target=void 0,done:!0}:"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values");pt.Arguments=pt.Array,ur("keys"),ur("values"),ur("entries");var Yr=[].join,zr=ee!=Object,$r=hr("join",",");xe({target:"Array",proto:!0,forced:zr||!$r},{join:function(e){return Yr.call(te(this),void 0===e?",":e)}});var Qr=Math.min,Kr=[].lastIndexOf,Jr=!!Kr&&1/[1].lastIndexOf(1,-0)<0,Xr=hr("lastIndexOf"),Zr=_r("indexOf",{ACCESSORS:!0,1:0}),en=!Jr&&Xr&&Zr?Kr:function(e){if(Jr)return Kr.apply(this,arguments)||0;var t=te(this),r=fe(t.length),n=r-1;for(1<arguments.length&&(n=Qr(n,h(arguments[1]))),n<0&&(n=r+n);0<=n;n--)if(n in t&&t[n]===e)return n||0;return-1};xe({target:"Array",proto:!0,forced:en!==[].lastIndexOf},{lastIndexOf:en});var tn=fr.map,rn=er("map"),nn=_r("map");xe({target:"Array",proto:!0,forced:!rn||!nn},{map:function(e){return tn(this,e,1<arguments.length?arguments[1]:void 0)}});var on=function(u){return function(e,t,r,n){gt(t);var o=Be(e),i=ee(o),s=fe(o.length),a=u?s-1:0,c=u?-1:1;if(r<2)for(;;){if(a in i){n=i[a],a+=c;break}if(a+=c,u?a<0:s<=a)throw TypeError("Reduce of empty array with no initial value")}for(;u?0<=a:a<s;a+=c)a in i&&(n=t(n,i[a],a,o));return n}},sn={left:on(!1),right:on(!0)},an=sn.left,cn=hr("reduce"),un=_r("reduce",{1:0});xe({target:"Array",proto:!0,forced:!cn||!un},{reduce:function(e){return an(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var pn=sn.right,ln=hr("reduceRight"),fn=_r("reduce",{1:0});xe({target:"Array",proto:!0,forced:!ln||!fn},{reduceRight:function(e){return pn(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var hn=[].reverse,dn=[1,2];xe({target:"Array",proto:!0,forced:String(dn)===String(dn.reverse())},{reverse:function(){return Ft(this)&&(this.length=this.length),hn.call(this)}});var yn=er("slice"),vn=_r("slice",{ACCESSORS:!0,0:0,1:2}),_n=$e("species"),Sn=[].slice,En=Math.max;xe({target:"Array",proto:!0,forced:!yn||!vn},{slice:function(e,t){var r,n,o,i=te(this),s=fe(i.length),a=ye(e,s),c=ye(void 0===t?s:t,s);if(Ft(i)&&("function"!=typeof(r=i.constructor)||r!==Array&&!Ft(r.prototype)?S(r)&&null===(r=r[_n])&&(r=void 0):r=void 0,r===Array||void 0===r))return Sn.call(i,a,c);for(n=new(void 0===r?Array:r)(En(c-a,0)),o=0;a<c;a++,o++)a in i&&Ct(n,o,i[a]);return n.length=o,n}});var mn=fr.some,wn=hr("some"),gn=_r("some");xe({target:"Array",proto:!0,forced:!wn||!gn},{some:function(e){return mn(this,e,1<arguments.length?arguments[1]:void 0)}});var Tn=[],On=Tn.sort,In=_(function(){Tn.sort(void 0)}),Rn=_(function(){Tn.sort(null)}),bn=hr("sort");xe({target:"Array",proto:!0,forced:In||!Rn||!bn},{sort:function(e){return void 0===e?On.call(Be(this)):On.call(Be(this),gt(e))}});var Cn=$e("species"),An=function(e){var t=pe(e),r=y.f;u&&t&&!t[Cn]&&r(t,Cn,{configurable:!0,get:function(){return this}})};An("Array");var Pn=er("splice"),Nn=_r("splice",{ACCESSORS:!0,0:0,1:2}),Mn=Math.max,Ln=Math.min;xe({target:"Array",proto:!0,forced:!Pn||!Nn},{splice:function(e,t){var r,n,o,i,s,a,c=Be(this),u=fe(c.length),p=ye(e,u),l=arguments.length;if(0===l?r=n=0:n=1===l?(r=0,u-p):(r=l-2,Ln(Mn(h(t),0),u-p)),9007199254740991<u+r-n)throw TypeError("Maximum allowed length exceeded");for(o=zt(c,n),i=0;i<n;i++)(s=p+i)in c&&Ct(o,i,c[s]);if(r<(o.length=n)){for(i=p;i<u-n;i++)a=i+r,(s=i+n)in c?c[a]=c[s]:delete c[a];for(i=u;u-n+r<i;i--)delete c[i-1]}else if(n<r)for(i=u-n;p<i;i--)a=i+r-1,(s=i+n-1)in c?c[a]=c[s]:delete c[a];for(i=0;i<r;i++)c[i+p]=arguments[i+2];return c.length=u-n+r,o}}),ur("flat"),ur("flatMap"),ce.Array;var Dn=Object.isFrozen,jn=function(e,t){if(!Dn||!Ft(e)||!Dn(e))return!1;for(var r,n=0,o=e.length;n<o;)if(!("string"==typeof(r=e[n++])||t&&void 0===r))return!1;return 0!==o};xe({target:"Array",stat:!0},{isTemplateObject:function(e){if(!jn(e,!0))return!1;var t=e.raw;return!(t.length!==e.length||!jn(t,!1))}});var Un=y.f;!u||"lastItem"in[]||(Un(Array.prototype,"lastItem",{configurable:!0,get:function(){var e=Be(this),t=fe(e.length);return 0==t?void 0:e[t-1]},set:function(e){var t=Be(this),r=fe(t.length);return t[0==r?0:r-1]=e}}),ur("lastItem"));var xn=y.f;!u||"lastIndex"in[]||(xn(Array.prototype,"lastIndex",{configurable:!0,get:function(){var e=Be(this),t=fe(e.length);return 0==t?0:t-1}}),ur("lastIndex"));var Bn=!_(function(){return Object.isExtensible(Object.preventExtensions({}))}),kn={},qn=y.f,Vn=U("meta"),Fn=0,Gn=Object.isExtensible||function(){return!0},Hn=function(e){qn(e,Vn,{value:{objectID:"O"+ ++Fn,weakData:{}}})},Wn=kn={REQUIRED:!1,fastKey:function(e,t){if(!S(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!P(e,Vn)){if(!Gn(e))return"F";if(!t)return"E";Hn(e)}return e[Vn].objectID},getWeakData:function(e,t){if(!P(e,Vn)){if(!Gn(e))return!0;if(!t)return!1;Hn(e)}return e[Vn].weakData},onFreeze:function(e){return Bn&&Wn.REQUIRED&&Gn(e)&&!P(e,Vn)&&Hn(e),e}};k[Vn]=!0;var Yn,zn=function(e,t){this.stopped=e,this.result=t};(Yn=function(e,t,r,n,o){var i,s,a,c,u,p,l,f=Tt(t,r,n?2:1);if(o)i=e;else{if("function"!=typeof(s=jt(e)))throw TypeError("Target is not iterable");if(bt(s)){for(a=0,c=fe(e.length);a<c;a++)if((u=n?f(d(l=e[a])[0],l[1]):f(e[a]))&&u instanceof zn)return u;return new zn(!1)}i=s.call(e)}for(p=i.next;!(l=p.call(i)).done;)if("object"==typeof(u=Ot(i,f,l.value,n))&&u&&u instanceof zn)return u;return new zn(!1)}).stop=function(e){return new zn(!0,e)};var $n=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e},Qn=function(e,t,r){var n,o;return ht&&"function"==typeof(n=t.constructor)&&n!==r&&S(o=n.prototype)&&o!==r.prototype&&ht(e,o),e},Kn=function(n,e,t){var o=-1!==n.indexOf("Map"),i=-1!==n.indexOf("Weak"),s=o?"set":"add",a=v[n],c=a&&a.prototype,u=a,r={},p=function(e){var r=c[e];oe(c,e,"add"==e?function(e){return r.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!S(e))&&r.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!S(e)?void 0:r.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!S(e))&&r.call(this,0===e?0:e)}:function(e,t){return r.call(this,0===e?0:e,t),this})};if(je(n,"function"!=typeof a||!(i||c.forEach&&!_(function(){(new a).entries().next()}))))u=t.getConstructor(e,n,o,s),kn.REQUIRED=!0;else if(je(n,!0)){var l=new u,f=l[s](i?{}:-0,1)!=l,h=_(function(){l.has(1)}),d=qt(function(e){new a(e)}),y=!i&&_(function(){for(var e=new a,t=5;t--;)e[s](t,t);return!e.has(-0)});d||(((u=e(function(e,t){$n(e,u,n);var r=Qn(new a,e,u);return null!=t&&Yn(t,r[s],r,o),r})).prototype=c).constructor=u),(h||y)&&(p("delete"),p("has"),o&&p("get")),(y||f)&&p(s),i&&c.clear&&delete c.clear}return r[n]=u,xe({global:!0,forced:u!=a},r),ut(u,n),i||t.setStrong(u,n,o),u},Jn=function(e,t,r){for(var n in t)oe(e,n,t[n],r);return e},Xn=y.f,Zn=kn.fastKey,eo=Y.set,to=Y.getterFor,ro={getConstructor:function(e,r,n,o){var i=e(function(e,t){$n(e,i,r),eo(e,{type:r,index:st(null),first:void 0,last:void 0,size:0}),u||(e.size=0),null!=t&&Yn(t,e[o],e,n)}),a=to(r),s=function(e,t,r){var n,o,i=a(e),s=c(e,t);return s?s.value=r:(i.last=s={index:o=Zn(t,!0),key:t,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=s),n&&(n.next=s),u?i.size++:e.size++,"F"!==o&&(i.index[o]=s)),e},c=function(e,t){var r,n=a(e),o=Zn(t);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==t)return r};return Jn(i.prototype,{clear:function(){for(var e=a(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,u?e.size=0:this.size=0},delete:function(e){var t=a(this),r=c(this,e);if(r){var n=r.next,o=r.previous;delete t.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),t.first==r&&(t.first=n),t.last==r&&(t.last=o),u?t.size--:this.size--}return!!r},forEach:function(e){for(var t,r=a(this),n=Tt(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),Jn(i.prototype,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),u&&Xn(i.prototype,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,r){var n=t+" Iterator",o=to(t),i=to(n);St(e,t,function(e,t){eo(this,{type:n,target:e,state:o(e),kind:t,last:void 0})},function(){for(var e=i(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:{value:e.target=void 0,done:!0}},r?"entries":"values",!r,!0),An(t)}},no=(Kn("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},ro),Pt?{}.toString:function(){return"[object "+Lt(this)+"]"});Pt||oe(Object.prototype,"toString",no,{unsafe:!0});var oo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},io=$e("iterator"),so=$e("toStringTag"),ao=Wr.values;for(var co in oo){var uo=v[co],po=uo&&uo.prototype;if(po){if(po[io]!==ao)try{w(po,io,ao)}catch(e){po[io]=ao}if(po[so]||w(po,so,co),oo[co])for(var lo in Wr)if(po[lo]!==Wr[lo])try{w(po,lo,Wr[lo])}catch(e){po[lo]=Wr[lo]}}}ce.Map;var fo=function(e){var t,r,n,o,i=arguments.length,s=1<i?arguments[1]:void 0;return gt(this),(t=void 0!==s)&&gt(s),null==e?new this:(r=[],t?(n=0,o=Tt(s,2<i?arguments[2]:void 0,2),Yn(e,function(e){r.push(o(e,n++))})):Yn(e,r.push,r),new this(r))};xe({target:"Map",stat:!0},{from:fo});var ho=function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)};xe({target:"Map",stat:!0},{of:ho});var yo=function(){for(var e,t=d(this),r=gt(t.delete),n=!0,o=0,i=arguments.length;o<i;o++)e=r.call(t,arguments[o]),n=n&&e;return!!n};xe({target:"Map",proto:!0,real:!0,forced:!1},{deleteAll:function(){return yo.apply(this,arguments)}});var vo=function(e){return Map.prototype.entries.call(e)};xe({target:"Map",proto:!0,real:!0,forced:!1},{every:function(e){var r=d(this),t=vo(r),n=Tt(e,1<arguments.length?arguments[1]:void 0,3);return!Yn(t,function(e,t){if(!n(t,e,r))return Yn.stop()},void 0,!0,!0).stopped}});var _o=$e("species"),So=function(e,t){var r,n=d(e).constructor;return void 0===n||null==(r=d(n)[_o])?t:gt(r)};xe({target:"Map",proto:!0,real:!0,forced:!1},{filter:function(e){var r=d(this),t=vo(r),n=Tt(e,1<arguments.length?arguments[1]:void 0,3),o=new(So(r,pe("Map"))),i=gt(o.set);return Yn(t,function(e,t){n(t,e,r)&&i.call(o,e,t)},void 0,!0,!0),o}}),xe({target:"Map",proto:!0,real:!0,forced:!1},{find:function(e){var r=d(this),t=vo(r),n=Tt(e,1<arguments.length?arguments[1]:void 0,3);return Yn(t,function(e,t){if(n(t,e,r))return Yn.stop(t)},void 0,!0,!0).result}}),xe({target:"Map",proto:!0,real:!0,forced:!1},{findKey:function(e){var r=d(this),t=vo(r),n=Tt(e,1<arguments.length?arguments[1]:void 0,3);return Yn(t,function(e,t){if(n(t,e,r))return Yn.stop(e)},void 0,!0,!0).result}}),xe({target:"Map",stat:!0},{groupBy:function(e,r){var n=new this;gt(r);var o=gt(n.has),i=gt(n.get),s=gt(n.set);return Yn(e,function(e){var t=r(e);o.call(n,t)?i.call(n,t).push(e):s.call(n,t,[e])}),n}}),xe({target:"Map",proto:!0,real:!0,forced:!1},{includes:function(o){return Yn(vo(d(this)),function(e,t){if((r=t)===(n=o)||r!=r&&n!=n)return Yn.stop();var r,n},void 0,!0,!0).stopped}}),xe({target:"Map",stat:!0},{keyBy:function(e,t){var r=new this;gt(t);var n=gt(r.set);return Yn(e,function(e){n.call(r,t(e),e)}),r}}),xe({target:"Map",proto:!0,real:!0,forced:!1},{keyOf:function(r){return Yn(vo(d(this)),function(e,t){if(t===r)return Yn.stop(e)},void 0,!0,!0).result}}),xe({target:"Map",proto:!0,real:!0,forced:!1},{mapKeys:function(e){var r=d(this),t=vo(r),n=Tt(e,1<arguments.length?arguments[1]:void 0,3),o=new(So(r,pe("Map"))),i=gt(o.set);return Yn(t,function(e,t){i.call(o,n(t,e,r),t)},void 0,!0,!0),o}}),xe({target:"Map",proto:!0,real:!0,forced:!1},{mapValues:function(e){var r=d(this),t=vo(r),n=Tt(e,1<arguments.length?arguments[1]:void 0,3),o=new(So(r,pe("Map"))),i=gt(o.set);return Yn(t,function(e,t){i.call(o,e,n(t,e,r))},void 0,!0,!0),o}}),xe({target:"Map",proto:!0,real:!0,forced:!1},{merge:function(e){for(var t=d(this),r=gt(t.set),n=0;n<arguments.length;)Yn(arguments[n++],r,t,!0);return t}}),xe({target:"Map",proto:!0,real:!0,forced:!1},{reduce:function(r){var n=d(this),e=vo(n),o=arguments.length<2,i=o?void 0:arguments[1];if(gt(r),Yn(e,function(e,t){i=o?(o=!1,t):r(i,t,e,n)},void 0,!0,!0),o)throw TypeError("Reduce of empty map with no initial value");return i}}),xe({target:"Map",proto:!0,real:!0,forced:!1},{some:function(e){var r=d(this),t=vo(r),n=Tt(e,1<arguments.length?arguments[1]:void 0,3);return Yn(t,function(e,t){if(n(t,e,r))return Yn.stop()},void 0,!0,!0).stopped}}),xe({target:"Map",proto:!0,real:!0,forced:!1},{update:function(e,t){var r=d(this),n=arguments.length;gt(t);var o=r.has(e);if(!o&&n<3)throw TypeError("Updating absent value");var i=o?r.get(e):gt(2<n?arguments[2]:void 0)(e,r);return r.set(e,t(i,e,r)),r}});var Eo=function(e,t){var r,n=d(this),o=2<arguments.length?arguments[2]:void 0;if("function"!=typeof t&&"function"!=typeof o)throw TypeError("At least one callback required");return n.has(e)?(r=n.get(e),"function"==typeof t&&(r=t(r),n.set(e,r))):"function"==typeof o&&(r=o(),n.set(e,r)),r};xe({target:"Map",proto:!0,real:!0,forced:!1},{upsert:Eo}),xe({target:"Map",proto:!0,real:!0,forced:!1},{updateOrInsert:Eo});var mo="\t\n\v\f\r \u2028\u2029\ufeff",wo="["+mo+"]",go=RegExp("^"+wo+wo+"*"),To=RegExp(wo+wo+"*$"),Oo={trim:(3,function(e){var t=String(c(e));return t=(t=t.replace(go,"")).replace(To,"")})},Io=we.f,Ro=re.f,bo=y.f,Co=Oo.trim,Ao=v.Number,Po=Ao.prototype,No="Number"==X(st(Po)),Mo=function(e){var t,r,n,o,i,s,a,c,u=f(e,!1);if("string"==typeof u&&2<u.length)if(43===(t=(u=Co(u)).charCodeAt(0))||45===t){if(88===(r=u.charCodeAt(2))||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+u}for(s=(i=u.slice(2)).length,a=0;a<s;a++)if((c=i.charCodeAt(a))<48||o<c)return NaN;return parseInt(i,n)}return+u};if(je("Number",!Ao(" 0o1")||!Ao("0b1")||Ao("+0x1"))){for(var Lo,Do=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof Do&&(No?_(function(){Po.valueOf.call(r)}):"Number"!=X(r))?Qn(new Ao(Mo(t)),r,Do):Mo(t)},jo=u?Io(Ao):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Uo=0;jo.length>Uo;Uo++)P(Ao,Lo=jo[Uo])&&!P(Do,Lo)&&bo(Do,Lo,Ro(Ao,Lo));(Do.prototype=Po).constructor=Do,oe(v,"Number",Do)}xe({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)});var xo=v.isFinite,Bo=Number.isFinite||function(e){return"number"==typeof e&&xo(e)};xe({target:"Number",stat:!0},{isFinite:Bo});var ko=Math.floor,qo=function(e){return!S(e)&&isFinite(e)&&ko(e)===e};xe({target:"Number",stat:!0},{isInteger:qo}),xe({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var Vo=Math.abs;xe({target:"Number",stat:!0},{isSafeInteger:function(e){return qo(e)&&Vo(e)<=9007199254740991}}),xe({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),xe({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});var Fo=Oo.trim,Go=v.parseFloat,Ho=1/Go(mo+"-0")!=-1/0?function(e){var t=Fo(String(e)),r=Go(t);return 0===r&&"-"==t.charAt(0)?-0:r}:Go;xe({target:"Number",stat:!0,forced:Number.parseFloat!=Ho},{parseFloat:Ho});var Wo=Oo.trim,Yo=v.parseInt,zo=/^[+-]?0[Xx]/,$o=8!==Yo(mo+"08")||22!==Yo(mo+"0x16")?function(e,t){var r=Wo(String(e));return Yo(r,t>>>0||(zo.test(r)?16:10))}:Yo;xe({target:"Number",stat:!0,forced:Number.parseInt!=$o},{parseInt:$o});var Qo=function(e){if("number"!=typeof e&&"Number"!=X(e))throw TypeError("Incorrect invocation");return+e},Ko="".repeat||function(e){var t=String(c(this)),r="",n=h(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;0<n;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r},Jo=1..toFixed,Xo=Math.floor,Zo=function(e,t,r){return 0===t?r:t%2==1?Zo(e,t-1,r*e):Zo(e*e,t/2,r)},ei=Jo&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!_(function(){Jo.call({})});xe({target:"Number",proto:!0,forced:ei},{toFixed:function(e){var t,r,n,o,i=Qo(this),s=h(e),a=[0,0,0,0,0,0],c="",u="0",p=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*a[r],a[r]=n%1e7,n=Xo(n/1e7)},l=function(e){for(var t=6,r=0;0<=--t;)r+=a[t],a[t]=Xo(r/e),r=r%e*1e7},f=function(){for(var e=6,t="";0<=--e;)if(""!==t||0===e||0!==a[e]){var r=String(a[e]);t=""===t?r:t+Ko.call("0",7-r.length)+r}return t};if(s<0||20<s)throw RangeError("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||1e21<=i)return String(i);if(i<0&&(c="-",i=-i),1e-21<i)if(r=(t=function(e){for(var t=0,r=i*Zo(2,69,1);4096<=r;)t+=12,r/=4096;for(;2<=r;)t+=1,r/=2;return t}()-69)<0?i*Zo(2,-t,1):i/Zo(2,t,1),r*=4503599627370496,0<(t=52-t)){for(p(0,r),n=s;7<=n;)p(1e7,0),n-=7;for(p(Zo(10,n,1),0),n=t-1;23<=n;)l(1<<23),n-=23;l(1<<n),p(1,1),l(2),u=f()}else p(0,r),p(1<<-t,0),u=f()+Ko.call("0",s);return 0<s?c+((o=u.length)<=s?"0."+Ko.call("0",s-o)+u:u.slice(0,o-s)+"."+u.slice(o-s)):c+u}});var ti=1..toPrecision,ri=_(function(){return"1"!==ti.call(1,void 0)})||!_(function(){ti.call({})});xe({target:"Number",proto:!0,forced:ri},{toPrecision:function(e){return void 0===e?ti.call(Qo(this)):ti.call(Qo(this),e)}}),ce.Number;var ni=/^[\da-z]+$/;xe({target:"Number",stat:!0},{fromString:function(e,t){var r,n,o=1;if("string"!=typeof e)throw TypeError("Invalid number representation");if(!e.length)throw SyntaxError("Invalid number representation");if("-"==e.charAt(0)&&(o=-1,!(e=e.slice(1)).length))throw SyntaxError("Invalid number representation");if((r=void 0===t?10:h(t))<2||36<r)throw RangeError("Invalid radix");if(!ni.test(e)||(n=$o(e,r)).toString(r)!==e)throw SyntaxError("Invalid number representation");return o*n}});var oi=z.f,ii=(!1,function(e){for(var t,r=te(e),n=Ze(r),o=n.length,i=0,s=[];i<o;)t=n[i++],u&&!oi.call(r,t)||s.push(r[t]);return s});xe({target:"Object",stat:!0},{values:function(e){return ii(e)}}),ce.Object.values;var si,ai,ci,ui=v.Promise,pi=/(iphone|ipod|ipad).*applewebkit/i.test($t),li=v.location,fi=v.setImmediate,hi=v.clearImmediate,di=v.process,yi=v.MessageChannel,vi=v.Dispatch,_i=0,Si={},Ei=function(e){if(Si.hasOwnProperty(e)){var t=Si[e];delete Si[e],t()}},mi=function(e){return function(){Ei(e)}},wi=function(e){Ei(e.data)},gi=function(e){v.postMessage(e+"",li.protocol+"//"+li.host)};fi&&hi||(fi=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return Si[++_i]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},si(_i),_i},hi=function(e){delete Si[e]},"process"==X(di)?si=function(e){di.nextTick(mi(e))}:vi&&vi.now?si=function(e){vi.now(mi(e))}:yi&&!pi?(ci=(ai=new yi).port2,ai.port1.onmessage=wi,si=Tt(ci.postMessage,ci,1)):!v.addEventListener||"function"!=typeof postMessage||v.importScripts||_(gi)||"file:"===li.protocol?si="onreadystatechange"in p("script")?function(e){tt.appendChild(p("script")).onreadystatechange=function(){tt.removeChild(this),Ei(e)}}:function(e){setTimeout(mi(e),0)}:(si=gi,v.addEventListener("message",wi,!1)));var Ti,Oi,Ii,Ri,bi,Ci,Ai,Pi,Ni={set:fi},Mi=re.f,Li=Ni.set,Di=v.MutationObserver||v.WebKitMutationObserver,ji=v.process,Ui=v.Promise,xi="process"==X(ji),Bi=Mi(v,"queueMicrotask"),ki=Bi&&Bi.value;ki||(Ti=function(){var e,t;for(xi&&(e=ji.domain)&&e.exit();Oi;){t=Oi.fn,Oi=Oi.next;try{t()}catch(e){throw Oi?Ri():Ii=void 0,e}}Ii=void 0,e&&e.enter()},Ri=xi?function(){ji.nextTick(Ti)}:Di&&!pi?(bi=!0,Ci=document.createTextNode(""),new Di(Ti).observe(Ci,{characterData:!0}),function(){Ci.data=bi=!bi}):Ui&&Ui.resolve?(Ai=Ui.resolve(void 0),Pi=Ai.then,function(){Pi.call(Ai,Ti)}):function(){Li.call(v,Ti)});var qi=ki||function(e){var t={fn:e,next:void 0};Ii&&(Ii.next=t),Oi||(Oi=t,Ri()),Ii=t},Vi={},Fi=function(e){var r,n;this.promise=new e(function(e,t){if(void 0!==r||void 0!==n)throw TypeError("Bad Promise constructor");r=e,n=t}),this.resolve=gt(r),this.reject=gt(n)};Vi.f=function(e){return new Fi(e)};var Gi,Hi,Wi,Yi,zi=function(e,t){if(d(e),S(t)&&t.constructor===e)return t;var r=Vi.f(e);return(0,r.resolve)(t),r.promise},$i=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Qi=Ni.set,Ki=$e("species"),Ji="Promise",Xi=Y.get,Zi=Y.set,es=Y.getterFor(Ji),ts=ui,rs=v.TypeError,ns=v.document,os=v.process,is=pe("fetch"),ss=Vi.f,as=ss,cs="process"==X(os),us=!!(ns&&ns.createEvent&&v.dispatchEvent),ps=je(Ji,function(){if(R(ts)===String(ts)){if(66===Xt)return!0;if(!cs&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=Xt&&/native code/.test(ts))return!1;var e=ts.resolve(1),t=function(e){e(function(){},function(){})};return(e.constructor={})[Ki]=t,!(e.then(function(){})instanceof t)}),ls=ps||!qt(function(e){ts.all(e).catch(function(){})}),fs=function(e){var t;return!(!S(e)||"function"!=typeof(t=e.then))&&t},hs=function(l,f,h){if(!f.notified){f.notified=!0;var d=f.reactions;qi(function(){for(var e=f.value,t=1==f.state,r=0;d.length>r;){var n,o,i,s=d[r++],a=t?s.ok:s.fail,c=s.resolve,u=s.reject,p=s.domain;try{a?(t||(2===f.rejection&&_s(l,f),f.rejection=1),!0===a?n=e:(p&&p.enter(),n=a(e),p&&(p.exit(),i=!0)),n===s.promise?u(rs("Promise-chain cycle")):(o=fs(n))?o.call(n,c,u):c(n)):u(e)}catch(e){p&&!i&&p.exit(),u(e)}}f.reactions=[],f.notified=!1,h&&!f.rejection&&ys(l,f)})}},ds=function(e,t,r){var n,o;us?((n=ns.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),v.dispatchEvent(n)):n={promise:t,reason:r},(o=v["on"+e])?o(n):"unhandledrejection"===e&&function(e,t){var r=v.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}("Unhandled promise rejection",r)},ys=function(r,n){Qi.call(v,function(){var e,t=n.value;if(vs(n)&&(e=$i(function(){cs?os.emit("unhandledRejection",t,r):ds("unhandledrejection",r,t)}),n.rejection=cs||vs(n)?2:1,e.error))throw e.value})},vs=function(e){return 1!==e.rejection&&!e.parent},_s=function(e,t){Qi.call(v,function(){cs?os.emit("rejectionHandled",e):ds("rejectionhandled",e,t.value)})},Ss=function(t,r,n,o){return function(e){t(r,n,e,o)}},Es=function(e,t,r,n){t.done||(t.done=!0,n&&(t=n),t.value=r,t.state=2,hs(e,t,!0))},ms=function(r,n,e,t){if(!n.done){n.done=!0,t&&(n=t);try{if(r===e)throw rs("Promise can't be resolved itself");var o=fs(e);o?qi(function(){var t={done:!1};try{o.call(e,Ss(ms,r,t,n),Ss(Es,r,t,n))}catch(e){Es(r,t,e,n)}}):(n.value=e,n.state=1,hs(r,n,!1))}catch(e){Es(r,{done:!1},e,n)}}};ps&&(ts=function(e){$n(this,ts,Ji),gt(e),Gi.call(this);var t=Xi(this);try{e(Ss(ms,this,t),Ss(Es,this,t))}catch(e){Es(this,t,e)}},(Gi=function(e){Zi(this,{type:Ji,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Jn(ts.prototype,{then:function(e,t){var r=es(this),n=ss(So(this,ts));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=cs?os.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&hs(this,r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Hi=function(){var e=new Gi,t=Xi(e);this.promise=e,this.resolve=Ss(ms,e,t),this.reject=Ss(Es,e,t)},Vi.f=ss=function(e){return e===ts||e===Wi?new Hi(e):as(e)},"function"==typeof ui&&(Yi=ui.prototype.then,oe(ui.prototype,"then",function(e,t){var r=this;return new ts(function(e,t){Yi.call(r,e,t)}).then(e,t)},{unsafe:!0}),"function"==typeof is&&xe({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return zi(ts,is.apply(v,arguments))}}))),xe({global:!0,wrap:!0,forced:ps},{Promise:ts}),ut(ts,Ji,!1),An(Ji),Wi=pe(Ji),xe({target:Ji,stat:!0,forced:ps},{reject:function(e){var t=ss(this);return t.reject.call(void 0,e),t.promise}}),xe({target:Ji,stat:!0,forced:ps},{resolve:function(e){return zi(this,e)}}),xe({target:Ji,stat:!0,forced:ls},{all:function(e){var a=this,t=ss(a),c=t.resolve,u=t.reject,r=$i(function(){var n=gt(a.resolve),o=[],i=0,s=1;Yn(e,function(e){var t=i++,r=!1;o.push(void 0),s++,n.call(a,e).then(function(e){r||(r=!0,o[t]=e,--s||c(o))},u)}),--s||c(o)});return r.error&&u(r.value),t.promise},race:function(e){var r=this,n=ss(r),o=n.reject,t=$i(function(){var t=gt(r.resolve);Yn(e,function(e){t.call(r,e).then(n.resolve,o)})});return t.error&&o(t.value),n.promise}}),xe({target:"Promise",stat:!0},{allSettled:function(e){var a=this,t=Vi.f(a),c=t.resolve,r=t.reject,n=$i(function(){var n=gt(a.resolve),o=[],i=0,s=1;Yn(e,function(e){var t=i++,r=!1;o.push(void 0),s++,n.call(a,e).then(function(e){r||(r=!0,o[t]={status:"fulfilled",value:e},--s||c(o))},function(e){r||(r=!0,o[t]={status:"rejected",reason:e},--s||c(o))})}),--s||c(o)});return n.error&&r(n.value),t.promise}});var ws=!!ui&&_(function(){ui.prototype.finally.call({then:function(){}},function(){})});xe({target:"Promise",proto:!0,real:!0,forced:ws},{finally:function(t){var r=So(this,pe("Promise")),e="function"==typeof t;return this.then(e?function(e){return zi(r,t()).then(function(){return e})}:t,e?function(e){return zi(r,t()).then(function(){throw e})}:t)}}),"function"!=typeof ui||ui.prototype.finally||oe(ui.prototype,"finally",pe("Promise").prototype.finally),ce.Promise;var gs=Y.set,Ts=Y.getterFor("AggregateError"),Os=function(e,t){var r=this;if(!(r instanceof Os))return new Os(e,t);ht&&(r=ht(new Error(t),Fe(r)));var n=[];return Yn(e,n.push,n),u?gs(r,{errors:n,type:"AggregateError"}):r.errors=n,void 0!==t&&w(r,"message",String(t)),r};Os.prototype=st(Error.prototype,{constructor:m(5,Os),message:m(5,""),name:m(5,"AggregateError")}),u&&y.f(Os.prototype,"errors",{get:function(){return Ts(this).errors},configurable:!0}),xe({global:!0},{AggregateError:Os}),xe({target:"Promise",stat:!0},{try:function(e){var t=Vi.f(this),r=$i(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}}),xe({target:"Promise",stat:!0},{any:function(e){var c=this,t=Vi.f(c),u=t.resolve,p=t.reject,r=$i(function(){var n=gt(c.resolve),o=[],i=0,s=1,a=!1;Yn(e,function(e){var t=i++,r=!1;o.push(void 0),s++,n.call(c,e).then(function(e){r||a||(a=!0,u(e))},function(e){r||a||(r=!0,o[t]=e,--s||p(new(pe("AggregateError"))(o,"No one promise resolved")))})}),--s||p(new(pe("AggregateError"))(o,"No one promise resolved"))});return r.error&&p(r.value),t.promise}}),Kn("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},ro),ce.Set,xe({target:"Set",stat:!0},{from:fo}),xe({target:"Set",stat:!0},{of:ho}),xe({target:"Set",proto:!0,real:!0,forced:!1},{addAll:function(){return function(){for(var e=d(this),t=gt(e.add),r=0,n=arguments.length;r<n;r++)t.call(e,arguments[r]);return e}.apply(this,arguments)}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{deleteAll:function(){return yo.apply(this,arguments)}});var Is=function(e){return Set.prototype.values.call(e)};xe({target:"Set",proto:!0,real:!0,forced:!1},{every:function(e){var t=d(this),r=Is(t),n=Tt(e,1<arguments.length?arguments[1]:void 0,3);return!Yn(r,function(e){if(!n(e,e,t))return Yn.stop()},void 0,!1,!0).stopped}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{difference:function(e){var t=d(this),r=new(So(t,pe("Set")))(t),n=gt(r.delete);return Yn(e,function(e){n.call(r,e)}),r}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{filter:function(e){var t=d(this),r=Is(t),n=Tt(e,1<arguments.length?arguments[1]:void 0,3),o=new(So(t,pe("Set"))),i=gt(o.add);return Yn(r,function(e){n(e,e,t)&&i.call(o,e)},void 0,!1,!0),o}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{find:function(e){var t=d(this),r=Is(t),n=Tt(e,1<arguments.length?arguments[1]:void 0,3);return Yn(r,function(e){if(n(e,e,t))return Yn.stop(e)},void 0,!1,!0).result}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{intersection:function(e){var t=d(this),r=new(So(t,pe("Set"))),n=gt(t.has),o=gt(r.add);return Yn(e,function(e){n.call(t,e)&&o.call(r,e)}),r}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{isDisjointFrom:function(e){var t=d(this),r=gt(t.has);return!Yn(e,function(e){if(!0===r.call(t,e))return Yn.stop()}).stopped}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{isSubsetOf:function(e){var t=function(e){var t=jt(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return d(t.call(e))}(this),r=d(e),n=r.has;return"function"!=typeof n&&(r=new(pe("Set"))(e),n=gt(r.has)),!Yn(t,function(e){if(!1===n.call(r,e))return Yn.stop()},void 0,!1,!0).stopped}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{isSupersetOf:function(e){var t=d(this),r=gt(t.has);return!Yn(e,function(e){if(!1===r.call(t,e))return Yn.stop()}).stopped}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{join:function(e){var t=d(this),r=Is(t),n=void 0===e?",":String(e),o=[];return Yn(r,o.push,o,!1,!0),o.join(n)}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{map:function(e){var t=d(this),r=Is(t),n=Tt(e,1<arguments.length?arguments[1]:void 0,3),o=new(So(t,pe("Set"))),i=gt(o.add);return Yn(r,function(e){i.call(o,n(e,e,t))},void 0,!1,!0),o}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{reduce:function(t){var r=d(this),e=Is(r),n=arguments.length<2,o=n?void 0:arguments[1];if(gt(t),Yn(e,function(e){o=n?(n=!1,e):t(o,e,e,r)},void 0,!1,!0),n)throw TypeError("Reduce of empty set with no initial value");return o}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{some:function(e){var t=d(this),r=Is(t),n=Tt(e,1<arguments.length?arguments[1]:void 0,3);return Yn(r,function(e){if(n(e,e,t))return Yn.stop()},void 0,!1,!0).stopped}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{symmetricDifference:function(e){var t=d(this),r=new(So(t,pe("Set")))(t),n=gt(r.delete),o=gt(r.add);return Yn(e,function(e){n.call(r,e)||o.call(r,e)}),r}}),xe({target:"Set",proto:!0,real:!0,forced:!1},{union:function(e){var t=d(this),r=new(So(t,pe("Set")))(t);return Yn(e,gt(r.add),r),r}});var Rs={};Object.defineProperty(Rs,"__esModule",{value:!0});var bs=function(){function e(e,t){this.currentTimeout=null,this.pingTimeout=e,this.connection=t,this.currentTimeout=setTimeout(t.closeIdleConnection.bind(t),e)}return e.prototype.onSystemPing=function(){var e=this;null!==this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout(function(){e.connection.closeIdleConnection()},this.pingTimeout))},e.prototype.shutdown=function(){null!==this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null)},e}();Rs.ConnectionActivityMonitorImpl=bs;var Cs={};Object.defineProperty(Cs,"__esModule",{value:!0});var As={onSystemPing:function(){},shutdown:function(){}};Cs.connectionActivityMonitorFactory=function(e,t){if(!t.systemPingPeriod)return As;var r=t.systemPingPeriod.toNumber();if(0<r){var n=2*r;return new Rs.ConnectionActivityMonitorImpl(n,e)}return As};var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});var Ns=function(){function e(e){this.factory=e}return e.prototype.onNewConnection=function(e,t){this.currentConnectionMonitor=this.factory(e,t)},e.prototype.onConnectionClosed=function(){void 0!==this.currentConnectionMonitor&&(this.currentConnectionMonitor.shutdown(),this.currentConnectionMonitor=void 0)},e.prototype.onSystemPing=function(){void 0!==this.currentConnectionMonitor&&this.currentConnectionMonitor.onSystemPing()},e}();Ps.NOOP={onNewConnection:function(){},onConnectionClosed:function(){},onSystemPing:function(){}},Ps.create=function(e){return new Ns(e)};var Ms,Ls={};Object.defineProperty(Ls,"__esModule",{value:!0}),(Ms=Ls.InternalSessionState||(Ls.InternalSessionState={})).INITIALISING="initialising",Ms.CONNECTING="connecting",Ms.CONNECTED="connected",Ms.DISCONNECTED="disconnected",Ms.RECONNECTING="reconnecting",Ms.CLOSING="closing",Ms.CLOSED="closed";var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});var js=function(){function e(e,t){this.id=e,this.reason=t}return e.prototype.toString=function(){return this.id+": "+this.reason},e}();Ds.ErrorReason=js;var Us=Bs,xs=null;try{xs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Bs(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function ks(e){return!0===(e&&e.__isLong__)}Object.defineProperty(Bs.prototype,"__isLong__",{value:!0}),Bs.isLong=ks;var qs={},Vs={};function Fs(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=Vs[e])?n:(r=Hs(e,(0|e)<0?-1:0,!0),o&&(Vs[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=qs[e])?n:(r=Hs(e,e<0?-1:0,!1),o&&(qs[e]=r),r)}function Gs(e,t){if(isNaN(e))return t?Zs:Xs;if(t){if(e<0)return Zs;if(Qs<=e)return oa}else{if(e<=-Ks)return ia;if(Ks<=e+1)return na}return e<0?Gs(-e,t).neg():Hs(e%$s|0,e/$s|0,t)}function Hs(e,t,r){return new Bs(e,t,r)}Bs.fromInt=Fs,Bs.fromNumber=Gs,Bs.fromBits=Hs;var Ws=Math.pow;function Ys(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return Xs;if(t="number"==typeof t?(r=t,!1):!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if(0<(n=e.indexOf("-")))throw Error("interior hyphen");if(0===n)return Ys(e.substring(1),t,r).neg();for(var o=Gs(Ws(r,8)),i=Xs,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),r);if(a<8){var u=Gs(Ws(r,a));i=i.mul(u).add(Gs(c))}else i=(i=i.mul(o)).add(Gs(c))}return i.unsigned=t,i}function zs(e,t){return"number"==typeof e?Gs(e,t):"string"==typeof e?Ys(e,t):Hs(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}Bs.fromString=Ys,Bs.fromValue=zs;var $s=4294967296,Qs=$s*$s,Ks=Qs/2,Js=Fs(1<<24),Xs=Fs(0);Bs.ZERO=Xs;var Zs=Fs(0,!0);Bs.UZERO=Zs;var ea=Fs(1);Bs.ONE=ea;var ta=Fs(1,!0);Bs.UONE=ta;var ra=Fs(-1);Bs.NEG_ONE=ra;var na=Hs(-1,2147483647,!1);Bs.MAX_VALUE=na;var oa=Hs(-1,-1,!0);Bs.MAX_UNSIGNED_VALUE=oa;var ia=Hs(0,-2147483648,!1);Bs.MIN_VALUE=ia;var sa=Bs.prototype;sa.toInt=function(){return this.unsigned?this.low>>>0:this.low},sa.toNumber=function(){return this.unsigned?(this.high>>>0)*$s+(this.low>>>0):this.high*$s+(this.low>>>0)},sa.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(ia)){var t=Gs(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=Gs(Ws(e,6),this.unsigned),i=this,s="";;){var a=i.div(o),c=(i.sub(a.mul(o)).toInt()>>>0).toString(e);if((i=a).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},sa.getHighBits=function(){return this.high},sa.getHighBitsUnsigned=function(){return this.high>>>0},sa.getLowBits=function(){return this.low},sa.getLowBitsUnsigned=function(){return this.low>>>0},sa.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ia)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},sa.isZero=function(){return 0===this.high&&0===this.low},sa.eqz=sa.isZero,sa.isNegative=function(){return!this.unsigned&&this.high<0},sa.isPositive=function(){return this.unsigned||0<=this.high},sa.isOdd=function(){return 1==(1&this.low)},sa.isEven=function(){return 0==(1&this.low)},sa.equals=function(e){return ks(e)||(e=zs(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},sa.eq=sa.equals,sa.notEquals=function(e){return!this.eq(e)},sa.neq=sa.notEquals,sa.ne=sa.notEquals,sa.lessThan=function(e){return this.comp(e)<0},sa.lt=sa.lessThan,sa.lessThanOrEqual=function(e){return this.comp(e)<=0},sa.lte=sa.lessThanOrEqual,sa.le=sa.lessThanOrEqual,sa.greaterThan=function(e){return 0<this.comp(e)},sa.gt=sa.greaterThan,sa.greaterThanOrEqual=function(e){return 0<=this.comp(e)},sa.gte=sa.greaterThanOrEqual,sa.ge=sa.greaterThanOrEqual,sa.compare=function(e){if(ks(e)||(e=zs(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},sa.comp=sa.compare,sa.negate=function(){return!this.unsigned&&this.eq(ia)?ia:this.not().add(ea)},sa.neg=sa.negate,sa.add=function(e){ks(e)||(e=zs(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,a=e.low>>>16,c=0,u=0,p=0,l=0;return p+=(l+=o+(65535&e.low))>>>16,u+=(p+=n+a)>>>16,c+=(u+=r+s)>>>16,c+=t+i,Hs((p&=65535)<<16|(l&=65535),(c&=65535)<<16|(u&=65535),this.unsigned)},sa.subtract=function(e){return ks(e)||(e=zs(e)),this.add(e.neg())},sa.sub=sa.subtract,sa.multiply=function(e){if(this.isZero())return Xs;if(ks(e)||(e=zs(e)),xs)return Hs(xs.mul(this.low,this.high,e.low,e.high),xs.get_high(),this.unsigned);if(e.isZero())return Xs;if(this.eq(ia))return e.isOdd()?ia:Xs;if(e.eq(ia))return this.isOdd()?ia:Xs;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Js)&&e.lt(Js))return Gs(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,a=e.low>>>16,c=65535&e.low,u=0,p=0,l=0,f=0;return l+=(f+=o*c)>>>16,p+=(l+=n*c)>>>16,l&=65535,p+=(l+=o*a)>>>16,u+=(p+=r*c)>>>16,p&=65535,u+=(p+=n*a)>>>16,p&=65535,u+=(p+=o*s)>>>16,u+=t*c+r*a+n*s+o*i,Hs((l&=65535)<<16|(f&=65535),(u&=65535)<<16|(p&=65535),this.unsigned)},sa.mul=sa.multiply,sa.divide=function(e){if(ks(e)||(e=zs(e)),e.isZero())throw Error("division by zero");var t,r,n;if(xs)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?Hs((this.unsigned?xs.div_u:xs.div_s)(this.low,this.high,e.low,e.high),xs.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Zs:Xs;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Zs;if(e.gt(this.shru(1)))return ta;n=Zs}else{if(this.eq(ia))return e.eq(ea)||e.eq(ra)?ia:e.eq(ia)?ea:(t=this.shr(1).div(e).shl(1)).eq(Xs)?e.isNegative()?ea:ra:(r=this.sub(e.mul(t)),n=t.add(r.div(e)));if(e.eq(ia))return this.unsigned?Zs:Xs;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=Xs}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),i=o<=48?1:Ws(2,o-48),s=Gs(t),a=s.mul(e);a.isNegative()||a.gt(r);)a=(s=Gs(t-=i,this.unsigned)).mul(e);s.isZero()&&(s=ea),n=n.add(s),r=r.sub(a)}return n},sa.div=sa.divide,sa.modulo=function(e){return ks(e)||(e=zs(e)),xs?Hs((this.unsigned?xs.rem_u:xs.rem_s)(this.low,this.high,e.low,e.high),xs.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},sa.mod=sa.modulo,sa.rem=sa.modulo,sa.not=function(){return Hs(~this.low,~this.high,this.unsigned)},sa.and=function(e){return ks(e)||(e=zs(e)),Hs(this.low&e.low,this.high&e.high,this.unsigned)},sa.or=function(e){return ks(e)||(e=zs(e)),Hs(this.low|e.low,this.high|e.high,this.unsigned)},sa.xor=function(e){return ks(e)||(e=zs(e)),Hs(this.low^e.low,this.high^e.high,this.unsigned)},sa.shiftLeft=function(e){return ks(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?Hs(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Hs(0,this.low<<e-32,this.unsigned)},sa.shl=sa.shiftLeft,sa.shiftRight=function(e){return ks(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?Hs(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Hs(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},sa.shr=sa.shiftRight,sa.shiftRightUnsigned=function(e){if(ks(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?Hs(this.low>>>e|t<<32-e,t>>>e,this.unsigned):Hs(32===e?t:t>>>e-32,0,this.unsigned)},sa.shru=sa.shiftRightUnsigned,sa.shr_u=sa.shiftRightUnsigned,sa.toSigned=function(){return this.unsigned?Hs(this.low,this.high,!1):this},sa.toUnsigned=function(){return this.unsigned?this:Hs(this.low,this.high,!0)},sa.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},sa.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},sa.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Bs.fromBytes=function(e,t,r){return r?Bs.fromBytesLE(e,t):Bs.fromBytesBE(e,t)},Bs.fromBytesLE=function(e,t){return new Bs(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Bs.fromBytesBE=function(e,t){return new Bs(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var aa={};Object.defineProperty(aa,"__esModule",{value:!0});var ca=function(){function t(e){this.val=e}return t.fromString=function(e){return new t(Us.fromString(e,!1))},t.prototype.toString=function(){return this.val.toString(10)},t.prototype.equals=function(e){return e.val&&this.val.equals(e.val)},t}();aa.ConversationId=ca,aa.ONEWAY_CID=new ca(Us.fromNumber(0));for(var ua={toByteArray:function(e){var t,r,n=function(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}(e),o=n[0],i=n[1],s=new fa(3*(o+i)/4-i),a=0,c=0<i?o-4:o;for(r=0;r<c;r+=4)t=la[e.charCodeAt(r)]<<18|la[e.charCodeAt(r+1)]<<12|la[e.charCodeAt(r+2)]<<6|la[e.charCodeAt(r+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===i&&(t=la[e.charCodeAt(r)]<<2|la[e.charCodeAt(r+1)]>>4,s[a++]=255&t),1===i&&(t=la[e.charCodeAt(r)]<<10|la[e.charCodeAt(r+1)]<<4|la[e.charCodeAt(r+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},fromByteArray:function(e){for(var t,r=e.length,n=r%3,o=[],i=0,s=r-n;i<s;i+=16383)o.push(va(e,i,s<i+16383?s:i+16383));return 1===n?(t=e[r-1],o.push(pa[t>>2]+pa[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(pa[t>>10]+pa[t>>4&63]+pa[t<<2&63]+"=")),o.join("")}},pa=[],la=[],fa="undefined"!=typeof Uint8Array?Uint8Array:Array,ha="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",da=0,ya=ha.length;da<ya;++da)pa[da]=ha[da],la[ha.charCodeAt(da)]=da;function va(e,t,r){for(var n,o,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(pa[(o=n)>>18&63]+pa[o>>12&63]+pa[o>>6&63]+pa[63&o]);return i.join("")}la["-".charCodeAt(0)]=62,la["_".charCodeAt(0)]=63;var _a={read:function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,p=-7,l=r?o-1:0,f=r?-1:1,h=e[t+l];for(l+=f,i=h&(1<<-p)-1,h>>=-p,p+=a;0<p;i=256*i+e[t+l],l+=f,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=n;0<p;s=256*s+e[t+l],l+=f,p-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),i-=u}return(h?-1:1)*s*Math.pow(2,i-n)},write:function(e,t,r,n,o,i){var s,a,c,u=8*i-o-1,p=(1<<u)-1,l=p>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),2<=(t+=1<=s+l?f/c:f*Math.pow(2,1-l))*c&&(s++,c/=2),p<=s+l?(a=0,s=p):1<=s+l?(a=(t*c-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));8<=o;e[r+h]=255&a,h+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;e[r+h]=255&s,h+=d,s/=256,u-=8);e[r+h-d]|=128*y}},Sa={};(function(r){"use strict";var u=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Sa,"__esModule",{value:!0});var i=Us.fromNumber(128),s=Us.fromNumber(127),n=s.not();function a(e){var t=e.read();if(-1===t)throw new Error("End of stream");return t}function c(e){for(var t=0,r=0;t<32;){var n=a(e);if(r|=(127&n)<<t,0==(128&n))return r;t+=7}throw new Error("Malformed int32")}function p(e,t){for(;0!=(-128&t);)e.write(127&t|128),t>>>=7;e.write(t)}function o(e){var t=c(e);return e.readMany(t)}function l(e,t){p(e,t.length),e.writeMany(t)}function f(e){var t=o(e);return t?t.toString("utf8"):""}function h(e,t){l(e,r.from(t,"utf8"))}function d(e,t,r,n){var o,i;p(e,Object.keys(t).length);try{for(var s=u(Object.getOwnPropertyNames(t)),a=s.next();!a.done;a=s.next()){var c=a.value;r(e,c),n(e,t[c])}}catch(e){o={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}function y(e,t,r){for(var n=c(e),o={},i=0;i<n;++i)o[t(e)]=r(e);return o}Sa.readByte=a,Sa.readInt64=function(e){for(var t=Us.fromNumber(0),r=0;r<64;){var n=a(e),o=Us.fromNumber(n);if(t=t.or(o.and(s).shiftLeft(r)),o.and(i).equals(0))return t;r+=7}throw new Error("Malformed int64")},Sa.writeInt64=function(e,t){for(var r=t instanceof Us?t:Us.fromNumber(t,!1);!r.and(n).equals(0);)e.write(r.and(s).or(i).toInt()),r=r.shiftRightUnsigned(7);e.write(r.toInt())},Sa.readInt32=c,Sa.writeInt32=p,Sa.writeByte=function(e,t){e.write(t)},Sa.readBytes=o,Sa.writeBytes=l,Sa.readString=f,Sa.writeString=h,Sa.writeCollection=function(e,t,r){var n,o;p(e,t.length);try{for(var i=u(t),s=i.next();!s.done;s=i.next())r(e,s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},Sa.readCollection=function(e,t){for(var r=c(e),n=[],o=0;o<r;++o)n.push(t(e));return n},Sa.readDictionary=function(e,t){return y(e,f,t)},Sa.writeDictionary=function(e,t,r){d(e,t,h,r)},Sa.writeObject=d,Sa.readObject=y,Sa.readMap=function(e,t,r){for(var n=c(e),o=new Map,i=0;i<n;++i){var s=t(e);o.set(s,r(e))}return o},Sa.writeMap=function(r,e,n,o){p(r,e.size),e.forEach(function(e,t){n(r,t),o(r,e)})},Sa.readBoolean=function(e){return 0!==e.readInt8()},Sa.writeBoolean=function(e,t){e.writeInt8(t?1:0)}}).call(this,t({}).Buffer);var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});var ma=function(){function e(){}return e.prototype.read=function(e){return new aa.ConversationId(Sa.readInt64(e))},e.prototype.write=function(e,t){Sa.writeInt64(e,t.val)},e}();Ea.CIDSerialiser=new ma;var wa={};Object.defineProperty(wa,"__esModule",{value:!0});var ga=function(){function e(){}return e.prototype.read=function(e){throw new Error("AbstractSerialiser#read is not implemented")},e.prototype.write=function(e,t){throw new Error("AbstractSerialiser#write is not implemented")},e}();wa.AbstractSerialiser=ga;var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});var Oa=function(){function r(e,t){this.service=e,this.cid=t}return r.createRequestHeader=function(e,t){return new r(e,t)},r.prototype.createResponseHeader=function(){return new r(this.service,this.cid)},r.prototype.createErrorHeader=function(){return new r(this.service,this.cid)},r.prototype.toString=function(){return"<"+this.service+", "+this.cid.toString()+">"},r}();Ta.CommandHeader=Oa;var Ia,Ra={},ba=this&&this.__extends||(Ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Ia(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Ra,"__esModule",{value:!0});var Ca=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ba(t,e),t.prototype.read=function(e){var t=Sa.readInt32(e),r=Ea.CIDSerialiser.read(e);return new Ta.CommandHeader(t,r)},t.prototype.write=function(e,t){Sa.writeInt32(e,t.service),Ea.CIDSerialiser.write(e,t.cid)},t}(wa.AbstractSerialiser),Aa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ba(t,e),t.prototype.write=function(e,t){Ea.CIDSerialiser.write(e,t.cid)},t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e);return new Ta.CommandHeader(0,t)},t}(wa.AbstractSerialiser);Ra.CommandHeaderSerialiser=new Ca,Ra.ResponseCommandHeaderSerialiser=new Aa;var Pa={exports:{}};!function(e,t){"use strict";Pa.exports?Pa.exports=t():e.log=t()}(this,function(){"use strict";var o=function(){},c="undefined",u=["trace","debug","info","warn","error"];function i(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function p(e,t){for(var r=0;r<u.length;r++){var n=u[r];this[n]=r<e?o:this.methodFactory(n,e,t)}this.log=this.debug}function l(e,t,r){return"debug"===(n=e)&&(n="log"),typeof console!==c&&(void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):o)||function(e,t,r){return function(){typeof console!==c&&(p.call(this,t,r),this[e].apply(this,arguments))}}.apply(this,arguments);var n}function r(t,e,r){var n,o=this,i="loglevel";function s(){var e;if(typeof window!==c){try{e=window.localStorage[i]}catch(e){}if(typeof e===c)try{var t=window.document.cookie,r=t.indexOf(encodeURIComponent(i)+"=");-1!==r&&(e=/^([^;]+)/.exec(t.slice(r))[1])}catch(e){}return void 0===o.levels[e]&&(e=void 0),e}}t&&(i+=":"+t),o.name=t,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=r||l,o.getLevel=function(){return n},o.setLevel=function(r,e){if("string"==typeof r&&void 0!==o.levels[r.toUpperCase()]&&(r=o.levels[r.toUpperCase()]),!("number"==typeof r&&0<=r&&r<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(n=r,!1!==e&&function(e){var t=(u[r]||"silent").toUpperCase();if(typeof window!==c){try{return window.localStorage[i]=t}catch(e){}try{window.document.cookie=encodeURIComponent(i)+"="+t+";"}catch(e){}}}(),p.call(o,r,t),typeof console===c&&r<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){s()||o.setLevel(e,!1)},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var a=s();null==a&&(a=null==e?"WARN":e),o.setLevel(a,!1)}var n=new r,s={};n.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=s[e];return t||(t=s[e]=new r(e,n.getLevel(),n.methodFactory)),t};var e=typeof window!==c?window.log:void 0;return n.noConflict=function(){return typeof window!==c&&window.log===n&&(window.log=e),n},n.getLoggers=function(){return s},n}),Pa=Pa.exports;var Na,Ma,La={},Da=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};function ja(r,e){var n="|"+r.toUpperCase()+"|"+e+"|",o=function(){return new Date};return function(e,t){t?Pa[r](o()+n+e,t):Pa[r](o()+n+e)}}Object.defineProperty(La,"__esModule",{value:!0}),(Ma=Na=La.LoggingLevel||(La.LoggingLevel={})).trace="trace",Ma.debug="debug",Ma.info="info",Ma.warn="warn",Ma.error="error",La.create=function(e){var t,r,n={};try{for(var o=Da(Object.keys(Na)),i=o.next();!i.done;i=o.next()){var s=i.value;n[s]=ja(s,e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},La.setLevel=Pa.setLevel;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});var xa=function(){function e(e){this.buffer=e,this.count=e.length,this.pos=0}return e.prototype.read=function(){return this.pos<this.count?255&this.buffer[this.pos++]:-1},e.prototype.peek=function(){return this.pos<this.count?255&this.buffer[this.pos]:-1},e.prototype.readMany=function(e){var t=Math.min(e,this.count-this.pos);if(t<0)throw new Error("Length out of bounds");var r=this.buffer.slice(this.pos,this.pos+t);return this.pos+=t,r},e.prototype.readUntil=function(e){for(var t=this.count,r=this.pos;r<this.count;r++)if(this.buffer[r]===e){t=r;break}var n=this.buffer.slice(this.pos,t);return this.pos=t===this.count?t:t+1,n},e.prototype.readInt8=function(){return this.buffer.readInt8(this.pos++)},e.prototype.readInt32=function(){var e=this.buffer.readInt32BE(this.pos);return this.pos+=4,e},e.prototype.readInt64=function(){var e=this.buffer.readInt32BE(this.pos);this.pos+=4;var t=this.buffer.readInt32BE(this.pos);return this.pos+=4,Us.fromBits(t,e,!1)},e.prototype.readUInt64=function(){var e=this.buffer.readInt32BE(this.pos);this.pos+=4;var t=this.buffer.readInt32BE(this.pos);return this.pos+=4,Us.fromBits(t,e,!0)},e.prototype.hasRemaining=function(){return this.pos<this.buffer.length},e}();Ua.BufferInputStream=xa;var Ba={};(function(n){"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});var e=function(){function e(e){void 0===e&&(e=32),"number"==typeof e?(this.buffer=n.alloc(e),this.count=0):(this.buffer=e,this.count=e.length)}return e.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buffer[this.count++]=e},e.prototype.writeMany=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),0!==r&&(this.ensureCapacity(this.count+r),e.copy(this.buffer,this.count,t,t+r),this.count+=r)},e.prototype.writeString=function(e){var t=n.byteLength(e);this.ensureCapacity(this.count+t),this.buffer.write(e,this.count,t),this.count+=t},e.prototype.writeInt8=function(e){this.ensureCapacity(this.count+1),this.buffer.writeInt8(e,this.count++)},e.prototype.writeInt32=function(e){this.ensureCapacity(this.count+4),this.buffer.writeInt32BE(e,this.count),this.count+=4},e.prototype.writeInt64=function(e){this.ensureCapacity(this.count+8),this.buffer.writeInt32BE(e.getHighBits(),this.count),this.buffer.writeInt32BE(e.getLowBits(),this.count+4),this.count+=8},e.prototype.getBuffer=function(){return this.buffer.slice(0,this.count)},e.prototype.getBase64=function(){return this.getBuffer().toString("base64")},e.prototype.ensureCapacity=function(e){0<e-this.buffer.length&&this.grow(e)},e.prototype.grow=function(e){var t=this.buffer.length<<1;t-e<0&&(t=e);try{var r=n.alloc(t);this.buffer.copy(r),this.buffer=r}catch(e){throw new Error("Unable to resize BufferOutputStream to "+t)}},e}();Ba.BufferOutputStream=e}).call(this,t({}).Buffer);var ka={};Object.defineProperty(ka,"__esModule",{value:!0}),ka.PROTOCOL={TYPE:"WB",CAPABILITIES:function(){try{if(require("zlib"))return!0}catch(e){return!1}return!1}()?10:8,PROTOCOL_BYTE:35,CURRENT_VERSION:18};var qa={};Object.defineProperty(qa,"__esModule",{value:!0});var Va=function(){function e(e,t){this.encodingByte=e,this.messageTypeFlags=t}return e.extractMessageType=function(e){return~11e6&e},e.extractMessageEncoding=function(e){return 128==(11e6&e)?qa.EncodingType.ZLIB:qa.EncodingType.NO_ENCODING},e}();qa.MessageEncoding=Va,qa.EncodingType={NO_ENCODING:new Va(0,0),ZLIB:new Va(18,1)};var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.isObjectAs=function(e){return e instanceof Object};var Ga={};(function(r){"use strict";var n,t=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Ga,"__esModule",{value:!0});var f,h,d,e,o,i=La.create("Message");f=10===ka.PROTOCOL.CAPABILITIES?a({}):(i.warn("Per message compression is disabled because 'zlib' bundle is not included"),null),(o=h=Ga.types||(Ga.types={}))[o.SERVICE_REQUEST=0]="SERVICE_REQUEST",o[o.SERVICE_RESPONSE=6]="SERVICE_RESPONSE",o[o.SERVICE_ERROR=7]="SERVICE_ERROR",o[o.TOPIC_VALUE=4]="TOPIC_VALUE",o[o.TOPIC_DELTA=5]="TOPIC_DELTA",o[o.ABORT_NOTIFICATION=28]="ABORT_NOTIFICATION",o[o.CLOSE_REQUEST=29]="CLOSE_REQUEST",o[o.FETCH_REPLY=34]="FETCH_REPLY",(e=d=Ga.encoding||(Ga.encoding={}))[e.NONE=0]="NONE",e[e.ENCRYPTION_REQUESTED=1]="ENCRYPTION_REQUESTED",e[e.COMPRESSION_REQUESTED=2]="COMPRESSION_REQUESTED",e[e.BASE64_REQUESTED=3]="BASE64_REQUESTED",e[e.ENCRYPTED=17]="ENCRYPTED",e[e.COMPRESSED=18]="COMPRESSED",e[e.BASE64=19]="BASE64";var y=function(){function e(e,t,r,n,o){this.type=e,this.encoding=t,this.id=r.id,this.topic=r.topic,this.data=n,this.headers=o}return e.prototype.getInputStream=function(){return new Ua.BufferInputStream(this.data)},e}(),s=function(r){function e(e){var t=r.call(this,e.type,e.encoding,e,e.buffer,e.headers)||this;return t.stream=new Ba.BufferOutputStream(e.buffer),t}return t(e,r),e.prototype.getStream=function(){return this.stream},e.prototype.getBuffer=function(){return this.stream.getBuffer()},e}(y);Ga.parse=function(e,t){var r,n,o,i=new Ua.BufferInputStream(e),s=i.read(),a=qa.MessageEncoding.extractMessageType(s),c=qa.MessageEncoding.extractMessageEncoding(s);if(void 0===h[a]&&t(new Error("Invalid message type: "+a),null),a===h.SERVICE_REQUEST||a===h.SERVICE_RESPONSE||a===h.SERVICE_ERROR)t(null,(r=a,o=(n=i).readMany(n.count),new y(r,d.NONE,{},o,[])));else if(a===h.TOPIC_VALUE||a===h.TOPIC_DELTA)!function(e,t,r,n){var o=[],i={id:r.readInt32()};if(t===qa.EncodingType.ZLIB&&null!==f)try{var s=f.decompressSync(r.readMany(r.count));n(null,new y(e,d.COMPRESSED,i,s,o))}catch(e){n(e,null)}else n(null,new y(e,d.NONE,i,r.readMany(r.count),o))}(a,c,i,t);else{var u=i.readUntil(1).toString().split(""),p=i.readMany(i.count),l=a===h.FETCH_REPLY?u.shift():void 0;t(null,new y(a,d.NONE,{topic:l},p,u))}},Ga.create=function(e){var t;if(void 0===e||"number"==typeof e&&void 0===h[e])throw new Error("Invalid message type: "+e);return(t=Fa.isObjectAs(e)?e:{type:e}).encoding=t.encoding||0,t.headers=t.headers||[],t.buffer=t.buffer||r.alloc(0),new s(t)},Ga.writeToBuffer=function(e,t){var r;t.write(e.type),t.writeString((r=e).type!==h.FETCH_REPLY?"":[r.topic].concat(r.headers).join("")+""),t.writeMany(e.getBuffer())}}).call(this,t({}).Buffer);var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.enumerize=function(r){Object.keys(r).forEach(function(e){var t=r[e].id;void 0!==t&&(r[t]=e)})};var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.ErrorReason={COMMUNICATION_FAILURE:new Ds.ErrorReason(100,"Communication with server failed"),SESSION_CLOSED:new Ds.ErrorReason(101,"Session is closed"),REQUEST_TIME_OUT:new Ds.ErrorReason(102,"Request time out"),ACCESS_DENIED:new Ds.ErrorReason(103,"Access denied"),UNSUPPORTED:new Ds.ErrorReason(104,"Unsupported service"),CALLBACK_EXCEPTION:new Ds.ErrorReason(105,"An application callback threw an exception. Check logs for more information"),INVALID_DATA:new Ds.ErrorReason(106,"Invalid data"),NO_SUCH_SESSION:new Ds.ErrorReason(107,"A requested session could not be found"),INCOMPATIBLE_DATATYPE:new Ds.ErrorReason(108,"Data type is incompatible"),UNHANDLED_MESSAGE:new Ds.ErrorReason(109,"A message was not handled"),CLUSTER_REPARTITION:new Ds.ErrorReason(110,"The cluster was repartitioning and the request could not be routed."),INCOMPATIBLE_STATE:new Ds.ErrorReason(111,"Topic operation not performed because it is managed by a component that prohibits external updates"),CLUSTER_ROUTING:new Ds.ErrorReason(112,"The cluster operation could not be routed."),TOPIC_TREE_REGISTRATION_CONFLICT:new Ds.ErrorReason(200,"A conflicting registration exists on the same branch of the topic tree"),HANDLER_CONFLICT:new Ds.ErrorReason(201,"Conflict with an existing handler"),INVALID_PATH:new Ds.ErrorReason(202,"Invalid path"),REJECTED_REQUEST:new Ds.ErrorReason(9003,"A request has been rejected by the recipient session")},Ha.enumerize(Wa.ErrorReason);var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});var za=La.create("ServiceAdapter"),$a={respond:function(){},fail:function(){}},Qa=function(){function e(e,t){this.listeners={},this.internalSession=e,this.sender=t}return e.prototype.sendRequest=function(e,t,r){var n=Ga.create({type:Ga.types.SERVICE_REQUEST}),o=n.getStream();Ra.CommandHeaderSerialiser.write(o,e),r.write(o,t),za.debug("Sending command request: "+e,t),this.sender(n)},e.prototype.sendResponse=function(e,t,r){var n=Ga.create({type:Ga.types.SERVICE_RESPONSE}),o=n.getStream();Ra.ResponseCommandHeaderSerialiser.write(o,e),r.write(o,t),za.debug("Sending command response: "+e,t),this.sender(n)},e.prototype.sendError=function(e,t,r){var n=Ga.create({type:Ga.types.SERVICE_ERROR}),o=n.getStream();Ra.ResponseCommandHeaderSerialiser.write(o,e),Sa.writeString(o,r),Sa.writeInt32(o,t.id),za.debug("Sending command error: "+t.id,r),this.sender(n)},e.prototype.addService=function(o,i){var s=this;if(void 0!==this.listeners[o.id])throw new Error("Service already exists for service "+o.id);var a=o.request,c=o.response;this.listeners[o.id]=function(n,e){var t=a.read(e),r=n.cid.equals(aa.ONEWAY_CID)?$a:{respond:function(e){var t=n.createResponseHeader();s.sendResponse(t,e,c)},fail:function(e,t){var r=n.createErrorHeader();throw s.sendError(r,e,t),e}};try{i.onRequest(s.internalSession,t,r)}catch(e){throw za.error(e),new Error("Unable to handle request for service "+o.id)}}},e.prototype.isServiceRegistered=function(e){return void 0!==this.listeners[e]},e.prototype.onMessage=function(e,t){switch(e){case Ga.types.SERVICE_REQUEST:this.handleRequest(Ra.CommandHeaderSerialiser.read(t),t);break;case Ga.types.SERVICE_RESPONSE:this.handleResponse(Ea.CIDSerialiser.read(t),t);break;case Ga.types.SERVICE_ERROR:this.handleError(Ea.CIDSerialiser.read(t),t);break;default:throw new Error("Unknown Command Service message "+e)}},e.prototype.handleRequest=function(e,t){var r=this.listeners[e.service];r?(za.debug("Received command request for service: "+e),r(e,t)):(za.error("Received command request for unknown service: "+e),this.sendError(e.createErrorHeader(),Wa.ErrorReason.COMMUNICATION_FAILURE,"Unknown client service: "+e.service))},e.prototype.handleResponse=function(e,t){za.debug("Received command response: "+e),this.internalSession.getConversationSet().respondIfPresent(e,t)},e.prototype.handleError=function(e,t){var r=Sa.readString(t),n=Sa.readInt32(t),o=new Ds.ErrorReason(n,r);za.warn("Received command error",o),this.internalSession.getConversationSet().discard(e,o)},e}();Ya.ServiceAdapter=Qa;var Ka={},Ja=this&&this.__awaiter||function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(r,n)}o((c=c.apply(i,s||[])).next())})},Xa=this&&this.__generator||function(r,n){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(Ka,"__esModule",{value:!0});var Za=La.create("ServiceLocator"),ec=function(){function e(e,t){this.context=e,this.serviceAdapter=t}return e.prototype.obtain=function(a){var e=this,c=a.request,u=a.response;return{send:function(i,s){return void 0===s&&(s=function(){}),Ja(e,void 0,void 0,function(){var t,r,n,o=this;return Xa(this,function(e){switch(e.label){case 0:return t={onOpen:function(e){var t=new Ta.CommandHeader(a.id,e);try{o.serviceAdapter.sendRequest(t,i,c)}catch(e){throw s(e),e}},onResponse:function(e,t){var r;try{r=u.read(t)}catch(e){return Za.debug("Failed to deserialise response from service "+a.id,e.stack),s(e),!0}try{s(null,r)}catch(e){Za.debug("Request callback for service '"+a.id+"' threw an error",e.stack);try{s(e)}catch(e){Za.debug("Failed to notify callback error for service '"+a.id+"'",e)}}return!0},onDiscard:function(e,t){s(t)}},[4,(r=this.context.getConversationSet()).newConversation(t)];case 1:return n=e.sent(),[2,function(){r.discard(n,new Error("Cancelled"))}]}})})}}},e}();Ka.ServiceLocatorImpl=ec;var tc={};Object.defineProperty(tc,"__esModule",{value:!0});var rc=function(){function e(){this.valueClass=e}return e.prototype.name=function(){return"any"},e}();tc.AnyDataTypeImpl=rc;var nc,oc,ic,sc,ac={};Object.defineProperty(ac,"__esModule",{value:!0}),(sc=ac.types||(ac.types={}))[sc.UINT=0]="UINT",sc[sc.INT=1]="INT",sc[sc.BYTES=2]="BYTES",sc[sc.STRING=3]="STRING",sc[sc.ARRAY=4]="ARRAY",sc[sc.MAP=5]="MAP",sc[sc.SEMANTIC=6]="SEMANTIC",sc[sc.SIMPLE=7]="SIMPLE",sc[sc.FLOAT=7]="FLOAT",(ic=ac.additional||(ac.additional={}))[ic.FALSE=20]="FALSE",ic[ic.TRUE=21]="TRUE",ic[ic.NULL=22]="NULL",ic[ic.UNDEFINED=23]="UNDEFINED",ic[ic.SIMPLE=24]="SIMPLE",ic[ic.HALF_PRECISION=25]="HALF_PRECISION",ic[ic.SINGLE_PRECISION=26]="SINGLE_PRECISION",ic[ic.DOUBLE_PRECISION=27]="DOUBLE_PRECISION",ic[ic.BREAK=31]="BREAK",(oc=nc=ac.tokens||(ac.tokens={}))[oc.ARRAY_START=0]="ARRAY_START",oc[oc.ARRAY_END=1]="ARRAY_END",oc[oc.MAP_START=2]="MAP_START",oc[oc.MAP_END=3]="MAP_END",oc[oc.STRING_START=4]="STRING_START",oc[oc.STRING_END=5]="STRING_END",oc[oc.VALUE=6]="VALUE",ac.isStructStart=function(e){switch(e){case nc.ARRAY_START:case nc.MAP_START:case nc.STRING_START:return!0;default:return!1}},ac.isStructEnd=function(e){switch(e){case nc.ARRAY_END:case nc.MAP_END:case nc.STRING_END:return!0;default:return!1}};var cc,uc,pc={};Object.defineProperty(pc,"__esModule",{value:!0}),(uc=cc=pc.TokenContextType||(pc.TokenContextType={}))[uc.root=0]="root",uc[uc.string=1]="string",uc[uc.array=2]="array",uc[uc.object=3]="object";var lc=function(){function e(){this.ROOT={length:-1,type:cc.root,read:0},this.stack=[],this.tail=this.ROOT}return e.prototype.type=function(){return this.tail.type},e.prototype.read=function(){return this.tail.read},e.prototype.expected=function(){return this.tail.length},e.prototype.push=function(e,t){void 0===t&&(t=-1),this.tail={length:t,type:e,read:0},this.stack.push(this.tail)},e.prototype.pop=function(){var e=this.stack.pop();return this.stack.length?this.tail=this.stack[this.stack.length-1]:this.tail=this.ROOT,e},e.prototype.next=function(){if(!this.hasRemaining())throw new Error("Exceeded expected collection limit");this.tail.read++},e.prototype.break=function(){this.acceptsBreakMarker()&&(this.tail.length=0,this.tail.read=0)},e.prototype.hasRemaining=function(){return-1===this.tail.length||this.tail.length>this.tail.read},e.prototype.acceptsBreakMarker=function(){return this.tail!==this.ROOT&&-1===this.tail.length},e}();pc.Context=lc;var fc={};(function(n){"use strict";var l=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(fc,"__esModule",{value:!0});var o=1<<24,f=4294967296;function h(e,t,r){for(var n=r?0:4,o=3;0<=o;--o)t[n+o]=255&e,e>>=8}function e(e,t){var r=t?0:4;return e[r]*o+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3]}var t=function(){function r(e,t){this.buffer=n.from([0,0,0,0,0,0,0,0]),n.isBuffer(e)&&(this.buffer=e),"string"==typeof e&&function(e,t,r){var n,o,i="-"===e[0];i?e=e.substring(1):"0x"===e.substring(0,2)&&(e=e.substring(2),t=16);var s=0,a=0;try{for(var c=l(e),u=c.next();!u.done;u=c.next()){var p=u.value;a=a*t+parseInt(p,t),s=s*t+Math.floor(a/f),a%=f}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}i&&(s=~s,a?a=f-a:s++),h(s,r,!0),h(a,r,!1)}(e,t=t||10,this.buffer),"number"==typeof e&&("number"==typeof t?(h(e,this.buffer,!0),h(t,this.buffer,!1)):0<=e?function(e,t){for(var r=7;0<=r;--r)t[r]=255&e,e/=256}(e,this.buffer):function(e,t){e++;for(var r=7;0<=r;--r)t[r]=255&-e^255,e/=256}(e,this.buffer)),e instanceof r&&(h(e.getHighBits(),this.buffer,!0),h(e.getLowBits(),this.buffer,!1))}return r.toString=function(){return"Int64Impl"},r.prototype.getHighBits=function(){return e(this.buffer,!0)},r.prototype.getLowBits=function(){return e(this.buffer,!1)},r.prototype.toBuffer=function(){return this.buffer},r.prototype.toNumber=function(){var e=0|this.getHighBits(),t=this.getLowBits();return e?e*f+t:t},r.prototype.isNegative=function(){return!!(2147483648&this.getHighBits())},r.prototype.toString=function(e){void 0===e&&(e=10);var t=this.getHighBits(),r=this.getLowBits(),n=this.isNegative();if(n&&(t=~t,r=f-r),0===t&&0===r)return"0";for(var o="";t||r;){var i=t%e*f+r;t=Math.floor(t/e),r=Math.floor(i/e),o=(i%e).toString(e)+o}return n&&(o="-"+o),o},r.prototype.equals=function(e){return!!(e&&e instanceof r)&&this.getHighBits()===e.getHighBits()&&this.getLowBits()===e.getLowBits()},r}();fc.Int64Impl=t}).call(this,t({}).Buffer);var hc={};(function(i){"use strict";Object.defineProperty(hc,"__esModule",{value:!0});var o=new Error,s=i.alloc(0),e=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.bufferOffset=t,this.length=r,this.data=e,this.context=new pc.Context,this.pos=this.bufferOffset}return e.prototype.reset=function(){this.context=new pc.Context,this.token=void 0,this.type=void 0,this.pos=this.bufferOffset},e.prototype.hasRemaining=function(){var e=this.context.type()===pc.TokenContextType.root?this.length:this.length+1;return this.pos<this.bufferOffset+e},e.prototype.offset=function(){return this.pos},e.prototype.getContext=function(){return this.context},e.prototype.getToken=function(){return this.token},e.prototype.nextToken=function(){if(!this.hasRemaining())return null;var e=this.context.type(),t=this.pos;if(e!==pc.TokenContextType.root&&!this.context.hasRemaining()){switch(e){case pc.TokenContextType.object:this.type=ac.tokens.MAP_END;break;case pc.TokenContextType.array:this.type=ac.tokens.ARRAY_END;break;case pc.TokenContextType.string:this.type=ac.tokens.STRING_END}return this.context.pop(),{pos:this.pos,type:this.type,getBuffer:function(){return s}}}this.context.next();var r,n=this.readHeader();switch(n.type){case ac.types.INT:case ac.types.UINT:case ac.types.FLOAT:case ac.types.SIMPLE:this.type=ac.tokens.VALUE,r=this.readValue(n);break;case ac.types.BYTES:case ac.types.STRING:n.raw===ac.additional.BREAK?(this.context.push(pc.TokenContextType.string,-1),this.type=ac.tokens.STRING_START):(this.type=ac.tokens.VALUE,r=this.readValue(n));break;case ac.types.ARRAY:this.context.push(pc.TokenContextType.array,this.readCollectionLength(n)),this.type=ac.tokens.ARRAY_START;break;case ac.types.MAP:var o=this.readCollectionLength(n);0<=o&&(o*=2),this.context.push(pc.TokenContextType.object,o),this.type=ac.tokens.MAP_START;break;case ac.types.SEMANTIC:return this.nextToken();default:throw new Error("Unknown CBOR header type: "+n.type)}if(r instanceof Error){if(this.context.acceptsBreakMarker())return this.context.break(),this.nextToken();throw new Error("Unexpected break flag outside of indefinite-length context")}var i=this.data;return this.token={pos:t,type:this.type,value:r,header:n,length:this.pos,getBuffer:function(){return i.slice(this.pos,this.length)}},this.token},e.prototype.readValue=function(e){switch(e.type){case ac.types.UINT:return this.readHeaderValue(e);case ac.types.INT:return this.readHeaderValue(e,!0);case ac.types.BYTES:return this.readBuffer(this.readHeaderValue(e));case ac.types.STRING:return this.readBuffer(this.readHeaderValue(e)).toString("utf-8");case ac.types.SIMPLE:return this.readSimpleValue(e.raw)}throw new Error("Unrecognised value type ("+e.type+")")},e.prototype.readSimpleValue=function(e){switch(e){case ac.additional.TRUE:return!0;case ac.additional.FALSE:return!1;case ac.additional.NULL:return null;case ac.additional.BREAK:return o;case ac.additional.HALF_PRECISION:return this.readFloat16();case ac.additional.SINGLE_PRECISION:return this.readFloat32();case ac.additional.DOUBLE_PRECISION:return this.readFloat64();default:return}},e.prototype.readByte=function(){if(this.pos<this.data.length)return this.data[this.pos++];throw new Error("Exhausted token stream")},e.prototype.readBuffer=function(e){return this.data.slice(this.pos,this.pos+=e)},e.prototype.readUint16=function(){var e=this.data.readUInt16BE(this.pos);return this.pos+=2,e},e.prototype.readUint32=function(){var e=this.data.readUInt32BE(this.pos);return this.pos+=4,e},e.prototype.readUint64=function(e){var t=i.from(this.readBuffer(8));if(e)for(var r=0;r<8;++r)t[r]=~t[r];var n=new fc.Int64Impl(t),o=n.toNumber();return o<=9007199254740991&&-9007199254740991<=o?o:n},e.prototype.readFloat16=function(){var e=this.readUint16(),t=1023&e,r=(31744&e)>>10,n=(32768&e)>>15?-1:1;return 0===r?n*Math.pow(2,-14)*(t/Math.pow(2,10)):31===r?t?NaN:n*(1/0):n*Math.pow(2,r-15)*(1+t/Math.pow(2,10))},e.prototype.readFloat32=function(){var e=this.data.readFloatBE(this.pos);return this.pos+=4,e},e.prototype.readFloat64=function(){var e=this.data.readDoubleBE(this.pos);return this.pos+=8,e},e.prototype.readHeader=function(){var e=this.readByte();return{type:e>>5,raw:31&e}},e.prototype.readHeaderValue=function(e,t){void 0===t&&(t=!1);var r=e.raw,n=function(e){return t?-1-e:e};if(r<24)return n(r);switch(r){case ac.additional.SIMPLE:return n(this.readByte());case ac.additional.HALF_PRECISION:return n(this.readUint16());case ac.additional.SINGLE_PRECISION:return n(this.readUint32());case ac.additional.DOUBLE_PRECISION:return this.readUint64(t);case ac.additional.BREAK:return o;default:throw new Error("Unexpected value "+r)}},e.prototype.readCollectionLength=function(e){var t=this.readHeaderValue(e);return t===o?-1:t},e}();hc.Tokeniser=e}).call(this,t({}).Buffer);var dc={};Object.defineProperty(dc,"__esModule",{value:!0});var yc=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.$buffer=e,this.$offset=t,this.$length=r};dc.BufferSlice=yc;var vc=function(e){return null!=e&&(_c(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&_c(t.slice(0,0))||!!e._isBuffer);var t};function _c(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var Sc={};(function(s){"use strict";var n,t=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Sc,"__esModule",{value:!0});var e=function(n){function e(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.length),n.call(this,e,t,r)||this}return t(e,n),e.prototype.visit=function(e){if(this.hasChanges()){for(var t=new hc.Tokeniser(this.$buffer,this.$offset,this.$length);t.hasRemaining();){var r=t.nextToken(),n=!1;if(s.isBuffer(r.value))n=!e.insert(r.value);else{var o=r.value,i=t.nextToken().value;n=!e.match(o,i)}if(n)return void e.end()}e.end()}else e.noChange()},e.prototype.hasChanges=function(){return 1!==this.$length},e}(dc.BufferSlice);Sc.BinaryDeltaImpl=e}).call(this,{isBuffer:vc});var Ec={};(function(l){"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});var e=function(){function e(e,t,r){this.tokeniser=l.isBuffer(e)?new hc.Tokeniser(e,t,r):e}return e.prototype.hasRemaining=function(){return this.tokeniser.hasRemaining()},e.prototype.nextValue=function(){return this.nextValueExpecting(t)},e.prototype.nextValueExpecting=function(e){if(!this.tokeniser.hasRemaining())throw new Error("Token stream exhausted");var t=this.tokeniser.nextToken();if(e(t.header.type))return function e(t,r){switch(t.type){case ac.tokens.VALUE:return t.value;case ac.tokens.MAP_START:for(var n={};;){var o=r.nextToken();if(null===o)throw new Error("Unexpected EOF (reading: map key)");if(o.type===ac.tokens.MAP_END)break;var i=r.nextToken();if(null===i||i.type===ac.tokens.MAP_END)throw new Error("Unexpected EOF (reading: map value)");var s=e(o,r);if(null==s)throw new Error("Cannot have undefined key (reading: map key)");n[s.toString()]=e(i,r)}return n;case ac.tokens.ARRAY_START:for(var a=[];;){var c=r.nextToken();if(null===c)throw new Error("Unexpected EOF (reading: array value)");if(c.type===ac.tokens.ARRAY_END)break;a.push(e(c,r))}return a;case ac.tokens.STRING_START:for(var u=[];;){var p=r.nextToken();if(null===p)throw new Error("Unexpected EOF (reading: indefinite-length string");if(p.type===ac.tokens.STRING_END)break;if(p.header.type!==t.header.type)throw new Error("Unexpected chunk type ("+p.header.type+") within string");u.push(p.value)}switch(t.header.type){case ac.types.BYTES:return l.concat(u);case ac.types.STRING:return u.join("");default:throw new Error("Unexpected chunk type ("+t.header.type+") (reading: string)")}default:throw new Error("Unexpected token: "+JSON.stringify(t))}}(t,this.tokeniser);throw new Error("Unexpected CBOR type")},e}();function t(){return!0}Ec.Decoder=e,Ec.isDouble=function(e){return e===ac.types.FLOAT},Ec.isInt64=function(e){return e===ac.types.UINT||e===ac.types.INT},Ec.isString=function(e){return e===ac.types.STRING}}).call(this,t({}).Buffer);var mc={};(function(o){"use strict";var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(mc,"__esModule",{value:!0});var e=function(){function e(){this.bos=new Ba.BufferOutputStream}return e.prototype.writeByte=function(e){this.bos.write(e)},e.prototype.writeBuffer=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.bos.writeMany(e,t,r)},e.prototype.writeUint16=function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.writeUint32=function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},e.prototype.writeUint64=function(e){this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},e.prototype.writeBreakHeader=function(e){this.writeByte(e<<5|ac.additional.BREAK)},e.prototype.writeToken=function(e,t){var r=e<<5;t<24?this.writeByte(r|t):t<256?(this.writeByte(24|r),this.writeByte(t)):t<65536?(this.writeByte(25|r),this.writeUint16(t)):t<4294967296?(this.writeByte(26|r),this.writeUint32(t)):(this.writeByte(27|r),this.writeUint64(t))},e.prototype.writeNumber=function(e){if(-1<e.toString().indexOf(".")){var t=o.alloc(8);t.writeDoubleBE(e,0),this.writeByte(ac.types.SIMPLE<<5|ac.additional.DOUBLE_PRECISION),this.writeBuffer(t)}else e<0?this.writeToken(ac.types.INT,-1-e):this.writeToken(ac.types.UINT,e)},e.prototype.writeString=function(e){var t=o.from(e,"utf-8");this.writeToken(ac.types.STRING,t.length),this.writeBuffer(t)},e.prototype.writeBinary=function(e,t,r){void 0===r&&(r=e.length),this.writeToken(ac.types.BYTES,r),this.writeBuffer(e,t,r)},e.prototype.writeBoolean=function(e){this.writeToken(ac.types.SIMPLE,e?ac.additional.TRUE:ac.additional.FALSE)},e.prototype.writeUndefined=function(){this.writeToken(ac.types.SIMPLE,ac.additional.UNDEFINED)},e.prototype.writeNull=function(){this.writeToken(ac.types.SIMPLE,ac.additional.NULL)},e.prototype.writeObject=function(e){var t,r,n=Object.getOwnPropertyNames(e);this.startObject(n.length);try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var s=i.value;this.encode(s),this.encode(e[s])}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},e.prototype.writeArray=function(e){var t,r;this.startArray(e.length);try{for(var n=a(e),o=n.next();!o.done;o=n.next()){var i=o.value;this.encode(i)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.break=function(){return this.writeBreakHeader(ac.types.SIMPLE),this},e.prototype.startArray=function(e){return void 0===e?this.writeBreakHeader(ac.types.ARRAY):this.writeToken(ac.types.ARRAY,e),this},e.prototype.startObject=function(e){return void 0===e?this.writeBreakHeader(ac.types.MAP):this.writeToken(ac.types.MAP,e),this},e.prototype.writeInt64=function(e){var t=0|e.getHighBits();if(0===t||-1===t)this.writeNumber(e.toNumber());else if(e.isNegative()){this.writeByte(ac.types.INT<<5|27);for(var r=o.from(e.toBuffer()),n=0;n<8;++n)r[n]=~r[n];this.writeBuffer(r)}else this.writeByte(ac.types.UINT<<5|27),this.writeBuffer(e.toBuffer());return this},e.prototype.writeDouble=function(e){var t=o.alloc(8);return t.writeDoubleBE(e,0),this.writeByte(ac.types.SIMPLE<<5|ac.additional.DOUBLE_PRECISION),this.writeBuffer(t),this},e.prototype.encode=function(e,t,r){if(e instanceof Date)this.writeString(e.toJSON());else if(null===e)this.writeNull();else if(void 0===e)this.writeUndefined();else if(e instanceof fc.Int64Impl)this.writeInt64(e);else switch(typeof e){case"boolean":this.writeBoolean(e);break;case"string":this.writeString(e);break;case"number":this.writeNumber(e);break;case"object":o.isBuffer(e)?this.writeBinary(e,t,r):Array.isArray(e)?this.writeArray(e):this.writeObject(e)}return this},e.prototype.flush=function(){var e=this.bos.getBuffer();return this.bos=new Ba.BufferOutputStream,e},e}();mc.Encoder=e}).call(this,t({}).Buffer);var wc={};Object.defineProperty(wc,"__esModule",{value:!0}),wc.approximateSquareRoot=function(e){if(e<0)throw new Error("Value must be great or equal to 0");if(0===e)return 0;var t=32-function(e){if(0===e)return 32;var t=1;return e>>>16==0&&(t+=16,e<<=16),e>>>24==0&&(t+=8,e<<=8),e>>>28==0&&(t+=4,e<<=4),e>>>30==0&&(t+=2,e<<=2),t-(e>>>31)}(e);return 1<<Math.round(t/2)},wc.findNextPowerOfTwo=function(e){if(e<0||1<<30<e)throw new Error("Illegal argument: "+e);return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},wc.intBitsToFloat=function(e){var t=2147483648&e?-1:1,r=(e>>23&255)-127,n=8388607&e;if(128===r)return t*(n?Number.NaN:Number.POSITIVE_INFINITY);if(-127===r){if(0===n)return 0*t;r=-126,n/=1<<22}else n=(n|1<<23)/(1<<23);return t*n*Math.pow(2,r)},wc.MAX_INT32=2147483647,wc.MAX_SAFE_INTEGER=9007199254740991;var gc={},Tc=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(gc,"__esModule",{value:!0});gc.SUCCESS=0,gc.REPLACE=1,gc.NO_CHANGE=2;var Oc=function(){function e(e){this.maximumD=(e-3)/4,this.vectorLength=0,this.vector=[]}return e.prototype.fill=function(e){for(var t=e;t<this.vectorLength+4;t+=4)this.vector[t+0]=-1,this.vector[t+1]=-1,this.vector[t+2]=2147483647,this.vector[t+3]=2147483647},e.prototype.ensure=function(e){this.vectorLength=4*(e+1)+3},e.prototype.initialise=function(e){return this.ensure(e),this.fill(3),this.vector},e.prototype.extend=function(e){if(e>this.maximumD)return null;var t=this.vectorLength;return this.ensure(e),this.fill(t),this.vector},e}();function Ic(e){return e<0?-4*e-1:4*e}function Rc(e){return Ic(e)+2}function bc(e,t){var r=e[Ic(t)];return void 0===r?0:r}function Cc(e,t){var r=e[Rc(t)];return void 0===r?0:r}function Ac(e,t,r){e[Ic(t)]=r}function Pc(e,t,r){e[Rc(t)]=r}function Nc(e,t){return e<=t?e:2*t-e}function Mc(e,t,r){if(t<0)throw new Error("offset "+t+" < 0");if(r<0)throw new Error("length "+r+" < 0");if(t+r>e.length||t+r<0)throw new Error("offset "+t+" + "+r+" > "+e.length)}var Lc=function(){function e(e,t,r,n,o){this.storage=e,this.a=t,this.b=r,this.script=n,this.bailOutFactor=o}return e.prototype.diff=function(e,t,r,n,o){void 0===o&&(o=this.bailOutFactor),Mc(this.a,e,t),Mc(this.b,r,n);var i=this.afterCommonPrefix(e,t,r,n),s=this.beforeCommonSuffix(e,t,r,n,i),a=s+n-t;return!!this.script.match(e,i)&&(i===s?this.script.insert(r+i,a-i):i===a?this.script.delete():this.middleSnake(e+i,s-i,r+i,a-i,o))&&this.script.match(e+s,t-s)},e.prototype.afterCommonPrefix=function(e,t,r,n){for(var o=Math.min(t,n),i=0;i<o;++i)if(this.a[e+i]!==this.b[r+i])return i;return Math.max(0,o)},e.prototype.beforeCommonSuffix=function(e,t,r,n,o){for(var i=Math.max(0,t-n)+o,s=t;i<s;--s)if(this.a[e+s-1]!==this.b[r+s+n-t-1])return s;return Math.min(t,i)},e.prototype.diffNoPrefix=function(e,t,r,n,o){void 0===o&&(o=this.bailOutFactor);var i=this.beforeCommonSuffix(e,t,r,n,0),s=i+n-t;return(0===i?this.script.insert(r,s):0===s?this.script.delete():this.middleSnake(e,i,r,s,o))&&this.script.match(e+i,t-i)},e.prototype.diffNoSuffix=function(e,t,r,n,o){void 0===o&&(o=this.bailOutFactor);var i=this.afterCommonPrefix(e,t,r,n);return!!this.script.match(e,i)&&(i===t?this.script.insert(r+i,n-i):i===n?this.script.delete():this.middleSnake(e+i,t-i,r+i,n-i,o))},e.prototype.middleSnake=function(e,t,r,n,o){var i=t-n,s=1&i,a=this.storage.initialise(1);Ac(a,0,0),Pc(a,0,t);var c,u,p,l,f,h,d,y,v=1,_=o;do{for(var S=Nc(v,t),E=Nc(v,n),m=-S;m<=E;m+=2){var w=(void 0,d=bc(f=a,(h=m)+1),y=bc(f,h-1),d<y?y:d+1),g=w+this.afterCommonPrefix(e+w,t-w,r+w+m,n-m-w);if(s&&Math.abs(m+i)<=v-1&&g>=Cc(a,m+i))return this.recurse(e,t,r,n,w,g,m);Ac(a,m,g)}for(var T=-E;T<=S;T+=2){var O=(void 0,p=Cc(c=a,(u=T)+1),l=Cc(c,u-1),p<l?p:l-1),I=T-i,R=this.beforeCommonSuffix(e,O,r,I+O,0);if(!s&&Math.abs(I)<=v&&R<=bc(a,I))return this.recurse(e,t,r,n,R,O,I);Pc(a,T,R)}if(0==(63&v)&&this.slowProgress(a,t,n,S,E,v))_-=48;else if(v>Math.max(4,_))return this.bail(a,e,t,r,n,S,E,Math.trunc(_/2));++v,a=this.storage.extend(v)}while(null!==a);return!1},e.prototype.slowProgress=function(e,t,r,n,o,i){var s=Tc(this.bestForward(e,t,r,n,o),2),a=s[0],c=s[1],u=Tc(this.bestReverse(e,t,r,n,o),2);return a+c+(t+r-u[0]-u[1])<wc.approximateSquareRoot(i)*i},e.prototype.bestForward=function(e,t,r,n,o){for(var i=0,s=0,a=-n;a<=o;a+=2){var c=Math.min(bc(e,a),t,r-a),u=c+a;i+s<c+u&&(i=c,s=u)}return[i,s]},e.prototype.bestReverse=function(e,t,r,n,o){for(var i=t,s=r,a=-o;a<=n;a+=2){var c=a-(t-r),u=Math.max(Cc(e,a),0,-c),p=u+c;u+p<i+s&&(i=u,s=p)}return[i,s]},e.prototype.recurse=function(e,t,r,n,o,i,s){return this.diffNoPrefix(e,o,r,o+s)&&this.script.match(e+o,i-o)&&this.diffNoSuffix(e+i,t-i,r+i+s,n-i-s)},e.prototype.bail=function(e,t,r,n,o,i,s,a){var c=Tc(this.bestForward(e,r,o,i,s),2),u=c[0],p=c[1],l=Tc(this.bestReverse(e,r,o,i,s),2),f=l[0],h=l[1];return f<=u||h<=p?u+p<r+o-f-h?this.splitDiff(t,f,r,n,h,o):this.splitDiff(t,u,r,n,p,o):this.diffNoPrefix(t,u,n,p)&&this.boundedDiff(t+u,f-u,n+p,h-p,r,o,a)&&this.diffNoSuffix(t+f,r-f,n+h,o-h)},e.prototype.boundedDiff=function(e,t,r,n,o,i,s){var a=o*i;if(t*n>=Math.floor((1<<24)+a/2)){if(s<=0){var c=Math.trunc(t/4),u=c+Math.trunc(t/2),p=Math.trunc(n/4),l=p+Math.trunc(n/2);return this.noDiff(r,p)&&this.diff(e+c,u-c,r+p,l-p,s)&&this.noDiff(r+l,n-l)}var f=Math.trunc(t/2),h=Math.trunc(n/2);return this.splitDiff(e,f,t,r,h,n,s)}return this.middleSnake(e,t,r,n,s)},e.prototype.splitDiff=function(e,t,r,n,o,i,s){return this.diffNoPrefix(e,t,n,o,s)&&this.diffNoSuffix(e+t,r-t,n+o,i-o,s)},e.prototype.noDiff=function(e,t){return this.script.insert(e,t)&&this.script.delete()},e}();function Dc(e,t,r){return e.insert(t,r)}function jc(e,t,r){return e.match(t,r)}function Uc(){return!0}var xc=function(){function e(e,t){void 0===e&&(e=2147483647),void 0===t&&(t=1e4),this.bailOutFactor=t,this.storage=new Oc(e)}return e.prototype.diff=function(e,t,r,n,o,i,s){var a=function(r,n,o){var i=!0,s=0,a=0,c=Uc;function u(){return i=i&&c===Uc,c(r,a,s)}function p(e,t,r){if(0<r)if(c!==e){if(!u())return!1;c=e,a=t,s=r}else s+=r;return!0}return{insert:function(e,t){return p(Dc,e-o,t)},match:function(e,t){return p(jc,e-n,t)},delete:function(e,t){if(c===Dc)return!0;var r=u();return c=Uc,r},close:function(e,t){if(i){if(c===Dc)return gc.REPLACE;if(0===a&&s===e)return gc.NO_CHANGE}return u()&&r.close()?gc.SUCCESS:gc.REPLACE}}}(s,t,o);return new Lc(this.storage,e,n,a,this.bailOutFactor).diff(t,r,o,i)?a.close(r,i):gc.REPLACE},e}();gc.MyersBinaryDiff=xc;var Bc={};(function(u){"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});var f=new mc.Encoder;function o(e){return e<24?1:e<255?2:e<=65535?3:5}function r(e,t,r){var n=o(e)+1;return o(t+r)-o(r)+t<=n}Bc.NO_CHANGE=new Sc.BinaryDeltaImpl(u.from([-10]),0,1);var h=function(){function e(e,t,r,n){this.insertStart=-1,this.matchStart=-1,this.cborEncoder=e,this.buffer=t,this.offset=r,this.blowsBudget=n}return e.prototype.insert=function(e,t){if(-1!==this.matchStart){if(r(this.matchStart,this.matchLength,t))return(this.matchStart=-1)===this.insertStart?(this.insertStart=e-this.matchLength,this.insertLength=this.matchLength+t):this.insertLength+=this.matchLength+t,!0;if(!this.flush())return!1}return-1===this.insertStart?(this.insertStart=e,this.insertLength=t):this.insertLength+=t,!0},e.prototype.match=function(e,t){if(-1!==this.matchStart){if(!this.flush())return!1}else if(-1!==this.insertStart&&r(e,t,this.insertLength))return this.insertLength+=t,!0;return this.matchStart=e,this.matchLength=t,!0},e.prototype.delete=function(e,t){return!0},e.prototype.close=function(){return this.flush()},e.prototype.flush=function(){return(-1===this.insertStart||this.writeInsert())&&(-1===this.matchStart||this.writeMatch())},e.prototype.writeInsert=function(){return!this.blowsBudget(this.insertLength+o(this.insertLength))&&(f.encode(this.buffer,this.offset+this.insertStart,this.insertLength),this.insertStart=-1,!0)},e.prototype.writeMatch=function(){return!this.blowsBudget(o(this.matchStart)+o(this.matchLength))&&(this.cborEncoder.encode(this.matchStart),this.cborEncoder.encode(this.matchLength),this.matchStart=-1,!0)},e}(),e=function(){function e(e,t,r){this.binaryDiff=new gc.MyersBinaryDiff,this.implementation=e,this.cToV=r,this.vToC=t}return e.prototype.name=function(){return"binary"},e.prototype.diff=function(e,t){var r,n=this.vToC(e),o=this.vToC(t),i=o.$buffer,s=o.$offset,a=o.$length,c=a,u=new h(f,i,s,function(e){return(c-=e)<=0}),p=this.binaryDiff.diff(n.$buffer,n.$offset,n.$length,i,s,a,u),l=f.flush();switch(p){case gc.REPLACE:return r=o,f.encode(r.$buffer,r.$offset,r.$length),new Sc.BinaryDeltaImpl(f.flush());case gc.NO_CHANGE:return Bc.NO_CHANGE;default:return this.readDelta(l)}},e.prototype.apply=function(e,t){return this.applyImpl(e,t).value},e.prototype.applyImpl=function(e,t,r){var n=t,o=r||this.vToC(e);if(!t||!t.hasChanges())return{value:this.cToV(o),cbor:o};for(var i=new Ec.Decoder(n.$buffer),s=new Ba.BufferOutputStream;i.hasRemaining();){var a=i.nextValue();u.isBuffer(a)?s.writeMany(a):"number"==typeof a&&s.writeMany(o.$buffer,o.$offset+a,i.nextValue())}var c=new this.implementation(s.getBuffer());return{value:this.cToV(c),cbor:c}},e.prototype.readDelta=function(e,t,r){var n=new Sc.BinaryDeltaImpl(e,t,r);return 1===n.$length&&e[n.$offset]===Bc.NO_CHANGE.$buffer[0]?Bc.NO_CHANGE:n},e.prototype.writeDelta=function(e){var t=e;return t.$buffer.slice(t.$offset,t.$offset+t.$length)},e.prototype.noChange=function(){return Bc.NO_CHANGE},e.prototype.isValueCheaper=function(e,t){return e.$length<=t.$length},e}();Bc.BinaryDeltaTypeImpl=e}).call(this,t({}).Buffer);var kc,qc={},Vc=this&&this.__extends||(kc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}kc(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(qc,"__esModule",{value:!0});var Fc=function(n){function e(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.length),n.call(this,e,t,r)||this}return Vc(e,n),e.toString=function(){return"BytesImpl"},e.prototype.length=function(){return this.$length},e.prototype.asBuffer=function(){return this.$buffer.slice(this.$offset,this.$offset+this.$length)},e.prototype.copyTo=function(e,t){void 0===t&&(t=0),this.$buffer.copy(e,t,this.$offset,this.$offset+this.$length)},e.prototype.equals=function(e){return this.equalBytes(e.$buffer,e.$offset,e.$length)},e.prototype.equalBytes=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=e.length),this.$length!==r)return!1;if(this.$buffer===e&&this.$offset===t)return!0;for(var n=0;n<r;++n)if(this.$buffer[this.$offset+n]!==e[t+n])return!1;return!0},e}(dc.BufferSlice);qc.BytesImpl=Fc;var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});var Hc=function(){function e(e,t,r,n,o,i,s){var a=this;this.valueConverters={},this.typeName=e,this.cToV=o,this.vToC=n,this.implementation=r,i.forEach(function(n){a.valueConverters[n.toString()]=function(e,t,r){return new n(e,t,r)}}),this.valueConverters[qc.BytesImpl.toString()]=function(e,t,r){return new qc.BytesImpl(e,t,r)},this.valueConverters[t.toString()]=this.readValue.bind(this),this.valueConverters[tc.AnyDataTypeImpl.toString()]=this.readValue.bind(this),this.valueClass=t,s&&(this.binaryDeltaTypeImpl=new Bc.BinaryDeltaTypeImpl(r,n,o))}return e.prototype.name=function(){return this.typeName},e.prototype.toString=function(){return this.typeName+" data type"},e.prototype.writeValue=function(e){var t=this.vToC(e);if(null===t)throw new Error(this+" cannot write "+e);return t.asBuffer()},e.prototype.toBytes=function(e){var t=this.vToC(e);if(t)return t;throw new Error(this+" cannot convert value to Bytes: "+e)},e.prototype.readValue=function(e,t,r){return e instanceof qc.BytesImpl?e instanceof this.implementation?this.cToV(e):this.readValue(e.$buffer,e.$offset,e.$length):this.cToV(new this.implementation(e,t,r))},e.prototype.canReadAs=function(e){return void 0!==this.valueConverters[e.toString()]},e.prototype.readAs=function(e,t,r,n){if(t instanceof qc.BytesImpl)return this.readAs(e,t.$buffer,t.$offset,t.$length);if(this.valueConverters[e.toString()])return this.valueConverters[e.toString()](t,r,n);throw new Error(this+" is incompatible with values of "+e)},e.prototype.deltaType=function(e){if(!e||"binary"===e||e instanceof Sc.BinaryDeltaImpl)return this.binaryDeltaType();throw new Error(this+" has no '"+e+"' delta type")},e.prototype.binaryDeltaType=function(){if(void 0===this.binaryDeltaTypeImpl)throw new Error(this+" has no binary delta type");return this.binaryDeltaTypeImpl},e}();Gc.AbstractDataType=Hc;var Wc={};function Yc(e,t){switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);case 4:return e(t[0],t[1],t[2],t[3]);case 5:return e(t[0],t[1],t[2],t[3],t[4]);case 6:return e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7])}return e.apply(e,t)}Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.curryR=function(r){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Yc(r,e.concat(n))}},Wc.callWithArguments=Yc,Wc.identity=function(e){return e};var zc={};(function(t){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function o(e){if(e instanceof i)return e;if(t.isBuffer(e))return new i(e);throw new Error("Unable to read Binary value from: "+e)}Object.defineProperty(zc,"__esModule",{value:!0});var i=function(n){function e(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.length),n.call(this,e,t,r)||this}return r(e,n),e.toString=function(){return"BinaryImpl"},e.from=function(e){return o(e)},e.prototype.get=function(){return this.asBuffer()},e.prototype.diff=function(e,t){return s.diff(e,this)},e.prototype.apply=function(e){return s.apply(this,e)},e.prototype.toString=function(){return"Binary <"+this.$length+" bytes> "+this.get().toString()},e}(qc.BytesImpl);zc.BinaryImpl=i;var s=new Bc.BinaryDeltaTypeImpl(i,o,Wc.identity)}).call(this,{isBuffer:vc});var $c,Qc={},Kc=this&&this.__extends||($c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}$c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Qc,"__esModule",{value:!0});var Jc=function(t){function e(){var e=t.call(this,"binary",zc.BinaryImpl,zc.BinaryImpl,zc.BinaryImpl.from,Wc.identity,[],!0)||this;return e.Binary=zc.BinaryImpl,e}return Kc(e,t),e.prototype.from=function(e){return zc.BinaryImpl.from(e)},e.prototype.validate=function(){},e}(Gc.AbstractDataType);Qc.BinaryDataTypeImpl=Jc;var Xc={},Zc=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Xc,"__esModule",{value:!0});var eu=function(){function t(e){this.index=e}return t.prototype.equals=function(e){return e===this||!!(e&&e instanceof t)&&e.index===this.index},t.prototype.toString=function(){return"/"+this.index},t}(),tu=new eu(0),ru=function(){function t(e){this.expression="/"+function(e){for(var t=0;t<e.length;++t){var r=e.charAt(t);if("/"===r||"~"===r){var n=e.length,o=[];o.push(e.substring(0,t));for(var i=t;i<n;++i){var s=e.charAt(i);"/"===s?o.push("~1"):"~"===s?o.push("~0"):o.push(s)}return o.join("")}}return e}(e)}return t.prototype.equals=function(e){return e===this||!!(e&&e instanceof t)&&e.expression===this.expression},t.prototype.toString=function(){return this.expression},t}(),nu=function(){function e(e){if(this.pos=0,""!==e&&"/"!==e.charAt(0))throw new Error("JSON Pointer expression must be empty or start with '/' : "+e);this.expression=e}return e.prototype.nextSegmentString=function(){for(var e=this.pos;this.pos<this.expression.length;++this.pos){var t=this.expression[this.pos];if("/"===t)break;if("~"===t){for(var r=[this.expression.substring(e,this.pos)],n=this.expression.length;this.pos<n;++this.pos){var o=this.expression.charAt(this.pos);if("/"===o)break;if("~"===o&&this.pos!==n-1){++this.pos;var i=this.expression.charAt(this.pos);"0"===i?r.push("~"):"1"===i?r.push("/"):(r.push("~"),r.push(i))}else r.push(o)}return r.join("")}}return this.expression.substring(e,this.pos)},e.prototype.maybeIndex=function(e){var t=e.length;if(0===t||10<t)return null;for(var r=0;r<t;++r){var n=e.charAt(r);if(n<"0"||"9"<n)return null;if("0"===n&&0===r)return 1===t?tu:null}var o=parseInt(e,10);return o>wc.MAX_INT32?null:new eu(o)},e.prototype.next=function(){if(this.pos===this.expression.length)return null;++this.pos;var e=this.nextSegmentString(),t=this.maybeIndex(e);return null!==t?t:new ru(e)},e}(),ou=function(){function i(e){this.segments=e}return i.parse=function(e){if(e instanceof i)return e;for(var t=Xc.ROOT,r=new nu(e);;){var n=r.next();if(null===n)return t;t=t.withSegment(n)}},i.prototype.withKey=function(e){return this.withSegment(new ru(e))},i.prototype.withIndex=function(e){return this.withSegment(new eu(e))},i.prototype.withSegment=function(e){return new i(this.segments.concat(e))},i.prototype.equalIgnoringIndexes=function(e){if(e===this)return!0;var t=this.segments.length;if(t!==e.segments.length)return!1;for(var r=0;r<t;++r){var n=this.segments[r],o=e.segments[r];if(n instanceof eu){if(o instanceof ru)return!1}else if(!n.equals(o))return!1}return!0},i.prototype.toString=function(){var e,t,r=[];try{for(var n=Zc(this.segments),o=n.next();!o.done;o=n.next()){var i=o.value;r.push(i.toString())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r.join("")},i.prototype.equals=function(e){if(e===this)return!0;if(!(e&&e instanceof i))return!1;if(this.segments.length!==e.segments.length)return!1;for(var t=this.segments.length,r=0;r<t;++r){var n=this.segments[r],o=e.segments[r];if(!n.equals(o))return!1}return!0},i}();Xc.JSONPointer=ou,Xc.ROOT=new ou([]);var iu={};Object.defineProperty(iu,"__esModule",{value:!0}),iu.requireNonNull=function(e,t){if(null==e)throw new Error(t+" is null");return e};var su={},au=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(su,"__esModule",{value:!0});var cu,uu=function(){function r(e,t,r){this.segment=e,this.pointer=t,this.children=[],this.value=null,this.context=r}return r.prototype.count=function(){var e,t,r=this.value?1:0;try{for(var n=au(this.children),o=n.next();!o.done;o=n.next())r+=o.value.count()}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},r.prototype.addChild=function(e){var t=new r(e,this.pointer.withSegment(e),this.context);return this.children.push(t),t},r.prototype.findChild=function(e){var t,r;try{for(var n=au(this.children),o=n.next();!o.done;o=n.next()){var i=o.value;if(e.equals(i.segment))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return null},r.prototype.setValue=function(e){var t=this.value;return null===t&&this.context.size++,this.value=e,t},r.prototype.removeDescendants=function(){var e,t,r=0;try{for(var n=au(this.children),o=n.next();!o.done;o=n.next())r+=o.value.count()}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return this.children=[],this.context.size-=r,r},r.prototype.numberOfChildren=function(){var e,t,r=0;try{for(var n=au(this.children),o=n.next();!o.done;o=n.next())r+=o.value.value?1:0}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},r.prototype.toString=function(){return this.pointer+"="+this.value},r}(),pu=function(){function e(e){this.nextChildIndex=0,this.node=e}return e.prototype.nextChild=function(){var e=this.node.children;return this.nextChildIndex>=e.length?null:e[this.nextChildIndex++]},e}(),lu=function(){function e(e){this.nextEntry=e(),this.nextWithValue=e}return e.prototype.hasNext=function(){return null!==this.nextEntry},e.prototype.next=function(){if(null===this.nextEntry)throw new Error("No such element");var e=this.nextEntry;return this.nextEntry=this.nextWithValue(),e},e}(),fu=function(){function u(){this.root=new uu(null,Xc.ROOT,this),this.size=0}return u.prototype.put=function(e,t){iu.requireNonNull(t,"value");for(var r=this.root,n=0;n<e.segments.length;){var o=e.segments[n++],i=r.findChild(o);if(null===i){r=r.addChild(o);break}r=i}for(;n<e.segments.length;n++)r=r.addChild(e.segments[n]);return r.setValue(t)},u.prototype.contains=function(e){return null!==this.get(e)},u.prototype.get=function(e){var t=this.getEntry(e);return t?t.value:null},u.prototype.getEntry=function(e){var t,r,n=this.root;try{for(var o=au(e.segments),i=o.next();!i.done;i=o.next()){var s=i.value;if(null===(n=n.findChild(s)))return null}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},u.prototype.descendants=function(e){var t=new u,r=this.root,n=t.root,o=e.segments,i=o.length;if(0===i)return this;for(var s=0;s<i-1;++s){var a=o[s];if(null===(r=r.findChild(a)))return hu;n=n.addChild(a)}var c=r.findChild(o[i-1]);return null===c?hu:(n.children.push(c),t.size=c.count(),t)},u.prototype.intersection=function(e){var t=new u,r=this.root,n=t.root,o=e.segments,i=o.length;if(0===i)return this;null!==r.value&&n.setValue(r.value);for(var s=0;s<i-1;++s){var a=o[s];if(null===(r=r.findChild(a)))return t;n=n.addChild(a),null!==r.value&&n.setValue(r.value)}var c=r.findChild(o[i-1]);return null===c||(n.children.push(c),t.size+=c.count()),t},u.prototype.iterator=function(){var r=[this.root];return new lu(function(){for(;;){var e=r.shift();if(void 0===e)return null;for(var t=e.children.length;0<t;--t)r.unshift(e.children[t-1]);if(null!==e.value)return e}})},u.prototype.postOrder=function(){var r=[new pu(this.root)];return new lu(function(){for(;;){var e=r[0];if(void 0===e)return null;var t=e.nextChild();if(null===t){if(r.shift(),null!==e.node.value)return e.node}else{if(0===t.children.length)return t;r.unshift(new pu(t))}}})},u.prototype.toString=function(){for(var e=["{"],t=this.iterator();t.hasNext();)1<e.length&&e.push(", "),e.push(t.next());return e.push("}"),e.join("")},u}(),hu=new(su.JSONPointerMap=fu),du={},yu=this&&this.__extends||(cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}cu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),vu=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(du,"__esModule",{value:!0});var _u=function(){function e(e,t,r,n){this.tokenRange=[],this.accumulatedTokens=0,this.totalTokens=0,this.tokeniser=e,this.base=t,this.startOffset=r,this.nextOffset=n}return e.prototype.total=function(){return this.totalTokens},e.prototype.accumulated=function(){return this.accumulatedTokens},e.prototype.newArray=function(e,t){return new Su(this.tokeniser,this.currentPointer(this.base,this.totalTokens),e,t)},e.prototype.newObject=function(e,t){return new Eu(this.tokeniser,this.currentPointer(this.base,this.totalTokens),e,t)},e.prototype.notEmptyAndSplitBy=function(e){return this.startOffset<e&&0!==this.totalTokens},e.prototype.add=function(e){return this.tokenRange[this.accumulatedTokens]=[this.nextOffset,e],this.nextOffset=e,++this.accumulatedTokens,++this.totalTokens,!1},e.prototype.setNextStart=function(e){this.nextOffset=e},e.prototype.skip=function(){++this.totalTokens,this.accumulatedTokens=0},e.prototype.takeAll=function(e){for(var t=this.totalTokens-this.accumulatedTokens,r=0;r<this.accumulatedTokens;++r){var n=this.tokenRange[r],o=n[0],i=n[1];this.take(e,this.base,t,t+r,o,i-o)}this.accumulatedTokens=0},e.prototype.splitStructureEnd=function(e){e.splitStructureEnd(this.base,this.totalTokens,this.startOffset,this.nextOffset+1-this.startOffset)},e.prototype.toString=function(){return this.base.toString()},e}(),Su=function(o){function e(e,t,r,n){return o.call(this,e,t,r,n)||this}return yu(e,o),e.prototype.take=function(e,t,r,n,o,i){e.accept(t.withIndex(n),o,i)},e.prototype.currentPointer=function(e,t){return e.withIndex(t)},e}(_u),Eu=function(i){function e(e,t,r,n){var o=i.call(this,e,t,r,n)||this;return o.pendingKeyName="",o.pendingKey=!0,o.keys=[],o}return yu(e,i),e.prototype.add=function(e){return this.pendingKey?(this.setNextStart(e),this.pendingKeyName=this.tokeniser.getToken().value,this.pendingKey=!1):(this.keys[this.accumulated()]=this.pendingKeyName,this.pendingKey=!0,i.prototype.add.call(this,e)),!this.pendingKey},e.prototype.take=function(e,t,r,n,o,i){e.accept(t.withKey(this.keys[n-r]),o,i)},e.prototype.currentPointer=function(e){return e.withKey(this.pendingKeyName)},e}(_u),mu=function(t){function e(e){return t.call(this,e,Xc.ROOT,-1,0)||this}return yu(e,t),e.prototype.take=function(e,t,r,n,o,i){if(1<this.total())throw new Error("Invalid JSON: multiple values found");e.accept(t,o,i)},e.prototype.currentPointer=function(e){return e},e}(_u),wu=function(){function e(e){this.parentStack=[],this.tokeniser=new hc.Tokeniser(e.$buffer,e.$offset,e.$length),this.structure=new mu(this.tokeniser),this.startOffset=this.tokeniser.offset(),this.json=e}return e.prototype.spanToNext=function(e,t){return this.spanTo(e,t,!0)},e.prototype.spanTo=function(e,t,r){var n,o;void 0===r&&(r=!1);var i=this.nextByte();if(e<=i)return 0;var s,a=this.parentStack.length,c=r,u=i;do{s=this.tokeniser.nextToken();var p=u;if(u=this.nextByte(),null===s){if(0!==this.parentStack.length)throw new Error("Invalid structure");break}if(s.type===ac.tokens.VALUE)c=this.structure.add(u);else if(s.type===ac.tokens.ARRAY_START)this.parentStack.push(this.structure),this.structure=this.structure.newArray(p,u);else if(s.type===ac.tokens.MAP_START)this.parentStack.push(this.structure),this.structure=this.structure.newObject(p,u);else if(ac.isStructEnd(s.type)){var l=this.parentStack.pop();this.structure.notEmptyAndSplitBy(i)?(this.structure.takeAll(t),this.structure.splitStructureEnd(t),l.skip(),l.setNextStart(u)):l.add(u),this.structure=l,c=!1}}while(c||u<e||this.nextTokenIsStructEnd(s,u));try{for(var f=vu(this.parentStack),h=f.next();!h.done;h=f.next())h.value.takeAll(t)}catch(e){n={error:e}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}return this.structure.takeAll(t),this.parentStack.length-a},e.prototype.nextTokenIsStructEnd=function(e,t){var r=this.tokeniser.getContext();return ac.isStructStart(e.type)?0===r.expected():r.acceptsBreakMarker()&&t<this.json.$length&&(31&this.json.$buffer[this.json.$offset+t])===ac.additional.BREAK||!r.hasRemaining()},e.prototype.nextByte=function(){return this.tokeniser.offset()-this.startOffset},e.prototype.toString=function(){var t=["SpanParser"," next=",this.nextByte().toString()," ["];return this.parentStack.forEach(function(e){t.push(e.toString()),t.push(", ")}),t.push(this.structure.toString()),t.push("]"),t.join("")},e}();du.SpanParser=wu;var gu={};(function(i){"use strict";Object.defineProperty(gu,"__esModule",{value:!0});var p=function(){function e(e){this.splitStructures=e}return e.prototype.accept=function(e,t,r){this.last=e,this.lastStart=t,this.lastLength=r},e.prototype.foundLast=function(){return void 0!==this.last},e.prototype.consumeLast=function(e){e.accept(this.last,this.lastStart,this.lastLength)},e.prototype.splitStructureEnd=function(e,t,r,n){this.splitStructures.put(e,{start:r,length:n,elements:t})},e}();function a(e,t,r,n){return e.equalBytes(t.$buffer,t.$offset+r,n)}var o=function(){function e(e,t,r,n,o,i){var s=this;this.removedSplitStructures=new su.JSONPointerMap,this.insertedSplitStructures=new su.JSONPointerMap,this.oldOffset=0,this.newOffset=0,this.pendingRemove=null,this.pendingInsert=null,this.inserter={accept:function(e,t,r){null!==s.pendingRemove&&s.pendingRemove.equalIgnoringIndexes(e)&&a(s.pendingRemoveValue,s.newValue,t,r)?(s.pendingRemove=null,s.pendingRemoveValue=null):(s.addInsert(e,s.partOf(s.newValue,t,r)),s.addRemove(null,null))},splitStructureEnd:function(e,t,r,n){s.insertedSplitStructures.put(e,{start:r,length:n,elements:t})}},this.remover={accept:function(e,t,r){null!==s.pendingInsert&&s.pendingInsert.equalIgnoringIndexes(e)&&a(s.pendingInsertValue,s.oldValue,t,r)?(s.pendingInsert=null,s.pendingInsertValue=null):(s.addRemove(e,s.copyPartOf(s.oldValue,t,r)),s.addInsert(null,null))},splitStructureEnd:function(e,t,r,n){s.removedSplitStructures.put(e,{start:r,length:n,elements:t})}},this.oldParser=new du.SpanParser(e),this.newParser=new du.SpanParser(t),this.oldValue=e,this.newValue=t,this.inserted=r,this.removed=n,this.partOf=o,this.copyPartOf=i}return e.prototype.match=function(e,t){return this.handleDelete(this.oldOffset,e-this.oldOffset),this.handleMatch(e,t),!0},e.prototype.handleDelete=function(e,t){this.checkInvariants();var r=e+t;this.oldParser.nextByte()<r&&(0!==this.oldParser.spanTo(r,this.remover)||this.oldParser.nextByte()>r)&&this.newParser.spanToNext(this.newOffset+1,this.inserter)},e.prototype.handleMatch=function(e,t){this.checkInvariants();var r=this.newOffset,n=e+t;this.newOffset+=t,this.oldOffset=n;var o=this.oldParser.nextByte(),i=this.newParser.nextByte();r<i&&o===e?this.oldParser.spanToNext(e+1,this.remover):e<o&&i===r&&this.newParser.spanToNext(r+1,this.inserter);var s=new p(this.removedSplitStructures),a=new p(this.insertedSplitStructures);this.oldParser.spanTo(n,s),this.newParser.spanTo(this.newOffset,a);var c=s.foundLast()&&this.oldParser.nextByte()>n,u=a.foundLast()&&this.newParser.nextByte()>this.newOffset;c&&u&&(s.consumeLast(this.remover),a.consumeLast(this.inserter))},e.prototype.insert=function(e){return this.checkInvariants(),this.newOffset+=e.length,this.newParser.nextByte()<this.newOffset&&(0!==this.newParser.spanTo(this.newOffset,this.inserter)||this.newParser.nextByte()>this.newOffset)&&this.oldParser.spanToNext(this.oldOffset+1,this.remover),!0},e.prototype.end=function(){this.handleDelete(this.oldOffset,this.oldValue.$length-this.oldOffset),this.addInsert(null,null),this.addRemove(null,null),this.replaceFullRemovedStructures(),this.replaceFullInsertedStructures()},e.prototype.addInsert=function(e,t){null!==this.pendingInsert&&this.inserted.put(this.pendingInsert,this.pendingInsertValue),this.pendingInsert=e,this.pendingInsertValue=t},e.prototype.addRemove=function(e,t){null!==this.pendingRemove&&this.removed.put(this.pendingRemove,this.pendingRemoveValue),this.pendingRemove=e,this.pendingRemoveValue=t},e.prototype.noChange=function(){},e.prototype.checkInvariants=function(){if(this.oldParser.nextByte()<this.oldOffset||this.newParser.nextByte()<this.newOffset)throw new Error("Invalid binary delta")},e.prototype.replaceFullRemovedStructures=function(){for(var e=this.removedSplitStructures.postOrder();e.hasNext();){var t=e.next(),r=t.value,n=this.removed.getEntry(t.pointer);null!==n&&n.numberOfChildren()===r.elements&&(n.setValue(this.copyPartOf(this.oldValue,r.start,r.length)),n.removeDescendants())}},e.prototype.replaceFullInsertedStructures=function(){for(var e=this.insertedSplitStructures.postOrder();e.hasNext();){var t=e.next(),r=t.value,n=this.inserted.getEntry(t.pointer);null!==n&&n.numberOfChildren()===r.elements&&(n.setValue(this.partOf(this.newValue,r.start,r.length)),n.removeDescendants())}},e}(),t=function(){function t(e){this.entries=[];for(var t=(this.parts=e).iterator();t.hasNext();){var r=t.next();this.entries.push({key:r.pointer.toString(),value:r.value.get()})}this.length=this.entries.length}return t.prototype.get=function(e){return this.parts.get(Xc.JSONPointer.parse(e)).get()},t.prototype.entrySet=function(){return this.entries},t.prototype.containsKey=function(e){return this.parts.contains(Xc.JSONPointer.parse(e))},t.prototype.descendants=function(e){return new t(this.parts.descendants(Xc.JSONPointer.parse(e)))},t.prototype.intersection=function(e){return new t(this.parts.intersection(Xc.JSONPointer.parse(e)))},t}(),e=function(){function e(e,t,r,n){this.insertedMap=new su.JSONPointerMap,this.removedMap=new su.JSONPointerMap,this.factory=e,void 0!==n?n.visit(new o(t,r,this.insertedMap,this.removedMap,this.partOf.bind(this),this.copyPartOf.bind(this))):(this.insertedMap.put(Xc.ROOT,t),this.removedMap.put(Xc.ROOT,r))}return e.prototype.partOf=function(e,t,r){return new this.factory(e.$buffer,e.$offset+t,r)},e.prototype.copyPartOf=function(e,t,r){var n=e.$offset+t,o=i.alloc(r);return e.$buffer.copy(o,0,n,n+r),new this.factory(o,0,r)},e.prototype.removed=function(){return new t(this.removedMap)},e.prototype.inserted=function(){return new t(this.insertedMap)},e.prototype.hasChanges=function(){return 0!==this.removedMap.size||0!==this.insertedMap.size},e.prototype.toString=function(){return["REMOVE ",this.removedMap," INSERT ",this.insertedMap].join("")},e}();gu.JSONDeltaImpl=e}).call(this,t({}).Buffer);var Tu,Ou={},Iu=this&&this.__extends||(Tu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Tu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Ou,"__esModule",{value:!0});var Ru=new mc.Encoder;function bu(e){return e instanceof Au?e:new Au(Ru.encode(e).flush())}function Cu(e,t){return t instanceof fc.Int64Impl?t.toString():t}var Au=function(n){function o(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.length),n.call(this,e,t,r)||this}return Iu(o,n),o.toString=function(){return"JSONImpl"},o.from=function(e){return bu(e)},o.prototype.get=function(){return new Ec.Decoder(this.$buffer,this.$offset,this.$length).nextValue()},o.prototype.diff=function(e,t){var r=this.binaryDiff(e);return"json"===t?new gu.JSONDeltaImpl(o,e,this,r):r},o.prototype.binaryDiff=function(e){return Nu.diff(e,this)},o.prototype.jsonDiff=function(e){return this.diff(e,"json")},o.prototype.apply=function(e){return Nu.apply(this,e)},o.prototype.toString=function(){return JSON.stringify(this.get())},o.prototype.toJsonString=function(){return JSON.stringify(this.get(),Cu)},o}(qc.BytesImpl);Ou.JSONImpl=Au;var Pu,Nu=new Bc.BinaryDeltaTypeImpl(Au,bu,Wc.identity),Mu={},Lu=this&&this.__extends||(Pu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Pu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Mu,"__esModule",{value:!0});var Du=function(t){function e(){var e=t.call(this,"json",Ou.JSONImpl,Ou.JSONImpl,Ou.JSONImpl.from,Wc.identity,[],!0)||this;return e.JSON=Ou.JSONImpl,e}return Lu(e,t),e.prototype.fromJsonString=function(e){return Ou.JSONImpl.from(JSON.parse(e))},e.prototype.from=function(e){return Ou.JSONImpl.from(e)},e.prototype.validate=function(){},e}(Gc.AbstractDataType);Mu.JSONDataTypeImpl=Du;var ju={};(function(e){"use strict";var n,t=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ju,"__esModule",{value:!0});var c=new mc.Encoder,u=new qc.BytesImpl(e.from([246])),r=function(a){function e(e,t,r,n,o){var i=this,s=function(e){return r(e,c),new qc.BytesImpl(c.flush())};return(i=a.call(this,e,t,qc.BytesImpl,s,function(e){return u.equals(e)?null:new Ec.Decoder(e.$buffer,e.$offset,e.$length).nextValueExpecting(n)},[Ou.JSONImpl],o)||this).serialise=r,i.fromValue=s,i}return t(e,a),e.prototype.writeValue=function(e){return null==e?u.asBuffer():(this.serialise(e,c),c.flush())},e.prototype.validate=function(){},e.prototype.from=function(e){return e.$buffer?e:this.fromValue(e)},e}(Gc.AbstractDataType);ju.PrimitiveDataType=r}).call(this,t({}).Buffer);var Uu,xu={},Bu=this&&this.__extends||(Uu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Uu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function ku(e,t){null==e?t.encode(null):t.writeDouble(e)}Object.defineProperty(xu,"__esModule",{value:!0});var qu=function(e){function t(){return e.call(this,"double",Number,ku,Ec.isDouble,!1)||this}return Bu(t,e),t}(ju.PrimitiveDataType);xu.DoubleDataTypeImpl=qu;var Vu,Fu={},Gu=this&&this.__extends||(Vu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Vu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function Hu(e,t){null==e?t.encode(null):t.writeInt64(new fc.Int64Impl(e))}Object.defineProperty(Fu,"__esModule",{value:!0});var Wu=function(t){function e(){var e=t.call(this,"int64",fc.Int64Impl,Hu,Ec.isInt64,!1)||this;return e.Int64=fc.Int64Impl,e}return Gu(e,t),e}(ju.PrimitiveDataType);Fu.Int64DataTypeImpl=Wu;var Yu,zu={},$u=this&&this.__extends||(Yu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Yu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function Qu(e,t){null==e?t.encode(null):t.encode(e.toString())}Object.defineProperty(zu,"__esModule",{value:!0});var Ku=function(e){function t(){return e.call(this,"string",String,Qu,Ec.isString,!0)||this}return $u(t,e),t}(ju.PrimitiveDataType);zu.StringDataTypeImpl=Ku;var Ju={};function Xu(e,t,r,n,o){if(0===r)return 0;if(e[0]===n)return 1;for(var i=1,s=t;s<t+r;s++)e[s]===o&&i++;return i}Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.RECORD_DELIMITER=1,Ju.FIELD_DELIMITER=2,Ju.EMPTY_FIELD=3,Ju.RECORD_MU=4,Ju.FIELD_MU=5,String.fromCharCode(Ju.RECORD_DELIMITER),String.fromCharCode(Ju.FIELD_DELIMITER),String.fromCharCode(Ju.EMPTY_FIELD),String.fromCharCode(Ju.RECORD_MU),String.fromCharCode(Ju.FIELD_MU),Ju.bytesToString=function(e,t,r){for(var n="",o=t;o<t+r;++o)switch(e[o]){case Ju.FIELD_DELIMITER:n+="<FD>";break;case Ju.RECORD_DELIMITER:n+="<RD>";break;case Ju.EMPTY_FIELD:n+="<EF>";break;case Ju.FIELD_MU:n+="<FM>";break;case Ju.RECORD_MU:n+="<RM>";break;default:n+=String.fromCharCode(e[o])}return n},Ju.recordCount=function(e,t,r){return Xu(e,t,r,Ju.RECORD_MU,Ju.RECORD_DELIMITER)},Ju.fieldCount=function(e,t,r){return Xu(e,t,r,Ju.FIELD_MU,Ju.FIELD_DELIMITER)},Ju.findDelimiter=function(e,t,r,n){for(var o=t;o<r;o++)if(e[o]===n)return o;return r},Ju.isSingleEmptyRecord=function(e,t,r){return 1===r&&e[t]===Ju.RECORD_MU},Ju.recordIsSingleEmptyField=function(e,t,r){return 1===r&&(e[t]===Ju.FIELD_MU||e[t]===Ju.EMPTY_FIELD)};var Zu={};(function(o){"use strict";Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.toBuffer=function(e){var t=new Ba.BufferOutputStream;return function(e,r){if(0!==e.length)if(1!==e.length||0!==e[0].length){var n=!1;e.forEach(function(e){if(n?r.write(Ju.RECORD_DELIMITER):n=!0,1===e.length&&""===e[0])r.write(Ju.FIELD_MU);else{var t=!1;e.forEach(function(e){t?r.write(Ju.FIELD_DELIMITER):t=!0,null!=e&&r.writeMany(o.from(e))})}})}else r.write(Ju.RECORD_MU)}(e,t),t.getBuffer()}}).call(this,t({}).Buffer);var ep={};function tp(e,t,r){var n=e.getAbsoluteIndex(r);if(n>t.length-1)throw new Error("Index '"+r+"' does not have a matching entry for variable occurrence record: '"+e.name+"'");return n}function rp(e,t,r){var n=e.getAbsoluteIndex(r);if(n>t.length-1)throw new Error("Index '"+r+"' does not have a matching entry for variable occurrence field: '"+e.name+"'");return n}Object.defineProperty(ep,"__esModule",{value:!0}),ep.resolveRecordIndex=tp,ep.resolveFieldIndex=rp;var np=function(){function e(e,t){this.recordV2Constructor=e,this.modelSchema=t}return e.prototype.schema=function(){return this.modelSchema},e.prototype.asValue=function(){return new this.recordV2Constructor(Zu.toBuffer(this.model()))},e.prototype.get=function(e,t,r,n){var o,i;switch(void 0===t&&(t=0),void 0===n&&(n=0),arguments.length){case 1:var s=this.parseKey(e);e=s.recordName,i=s.recordIndex,o=s.fieldName,n=s.fieldIndex;break;case 2:o=t,i=0;break;default:o=r,i=t}var a=this.modelSchema.getRecord(e),c=a.getField(o),u=this.getRecord(a,i);return u[rp(c,u,n)]},e.prototype.recordCount=function(e){var t=this.modelSchema.getRecord(e);return t.isVariable?this.model().length-t.getIndex():t.min},e.prototype.fieldCount=function(e,t,r){var n=this.modelSchema.getRecord(e),o=n.getField(r);return o.isVariable?this.getRecord(n,t).length-o.getIndex():o.min},e.prototype.getRecord=function(e,t){var r=this.model();return r[tp(e,r,t)]},e.prototype.parseKey=function(e){var t,r,n,o=e.split(".",2);if(1===o.length)t=this.modelSchema.firstRecord().name,n=o[r=0];else{var i=this.parseKeyPart(o[0].trim());t=i[0],r=i[1],n=o[1]}var s=this.parseKeyPart(n);return{recordName:t,recordIndex:r,fieldName:s[0],fieldIndex:s[1]}},e.prototype.parseKeyPart=function(e){if(0===e.length)throw new Error("No name specified");var t=e.indexOf("(");if(-1===t)return[e,0];if(0===t)throw new Error("No name specified");var r=e.indexOf(")");if(-1===r||r<t)throw new Error("'(' found without closing ')");if(r<e.length-1)throw new Error("Characters found after closing ')");return[e.substring(0,t),parseInt(e.substring(t+1,r),10)]},e}();ep.AbstractRecordModel=np;var op,ip,sp={};Object.defineProperty(sp,"__esModule",{value:!0}),(ip=op=sp.Type||(sp.Type={})).DECIMAL="DECIMAL",ip.INTEGER="INTEGER",ip.STRING="STRING";var ap=function(){function e(e,t,r,n,o,i){this.name=e,this.type=t,this.min=r,this.max=n,this.scale=i,this.index=o,this.isVariable=r!==n}return e.prototype.getAbsoluteIndex=function(e){if(e<0||-1!==this.max&&e>this.max-1)throw new Error("Invalid index '"+e+"' for field '"+this.name+"'");return this.index+e},e.prototype.toString=function(){var e="Name="+this.name+", Type="+this.type;return this.min===this.max?e+=", Occurs="+this.min:(e+=", Min="+this.min+", Max=",-1===this.max?e+="Unlimited":e+=this.max),this.type===op.DECIMAL&&(e+=", Scale="+this.scale),"Field ["+e+"]"},e.prototype.modelValue=function(){switch(this.type){case op.DECIMAL:return function(e){switch(e.scale){case void 0:case 1:return"0.0";case 2:return"0.00";case 3:return"0.000";default:for(var t="0.",r=0;r<e.scale;++r)t+="0";return t}}(this);case op.INTEGER:return"0";case op.STRING:default:return""}},e.prototype.toJSON=function(){var e={name:this.name,type:this.type,min:this.min,max:this.max};return this.type===op.DECIMAL&&(e.scale=this.scale),e},e}();sp.FieldImpl=ap,sp.normalise=function(e,t){switch(e.type){case op.DECIMAL:var r=parseFloat(t);if(Number.isNaN(r))throw new Error("Invalid decimal value: '"+t+"'");return r.toFixed(e.scale);case op.INTEGER:var n=parseInt(t,10),o=n.toString();if(Number.isNaN(n)||-1<o.indexOf("."))throw new Error("Invalid integer value: '"+t+"'");return o;case op.STRING:return t;default:return""}};var cp,up={},pp=this&&this.__extends||(cp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}cp(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),lp=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};function fp(e,t,r){var n,o,i=r.length,s=e.lastField(),a=s.max,c=s.index;if(-1!==a&&c+a<i)throw new Error("Too many occurrences of field '"+e.name+"("+t+")."+s.name+"'");if(i<c+s.min)throw new Error("Too few field occurrences in record '"+e.name+"("+t+")'");try{for(var u=lp(e.fields),p=u.next();!p.done;p=u.next()){for(var l=p.value,f=l.index,h=l.min,d=f;d<f+h;++d)hp(e,t,l,d-f,r[d]);if(l.isVariable)for(d=f+h;d<i;d++)hp(e,t,l,d-f,r[d])}}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}}function hp(e,t,r,n,o){try{sp.normalise(r,iu.requireNonNull(o,"FieldData"))}catch(o){throw new Error("Invalid value for field '"+e.name+"("+t+")."+r.name+"("+n+")")}}Object.defineProperty(up,"__esModule",{value:!0});var dp=function(i){function e(e,t,r,n){var o=i.call(this,e,t)||this;return n&&function(e,t){var r,n,o=t.length,i=e.lastRecord(),s=i.index,a=i.max;if(-1!==a&&s+a<o)throw new Error("Too many occurrences of record '"+i.name+"'");if(o<s+i.min)throw new Error("Too few record occurrences");var c=e.records();try{for(var u=lp(c),p=u.next();!p.done;p=u.next()){for(var l=p.value,f=l.index,h=l.min,d=f;d<f+h;++d)fp(l,d-f,t[d]);if(l.isVariable)for(d=f+h;d<o;++d)fp(l,d-f,t[d])}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}(t,r),o.recordData=r,o}return pp(e,i),e.prototype.model=function(){return Array.from(this.recordData)},e}(ep.AbstractRecordModel);up.RecordModelImpl=dp;var yp={};function vp(e,t,r,n,o){var i=n-r;return 0===o.length&&1===i&&e[r]===Ju.FIELD_MU?(t.push([""]),!0):(o.push(e.toString("utf8",r,n)),!1)}Object.defineProperty(yp,"__esModule",{value:!0}),yp.parse=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=e.length),0===r)return[];if(1===r&&e[t]===Ju.RECORD_MU)return[[]];for(var n=[],o=[],s=t,i=t;i<r;++i)e[i]===Ju.RECORD_DELIMITER?(a=e,c=n,l=o,f=void 0,f=!1,(u=s)<(p=i)?f=vp(a,c,u,p,l):0<u&&a[u-1]===Ju.FIELD_DELIMITER&&l.push(""),f||c.push(Array.from(l)),l.length=0,s=i+1):e[i]===Ju.FIELD_DELIMITER&&(vp(e,n,s,i,o),s=i+1);var a,c,u,p,l,f;return function(e,t,r,n,o){if(s<n)vp(e,t,s,n,o);else{var i=e[n-1];i===Ju.RECORD_DELIMITER?t.push([]):i===Ju.FIELD_DELIMITER&&o.push("")}o.length&&t.push(Array.from(o))}(e,n,0,r,o),n};var _p={};(function(r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(_p,"__esModule",{value:!0});var f,e,t=function(e){function t(){return e.call(this,r.from([]))||this}return o(t,e),t.prototype.changes=function(){return[]},t}(qc.BytesImpl);_p.NO_CHANGE=new t,(e=f=_p.Type||(_p.Type={})).FIELD_CHANGED="FIELD_CHANGED",e.FIELDS_ADDED="FIELDS_ADDED",e.FIELDS_REMOVED="FIELDS_REMOVED",e.RECORDS_ADDED="RECORDS_ADDED",e.RECORDS_REMOVED="RECORDS_REMOVED";var h=function(){function e(e,t,r,n,o){this.type=e,this.recordName=t,this.recordIndex=r,this.fieldName=n,this.fieldIndex=o;var i=t+"("+r+")";e!==f.RECORDS_REMOVED&&e!==f.RECORDS_ADDED&&(i+="."+n+"("+o+")"),this.key=i}return e.prototype.toString=function(){return this.type+" "+this.key},e}(),i=function(s){function e(e,t,r,n,o){void 0===t&&(t=0),void 0===r&&(r=e.length);var i=s.call(this,e,t,r)||this;return i.recordChanges=n,i.fieldChanges=o,i}return o(e,s),e.prototype.changes=function(e){var t=this,r=yp.parse(this.$buffer,this.$offset,this.$length),n=0,o=[];return e.records().forEach(function(e){if(r.length<n+e.min)throw new Error("Insufficient records of type "+e.name+" in delta for schema");n=e.isVariable?t.processVariableRecordChanges(e,n,r,o):t.processFixedRecordChanges(e,n,r,o)}),o},e.prototype.processFixedRecordChanges=function(e,t,r,n){for(var o=t,i=0;i<e.min;++i)this.processRecordChanges(o,e,i,r[o],n),o++;return o},e.prototype.processVariableRecordChanges=function(e,t,r,n){var o=r.length,i=e.max;if(-1!==i&&t+i<o)throw new Error("Too many records of type "+e.name+" in delta for schema");for(var s=t,a=this.recordChanges&&this.recordChanges[0]?this.recordChanges[1]:o,c=0;s<a;s++,c++)this.processRecordChanges(s,e,c,r[s],n);return this.recordChanges&&n.push(new h(this.recordChanges[0]?f.RECORDS_ADDED:f.RECORDS_REMOVED,e.name,this.recordChanges[1]-t,"",0)),s},e.prototype.processRecordChanges=function(t,r,n,o,i){var s=this,a=0;r.fields.forEach(function(e){a=e.isVariable?s.processVariableFieldChanges(r,n,t,e,a,o,i):s.processFixedFieldChanges(r,n,e,a,o,i)})},e.prototype.processFixedFieldChanges=function(e,t,r,n,o,i){for(var s=o.length,a=n,c=0;c<r.min;++c){if(s<=a)throw new Error("Insufficient fields of type "+r.name+" in delta for schema record "+e.name);""!==o[a]&&i.push(new h(f.FIELD_CHANGED,e.name,t,r.name,c)),a++}return a},e.prototype.processVariableFieldChanges=function(e,t,r,n,o,i,s){var a=i.length,c=o;if(a<c+n.min)throw new Error("Insufficient fields of type "+n.name+" in delta for schema record "+e.name);for(var u=this.fieldChanges[r],p=u?u[1]:a,l=0;c<p;c++,l++)""!==i[c]&&s.push(new h(f.FIELD_CHANGED,e.name,t,n.name,l));return u&&s.push(new h(u[0]?f.FIELDS_ADDED:f.FIELDS_REMOVED,e.name,t,n.name,u[1])),c},e.prototype.toString=function(){return Ju.bytesToString(this.$buffer,this.$offset,this.$length)},e}(qc.BytesImpl);_p.RecordV2DeltaImpl=i}).call(this,t({}).Buffer);var Sp={};(function(y){"use strict";var n,e=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Sp,"__esModule",{value:!0});var v=function(){function e(){this.delta=new Ba.BufferOutputStream,this.changed=!1,this.recordChanges=null,this.fieldChanges={}}return e.prototype.write=function(e,t,r){void 0!==t&&void 0!==r?this.delta.writeMany(e,t,r):this.delta.write(e)},e.prototype.getDelta=function(){return this.delta.getBuffer()},e.prototype.size=function(){return this.delta.count},e.prototype.hasChanges=function(){return this.changed},e.prototype.setChanged=function(){this.changed=!0},e.prototype.setRecordsChanged=function(e,t){this.recordChanges=[e,t],this.changed=!0},e.prototype.getRecordChanges=function(){return this.recordChanges},e.prototype.setFieldsAdded=function(e,t){this.fieldChanges[e]=[!0,t],this.changed=!0},e.prototype.setFieldsRemoved=function(e,t){this.fieldChanges[e]=[!1,t],this.changed=!0},e.prototype.getFieldChanges=function(){return this.fieldChanges},e}();function _(e,t,r,n,o,i,s,a){if(0!==s){if(!Ju.recordIsSingleEmptyField(o,i,s))return 0===n?(a.write(o,i,s),void a.setFieldsAdded(e,0)):void(Ju.recordIsSingleEmptyField(t,r,n)?(h=e,v=s,_=a,(S=(d=o)[y=i])===Ju.EMPTY_FIELD?_.write(d,y+1,v-1):(_.write(d,y,v),S!==Ju.FIELD_DELIMITER&&_.setChanged()),1<Ju.fieldCount(d,y,v)&&_.setFieldsAdded(h,1)):function(e,t,r,n,o,i,s,a){for(var c=Ju.fieldCount(t,r,n),u=Ju.fieldCount(o,i,s),p=Math.min(c,u),l=r,f=r,h=i,d=i,y=a.size(),v=0;v<p;++v)f=Ju.findDelimiter(t,f,r+n,Ju.FIELD_DELIMITER),d=Ju.findDelimiter(o,d,i+s,Ju.FIELD_DELIMITER),0<v&&a.write(Ju.FIELD_DELIMITER),m=a,function(e,t,r,n,o,i){if(r===i){if(0===r||function(e,t,r,n,o){for(var i=0;i<o;++i)if(e[t+i]!==r[n+i])return!1;return!0}(e,t,n,o,r))return!0}else{if(1===r&&e[t]===Ju.EMPTY_FIELD&&0===i)return!0;if(1===i&&n[o]===Ju.EMPTY_FIELD&&0===r)return!0}return!1}(t,l,f-l,_=o,S=h,E=d-h)||(0===E?m.write(Ju.EMPTY_FIELD):m.write(_,S,E),m.setChanged()),l=++f,h=++d;var _,S,E,m;u!==c&&(c<u?(a.write(o,h-1,i+s-h+1),a.setFieldsAdded(e,p)):a.setFieldsRemoved(e,p)),1===u&&y===a.size()&&a.write(Ju.FIELD_MU)}(e,t,r,n,o,i,s,a));c=e,u=t,p=r,l=n,f=a,Ju.recordIsSingleEmptyField(u,p,l)?f.write(Ju.FIELD_MU):(1<Ju.fieldCount(u,p,l)&&f.setFieldsRemoved(c,1),f.write(Ju.EMPTY_FIELD),f.setChanged())}else 0!==n&&a.setFieldsRemoved(e,0);var c,u,p,l,f,h,d,y,v,_,S}function r(e){return e instanceof t?e:new t(e)}var t=function(n){function t(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.length),n.call(this,e,t,r)||this}return e(t,n),t.toString=function(){return"RecordV2Impl"},t.from=function(e){return r(e)},t.prototype.apply=function(e){return o.apply(this,e)},t.prototype.toString=function(){return JSON.stringify(this.asRecords())},t.prototype.asRecords=function(){return yp.parse(this.$buffer,this.$offset,this.$length)},t.prototype.asFields=function(){return this.asRecords().reduce(function(e,t){return e.concat(t)},[])},t.prototype.asModel=function(e){return new up.RecordModelImpl(t,e,this.asRecords(),!1)},t.prototype.asValidatedModel=function(e){return new up.RecordModelImpl(t,e,this.asRecords(),!0)},t.prototype.binaryDiff=function(e){return o.diff(e,this)},t.prototype.diff=function(e){var t,r,n,o,i,s,a=e.$buffer,c=e.$offset,u=e.$length,p=this.$buffer,l=this.$offset,f=this.$length;if(0===f)return 0===u?_p.NO_CHANGE:new _p.RecordV2DeltaImpl(y.from([]),0,0,[!1,0],{});if(Ju.isSingleEmptyRecord(p,l,f))return Ju.isSingleEmptyRecord(a,c,u)?_p.NO_CHANGE:function(e){switch(Ju.recordCount(a,c,u)){case 0:return new _p.RecordV2DeltaImpl(y.from([Ju.RECORD_MU]),0,1,[!0,0],{});case 1:return new _p.RecordV2DeltaImpl(y.from([Ju.RECORD_MU]),0,1,null,{0:[!1,0]});default:return new _p.RecordV2DeltaImpl(y.from([Ju.RECORD_MU]),0,1,[!1,1],{0:[!1,0]})}}();if(0===u)return t=p,r=l,n=f,new _p.RecordV2DeltaImpl(t,r,n,[!0,0],{});if(Ju.isSingleEmptyRecord(a,c,u))return o=p,i=l,s=f,1===Ju.recordCount(o,i,s)?new _p.RecordV2DeltaImpl(o,i,s,null,{0:[!0,0]}):new _p.RecordV2DeltaImpl(o,i,s,[!0,1],o[0]===Ju.RECORD_DELIMITER?{}:{0:[!0,0]});var h=function(e,t,r,n,o,i){for(var s=new v,a=Ju.recordCount(e,t,r),c=Ju.recordCount(n,o,i),u=Math.min(a,c),p=t,l=t,f=o,h=o,d=0;d<u;++d)l=Ju.findDelimiter(e,l,t+r,Ju.RECORD_DELIMITER),h=Ju.findDelimiter(n,h,o+i,Ju.RECORD_DELIMITER),0<d&&s.write(Ju.RECORD_DELIMITER),_(d,e,p,l-p,n,f,h-f,s),p=++l,f=++h;return c!==a&&(a<c&&s.write(n,f-1,o+i-f+1),s.setRecordsChanged(a<c,u)),s}(a,c,u,p,l,f);if(h.hasChanges()){var d=h.getDelta();return new _p.RecordV2DeltaImpl(d,0,d.length,h.getRecordChanges(),h.getFieldChanges())}return _p.NO_CHANGE},t}(qc.BytesImpl);Sp.RecordV2Impl=t;var o=new Bc.BinaryDeltaTypeImpl(t,r,Wc.identity)}).call(this,t({}).Buffer);var Ep={};Object.defineProperty(Ep,"__esModule",{value:!0});var mp=function(){function e(){this.records=[]}return e.prototype.addFields=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(1<arguments.length?t.unshift(e):t=e,t){var n=this.records.length?this.records[this.records.length-1]:[];this.records[Math.max(this.records.length-1,0)]=n.concat(t)}return this},e.prototype.addRecord=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return 1<arguments.length?t.unshift(e):t=e,t?this.records.push([].concat(t)):this.records.push([]),this},e.prototype.clear=function(){return this.records=[],this},e.prototype.build=function(){return new Sp.RecordV2Impl(Zu.toBuffer(this.records))},e}();Ep.RecordV2BuilderImpl=mp;var wp={};Object.defineProperty(wp,"__esModule",{value:!0});var gp=function(){function e(e,t,r,n,o){var i=this;this.name=e,this.min=t,this.max=r,this.index=n,this.isVariable=t!==r,this.fields=o,this.fieldsMap={},o.forEach(function(e){i.fieldsMap[e.name]=e})}return e.prototype.getFields=function(){return[].concat(this.fields)},e.prototype.getField=function(e){var t=this.fieldsMap[e];if(t)return t;throw new Error("Record '"+this.name+"' has no field named '"+e+"'")},e.prototype.lastField=function(){return this.fields[this.fields.length-1]},e.prototype.createModel=function(){var r=[];return this.fields.forEach(function(e){for(var t=0;t<e.min;++t)r.push(e.modelValue())}),r},e.prototype.getAbsoluteIndex=function(e){if(e<0||-1!==this.max&&e>this.max-1)throw new Error("Invalid index '"+e+"' for record '"+this.name+"'");return this.index+e},e.prototype.toString=function(){var e="Name="+this.name;return this.min===this.max?e+=", Occurs="+this.min:(e+=", Min="+this.min+", Max=",-1===this.max?e+="Unlimited":e+=this.max),"Record ["+(e+=", Fields="+this.fields)+"]"},e}();wp.RecordImpl=gp,wp.toJSON=function(e){return{fields:e.fields.map(function(e){return e.toJSON()}),name:e.name,min:e.min,max:e.max}};var Tp,Op={},Ip=this&&this.__extends||(Tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Tp(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Op,"__esModule",{value:!0});var Rp=function(n){function e(e,t){var r=n.call(this,e,t)||this;return r.recordData=t.createModel(),r}return Ip(e,n),e.prototype.model=function(){return this.recordData},e.prototype.set=function(e,t,r,n,o){var i,s;switch(void 0===n&&(n=0),arguments.length){case 2:o=t;var a=this.parseKey(e);e=a.recordName,i=a.recordIndex,s=a.fieldName,n=a.fieldIndex;break;case 3:o=r,s=t,i=0;break;case 5:i=t,s=r;break;default:i=0,s=""}var c=this.schema().getRecord(e),u=this.getRecord(c,i),p=c.getField(s);return u[ep.resolveFieldIndex(p,u,n)]=sp.normalise(p,o),this},e.prototype.add=function(e,t){for(var r,n,o,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(2<arguments.length&&"number"==typeof t)o=t,i=i.slice(2),r=this.schema().getRecord(e),n=this.getRecord(r,o);else{if(r=this.schema().lastRecord(),!(this.recordData.length>r.index))throw new Error("Variable record '"+r.name+"' has no occurrences to add a field to");n=this.recordData[this.recordData.length-1]}return this.addValuesToRecord(r,n,i),this},e.prototype.addRecord=function(){var e=this.schema().lastRecord();if(!e.isVariable)throw new Error("Record '"+e.name+"' is not variable");var t=e.max;if(-1!==t&&this.recordData.length-e.index>=t)throw new Error("Record '"+e.name+"' already has maximum number of occurrences");return this.recordData.push(e.createModel()),this},e.prototype.removeRecord=function(e){var t=this.schema().lastRecord();if(!t.isVariable)throw new Error("Record '"+t.name+"' is not variable");var r=ep.resolveRecordIndex(t,this.recordData,e);if(this.recordData.length-t.index-1<t.min)throw new Error("Removing an occurrence of record '"+t.name+"' would violate the minimum number of occurrences");return this.recordData.splice(r,1),this},e.prototype.removeField=function(e,t,r){var n=this.schema().getRecord(e),o=this.getRecord(n,t),i=n.lastField();if(!i.isVariable)throw new Error("Field '"+i.name+"' is not a variable field");var s=ep.resolveFieldIndex(i,o,r);if(o.length-i.index-1<i.min)throw new Error("Removing an occurrence of field '"+i.name+"' would violate the minimum number of occurrences");return o.splice(s,1),this},e.prototype.addValuesToRecord=function(e,t,r){var n=e.lastField();if(!n.isVariable)throw new Error("Final field of record '"+e.name+"' is not variable");var o=n.max;if(-1!==o&&t.length-n.index+r.length>o)throw new Error("Adding values would exceed maximum number of field occurrences");r.forEach(function(e){t.push(sp.normalise(n,e))})},e}(ep.AbstractRecordModel);Op.MutableRecordModelImpl=Rp;var bp={};Object.defineProperty(bp,"__esModule",{value:!0});var Cp=function(){function e(e,t){var r=this;this.recordsMap={},this.recordV2Constructor=e,(this.recordsArray=t).forEach(function(e){r.recordsMap[e.name]=e})}return e.prototype.getRecord=function(e){var t=this.recordsMap[e];if(t)return t;throw new Error("Record '"+e+"' is not known")},e.prototype.getRecords=function(){return[].concat(this.recordsArray)},e.prototype.records=function(){return this.recordsArray},e.prototype.firstRecord=function(){return this.recordsArray[0]},e.prototype.lastRecord=function(){return this.recordsArray[this.recordsArray.length-1]},e.prototype.createMutableModel=function(){return new Op.MutableRecordModelImpl(this.recordV2Constructor,this)},e.prototype.createModel=function(){var n=[];return this.recordsArray.forEach(function(e){var t=e.createModel();if(0<e.min)for(var r=0;r<e.min;++r)n.push([].concat(t))}),n},e.prototype.asJSON=function(){return JSON.stringify({records:this.recordsArray.map(wp.toJSON)})},e.prototype.toString=function(){return"Schema [Records="+this.recordsArray+"]"},e}();bp.SchemaImpl=Cp;var Ap={},Pp=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};function Np(e,t,r){if(t<0)throw new Error("'"+e+"' has invalid 'min' value '"+t+"'");if(-1!==r&&(r<1||r<t))throw new Error("'"+e+"' has invalid 'max' value '"+r+"'")}Object.defineProperty(Ap,"__esModule",{value:!0});var Mp=function(){function e(e){this.records=[],this.recordV2Constructor=e}return e.prototype.record=function(e,t,r){return void 0===t&&(t=1),void 0===r&&(r=t),Np(e,t,r),this.checkRecord(e),void 0!==this.currentFields&&this.addRecord(),this.currentName=e,this.currentMin=t,this.currentMax=r,this.currentFields=[],this},e.prototype.string=function(e,t,r){return void 0===t&&(t=1),void 0===r&&(r=t),Np(e,t,r),this.checkField(e),this.currentFields.push(new sp.FieldImpl(e,sp.Type.STRING,t,r,this.fieldIndex())),this},e.prototype.integer=function(e,t,r){return void 0===t&&(t=1),void 0===r&&(r=t),Np(e,t,r),this.checkField(e),this.currentFields.push(new sp.FieldImpl(e,sp.Type.INTEGER,t,r,this.fieldIndex())),this},e.prototype.decimal=function(r,n,e,t){return void 0===e&&(e=1),void 0===t&&(t=e),Np(r,e,t),function(e,t){if(n<1)throw new Error("'"+r+"' has invalid 'scale' value '"+n+"'")}(),this.checkField(r),this.currentFields.push(new sp.FieldImpl(r,sp.Type.DECIMAL,e,t,this.fieldIndex(),n)),this},e.prototype.build=function(){if(void 0!==this.currentFields&&this.addRecord(),0===this.records.length)throw new Error("Schema has no records");return new bp.SchemaImpl(this.recordV2Constructor,this.records)},e.prototype.fieldIndex=function(){var e=this.currentFields;if(0===e.length)return 0;var t=e[e.length-1];return t.index+t.max},e.prototype.addRecord=function(){var e,t=this.currentFields;if(0===t.length)throw new Error("No fields specified for record: '"+this.currentName+"'");if(0===this.records.length)e=0;else{var r=this.records[this.records.length-1];e=r.index+r.max}this.records.push(new wp.RecordImpl(this.currentName,this.currentMin,this.currentMax,e,t))},e.prototype.checkRecord=function(e){var t,r;if(iu.requireNonNull(e,"name"),e===this.currentName)throw new Error("Duplicate record name: '"+e+"'");if(this.records.length)try{for(var n=Pp(this.records),o=n.next();!o.done;o=n.next())if(e===o.value.name)throw new Error("Duplicate record name: '"+e+"'")}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}if(void 0!==this.currentFields&&this.currentMin!==this.currentMax)throw new Error("Record '"+e+"' not allowed after variable multiplicity record: '"+this.currentName+"'")},e.prototype.checkField=function(e){var t,r;if(iu.requireNonNull(e,"name"),void 0===this.currentFields)throw new Error("Cannot add field '"+e+"' as there is no current record");if(this.currentFields.length){try{for(var n=Pp(this.currentFields),o=n.next();!o.done;o=n.next())if(e===o.value.name)throw new Error("Duplicate field name: '"+e+"'")}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}var i=this.currentFields[this.currentFields.length-1];if(i.isVariable)throw new Error("Field '"+e+"' is not allowed after variable multiplicity field '"+i.name+"'")}},e}();Ap.SchemaBuilderImpl=Mp;var Lp={};Object.defineProperty(Lp,"__esModule",{value:!0});var Dp=function(){function e(e){this.recordV2Constructor=e}return e.prototype.parse=function(e){var t,i=new Ap.SchemaBuilderImpl(this.recordV2Constructor);try{t=JSON.parse(e)}catch(e){throw new Error("Invalid Schema JSON string")}if(void 0===t.records)throw new Error("Schema has no records");return t.records.forEach(function(e){void 0!==e.occurs?i.record(e.name,e.occurs):i.record(e.name,e.min,e.max),e.fields&&e.fields.forEach(function(e){var t,r;r=void 0!==e.occurs?(t=e.occurs,e.occurs):(t=e.min,e.max);var n=e.type||"STRING";switch(n.toUpperCase()){case"STRING":i.string(e.name,t,r);break;case"INTEGER":i.integer(e.name,t,r);break;case"DECIMAL":var o=e.scale||2;i.decimal(e.name,o,t,r);break;default:throw new Error("Invalid field type value '"+n+"'")}})}),i.build()},e}();Lp.SchemaParser=Dp;var jp,Up={},xp=this&&this.__extends||(jp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}jp(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function Bp(){}Object.defineProperty(Up,"__esModule",{value:!0});var kp=function(r){function e(e){void 0===e&&(e=Bp);var t=r.call(this,"record_v2",Sp.RecordV2Impl,Sp.RecordV2Impl,Sp.RecordV2Impl.from,Wc.identity,[],!0)||this;return t.RecordV2=Sp.RecordV2Impl,t.validator=e,t}return xp(e,r),e.prototype.from=function(e){return Sp.RecordV2Impl.from(e)},e.prototype.validate=function(e){this.validator(iu.requireNonNull(e,"RecordV2 instance"))},e.prototype.parseSchema=function(e){return new Lp.SchemaParser(Sp.RecordV2Impl).parse(e)},e.prototype.schemaBuilder=function(){return new Ap.SchemaBuilderImpl(Sp.RecordV2Impl)},e.prototype.valueBuilder=function(){return new Ep.RecordV2BuilderImpl},e.prototype.withSchema=function(t){return new e(function(e){return e.asValidatedModel(t)})},e}(Gc.AbstractDataType);Up.RecordV2DataTypeImpl=kp;var qp={};Object.defineProperty(qp,"__esModule",{value:!0});var Vp=function(){function n(e,t,r){this.metadata=e,this.originalEvent=t,this.value=r,this.sequence=e.sequence,this.timestamp=e.timestamp,this.author=e.author,this.isEditEvent=!e.equals(t),this.isOriginalEvent=!this.isEditEvent}return n.create=function(e,t,r){return new n(e,t,r)},n.prototype.withValue=function(e){return new n(this.metadata,this.originalEvent,e)},n.prototype.equals=function(e){return!!(e&&e instanceof n)&&this.metadata.equals(e.metadata)&&this.originalEvent.equals(e.originalEvent)&&this.value===e.value},n.prototype.toString=function(){return(this.isEditEvent?"Edit of ["+this.originalEvent+"]":"")+"["+this.metadata+"] "+this.value},n}();qp.EventImpl=Vp;var Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});var Gp=function(){function t(e,t,r){this.sequence=e,this.timestamp=t,this.author=r}return t.prototype.equals=function(e){return!!(e&&e instanceof t)&&this.sequence===e.sequence&&this.timestamp===e.timestamp&&this.author===e.author},t}();Fp.EventMetadataImpl=Gp;var Hp,Wp={},Yp=this&&this.__extends||(Hp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Hp(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Wp,"__esModule",{value:!0});var zp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.read=function(e){var t=Sa.readInt64(e),r=Sa.readInt64(e),n=Sa.readString(e);return new Fp.EventMetadataImpl(t.toNumber(),r.toNumber(),n)},t.prototype.write=function(e,t){Sa.writeInt64(e,t.sequence),Sa.writeInt64(e,t.timestamp),Sa.writeString(e,t.author)},t}(wa.AbstractSerialiser);Wp.EventMetadataImplSerialiser=new zp;var $p,Qp,Kp,Jp={},Xp=this&&this.__extends||(Qp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Qp(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function Zp(e,t){var r=new Ba.BufferOutputStream;t.isEditEvent?(Sa.writeByte(r,$p.EDIT_EVENT),Wp.EventMetadataImplSerialiser.write(r,t.originalEvent)):Sa.writeByte(r,$p.ORIGINAL_EVENT),Wp.EventMetadataImplSerialiser.write(r,t);var n=e(t.value);return Sa.writeBytes(r,n.$buffer),r.getBuffer()}Object.defineProperty(Jp,"__esModule",{value:!0}),(Kp=$p||($p={}))[Kp.ORIGINAL_EVENT=0]="ORIGINAL_EVENT",Kp[Kp.EDIT_EVENT=1]="EDIT_EVENT";var el=function(i){function t(e,t,r,n){var o=i.call(this,e,qp.EventImpl,qc.BytesImpl,function(e){return function(e,t){if(!t)throw new Error("Cannot convert null event to Bytes");return new qc.BytesImpl(Zp(e,t))}(n,e)},function(e){return function(e,t){var r,n,o,i,s,a,c,u,p,l=new Ua.BufferInputStream(t.$buffer),f=Sa.readByte(l);switch(f){case $p.ORIGINAL_EVENT:return a=e,c=l,u=Wp.EventMetadataImplSerialiser.read(c),p=a(Sa.readBytes(c)),qp.EventImpl.create(u,u,p);case $p.EDIT_EVENT:return r=e,n=l,o=Wp.EventMetadataImplSerialiser.read(n),i=Wp.EventMetadataImplSerialiser.read(n),s=r(Sa.readBytes(n)),qp.EventImpl.create(i,o,s);default:throw new Error("Unrecognised event type: "+f)}}(r,e)},[],!0)||this;return o.valueToBytes=n,o.valueTypeName=t,o}return Xp(t,i),t.create=function(e){return new t("timeseriesevent-"+e.name(),e.name(),e.readValue.bind(e),e.toBytes.bind(e))},t.prototype.writeValue=function(e){return Zp(this.valueToBytes,e)},t.prototype.validate=function(){},t.prototype.from=function(e){return e instanceof dc.BufferSlice?e:this.valueToBytes(e.value)},t}(Gc.AbstractDataType);Jp.TimeSeriesEventDataType=el;var tl={};Object.defineProperty(tl,"__esModule",{value:!0});var rl=function(e,t,r){this.id=e,this.stateful=t,this.functional=r};tl.TopicTypeEnum={SLAVE:new rl(7,!0,!1),ROUTING:new rl(12,!1,!0),BINARY:new rl(14,!0,!1),JSON:new rl(15,!0,!1),STRING:new rl(17,!0,!1),INT64:new rl(18,!0,!1),DOUBLE:new rl(19,!0,!1),TIME_SERIES:new rl(16,!0,!1),RECORD_V2:new rl(20,!0,!1),UNKNOWN_TOPIC_TYPE:new rl(21,!1,!1)},Ha.enumerize(tl.TopicTypeEnum);var nl={};(function(t){"use strict";Object.defineProperty(nl,"__esModule",{value:!0});var e=new(function(){function e(){this.recordv2Impl=new Up.RecordV2DataTypeImpl,this.binaryImpl=new Qc.BinaryDataTypeImpl,this.stringImpl=new zu.StringDataTypeImpl,this.doubleImpl=new xu.DoubleDataTypeImpl,this.int64Impl=new Fu.Int64DataTypeImpl,this.jsonImpl=new Mu.JSONDataTypeImpl,this.anyImpl=new tc.AnyDataTypeImpl}return e.prototype.binary=function(){return this.binaryImpl},e.prototype.string=function(){return this.stringImpl},e.prototype.double=function(){return this.doubleImpl},e.prototype.int64=function(){return this.int64Impl},e.prototype.json=function(){return this.jsonImpl},e.prototype.recordv2=function(){return this.recordv2Impl},e.prototype.any=function(){return this.anyImpl},e.prototype.timeseries=function(e){return Jp.TimeSeriesEventDataType.create(e)},e.prototype.getByName=function(e){switch(e.toLowerCase()){case"json":return this.json();case"int64":return this.int64();case"binary":return this.binary();case"string":return this.string();case"double":return this.double();case"record_v2":return this.recordv2();default:return}},e.prototype.getByValue=function(e){return e===tl.TopicTypeEnum.BINARY||e instanceof zc.BinaryImpl||t.isBuffer(e)?this.binary():e===tl.TopicTypeEnum.JSON||e instanceof Ou.JSONImpl||e.constructor===Object?this.json():e===tl.TopicTypeEnum.STRING||"string"==typeof e?this.string():e===tl.TopicTypeEnum.DOUBLE||"number"==typeof e?this.double():e===tl.TopicTypeEnum.INT64||e instanceof fc.Int64Impl?this.int64():e===tl.TopicTypeEnum.RECORD_V2||e instanceof Sp.RecordV2Impl?this.recordv2():void 0},e.prototype.get=function(e){var t;return"string"==typeof e&&(t=this.getByName(e)),t||(t=this.getByValue(e)),t||(t=this.getByClassSafely(e)),t||null},e.prototype.getChecked=function(e){if(!e)throw new Error("No data type for "+e);if(e instanceof Up.RecordV2DataTypeImpl||e instanceof Qc.BinaryDataTypeImpl||e instanceof zu.StringDataTypeImpl||e instanceof xu.DoubleDataTypeImpl||e instanceof Fu.Int64DataTypeImpl||e instanceof Mu.JSONDataTypeImpl)return e;var t=this.get(e);if(null===t)throw new Error("No data type for "+e);return t},e.prototype.getValueClassChecked=function(e){switch(this.getChecked(e)){case this.jsonImpl:return Ou.JSONImpl;case this.binaryImpl:return zc.BinaryImpl;case this.stringImpl:return String;case this.doubleImpl:return Number;case this.int64Impl:return fc.Int64Impl;case this.recordv2Impl:return Sp.RecordV2Impl;default:return}},e.prototype.getByClassSafely=function(e){switch(e){case Ou.JSONImpl:return this.jsonImpl;case zc.BinaryImpl:return this.binaryImpl;case String:return this.stringImpl;case Number:return this.doubleImpl;case fc.Int64Impl:return this.int64Impl;case Sp.RecordV2Impl:return this.recordv2Impl;default:return}},e.prototype.getByClass=function(e){var t=this.getByClassSafely(e);if(t)return t;throw new Error("No data type for "+e)},e}());nl.DataTypes=e}).call(this,{isBuffer:vc});var ol={},il=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(ol,"__esModule",{value:!0});var sl=function(){function e(e,t){this.listeners=e.getListeners(),this.errorCallback=e.getErrorCallback(),this.closeCallback=e.getCloseCallback(),t&&(this.allowedEvents=["close","error","complete"].concat(t))}return e.prototype.on=function(e,t){return this.attach(e,t),this},e.prototype.off=function(e,t){return this.remove(e,t),this},e.prototype.close=function(e){return this.closeCallback(e),this},e.prototype.error=function(e){return this.errorCallback(e),this},e.prototype.attach=function(e,t){var r,n;if("object"==typeof e)try{for(var o=il(Object.keys(e)),i=o.next();!i.done;i=o.next()){var s=i.value;this.attach(s,e[s])}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else if(t){if(!this.listeners.hasOwnProperty(e)){if(this.allowedEvents&&-1===this.allowedEvents.indexOf(e))throw new Error("Event "+e+" not emitted on this stream, allowed events are "+this.allowedEvents);this.listeners[e]=[]}this.listeners[e].push(t)}},e.prototype.remove=function(e,t){var r,n;if("object"==typeof e)try{for(var o=il(Object.keys(e)),i=o.next();!i.done;i=o.next()){var s=i.value;this.remove(s,e[s])}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else this.listeners.hasOwnProperty(e)&&(this.listeners[e]=t?this.listeners[e].filter(function(e){return e!==t}):[])},e}();ol.StreamImpl=sl;var al,cl,ul,pl=al={};function ll(){throw new Error("setTimeout has not been defined")}function fl(){throw new Error("clearTimeout has not been defined")}function hl(t){if(cl===setTimeout)return setTimeout(t,0);if((cl===ll||!cl)&&setTimeout)return cl=setTimeout,setTimeout(t,0);try{return cl(t,0)}catch(e){try{return cl.call(null,t,0)}catch(e){return cl.call(this,t,0)}}}!function(){try{cl="function"==typeof setTimeout?setTimeout:ll}catch(e){cl=ll}try{ul="function"==typeof clearTimeout?clearTimeout:fl}catch(e){ul=fl}}();var dl,yl=[],vl=!1,_l=-1;function Sl(){vl&&dl&&(vl=!1,dl.length?yl=dl.concat(yl):_l=-1,yl.length&&El())}function El(){if(!vl){var e=hl(Sl);vl=!0;for(var t=yl.length;t;){for(dl=yl,yl=[];++_l<t;)dl&&dl[_l].run();_l=-1,t=yl.length}dl=null,vl=!1,function(t){if(ul===clearTimeout)return clearTimeout(t);if((ul===fl||!ul)&&clearTimeout)return ul=clearTimeout,clearTimeout(t);try{ul(t)}catch(e){try{return ul.call(null,t)}catch(e){return ul.call(this,t)}}}(e)}}function ml(e,t){this.fun=e,this.array=t}function wl(){}pl.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];yl.push(new ml(e,t)),1!==yl.length||vl||hl(El)},ml.prototype.run=function(){this.fun.apply(null,this.array)},pl.title="browser",pl.browser=!0,pl.env={},pl.argv=[],pl.version="",pl.versions={},pl.on=wl,pl.addListener=wl,pl.once=wl,pl.off=wl,pl.removeListener=wl,pl.removeAllListeners=wl,pl.emit=wl,pl.prependListener=wl,pl.prependOnceListener=wl,pl.listeners=function(e){return[]},pl.binding=function(e){throw new Error("process.binding is not supported")},pl.cwd=function(){return"/"},pl.chdir=function(e){throw new Error("process.chdir is not supported")},pl.umask=function(){return 0};var gl={};(function(s){"use strict";var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(gl,"__esModule",{value:!0});var o=new(function(){function e(){this.pendingEvents=[],this.events=[],this.busy=!1}return e.prototype.addEmitterEvent=function(e){var t=this;this.pendingEvents.push(e),this.busy||(this.busy=!0,s.nextTick(function(){t.drainEmitterQueue()}))},e.prototype.drainEmitterQueue=function(){var t,e,r=this;this.events=this.pendingEvents,this.pendingEvents=[];try{for(var n=a(this.events),o=n.next();!o.done;o=n.next()){var i=o.value;try{i()}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}0<this.pendingEvents.length?s.nextTick(function(){r.drainEmitterQueue()}):this.busy=!1},e}()),e=function(){function s(e){var t=this;if(this.listeners={},this.closed=!1,this.listener=function(){},void 0===e||void 0===e.stream){var r={getListeners:function(){return t.listeners},getErrorCallback:function(){return t.error.bind(t)},getCloseCallback:function(){return t.close.bind(t)}};this.stream=new ol.StreamImpl(r,e&&e.allowedEvents)}else{if(this.stream=e.stream,void 0===e.listeners)throw new Error("Listeners must be defined when supplying a stream");this.listeners=e.listeners}void 0!==e&&void 0!==e.event&&this.stream.on(e.event,e.callback)}return s.create=function(r){var n={},o=function(){},i=function(){};return{getListeners:function(){return n},getErrorCallback:function(){return function(e){o(e)}},getCloseCallback:function(){return function(e){i(e)}},emitter:function(e){var t=new s({stream:e,listeners:n,allowedEvents:r});return o=t.error.bind(t),i=t.close.bind(t),t}}},s.prototype.emit_unsafe=function(e,t){var r=this,n=function(e){Wc.callWithArguments(e,t||[])};o.addEmitterEvent(function(){r.listeners.hasOwnProperty(e)&&r.listeners[e].forEach(n)}),this.listener(e,t)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];!this.closed&&e&&this.emit_unsafe(e,t)},s.prototype.immediate=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];!this.closed&&e&&this.listeners.hasOwnProperty(e)&&this.listeners[e].forEach(function(e){try{Wc.callWithArguments(e,t||[])}catch(e){}})},s.prototype.error=function(e){this.closed||(this.emit_unsafe("error",[e]),this.close(e?e.message:void 0))},s.prototype.close=function(e){this.closed||(this.closed=!0,this.emit_unsafe("close",[e]))},s.prototype.listen=function(e){this.listener=e},s.prototype.get=function(){return this.stream},s}();gl.Emitter=e}).call(this,al);var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});var Ol=function(e,t,r){this.id=e,this.path=t,this.specification=r};Tl.TopicSpecificationInfo=Ol;var Il={};Object.defineProperty(Il,"__esModule",{value:!0}),Il.read=function(e,t){var r=Sa.readByte(e);if(void 0===t[r])throw new Error("Unable to decode enum value "+r);return t[t[r]]},Il.write=function(e,t){"number"==typeof t?Sa.writeByte(e,t):Sa.writeByte(e,t.id)};var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});var bl=["PUBLISH_VALUES_ONLY","SCHEMA","VALIDATE_VALUES","SLAVE_MASTER_TOPIC","TIDY_ON_UNSUBSCRIBE","TIME_SERIES_EVENT_VALUE_TYPE","TIME_SERIES_RETAINED_RANGE","TIME_SERIES_SUBSCRIPTION_RANGE","DONT_RETAIN_VALUE","PERSISTENT","REMOVAL","OWNER","COMPRESSION","CONFLATION","PRIORITY"],Cl=function(){function o(e,t){void 0===t&&(t={}),this.type=e,this.properties=t}return o.prototype.withProperty=function(e,t){if("string"!=typeof e||bl.indexOf(e.toUpperCase())<0)throw new Error("Invalid key: "+e);if("string"!=typeof t)throw new Error("Invalid value, must be string: "+t);var r={};for(var n in r[e]=t,this.properties)n!==e&&(r[n]=this.properties[n]);return new o(this.type,r)},o.PUBLISH_VALUES_ONLY="PUBLISH_VALUES_ONLY",o.VALIDATE_VALUES="VALIDATE_VALUES",o.SLAVE_MASTER_TOPIC="SLAVE_MASTER_TOPIC",o.TIDY_ON_UNSUBSCRIBE="TIDY_ON_UNSUBSCRIBE",o.TIME_SERIES_EVENT_VALUE_TYPE="TIME_SERIES_EVENT_VALUE_TYPE",o.TIME_SERIES_RETAINED_RANGE="TIME_SERIES_RETAINED_RANGE",o.TIME_SERIES_SUBSCRIPTION_RANGE="TIME_SERIES_SUBSCRIPTION_RANGE",o.SCHEMA="SCHEMA",o.DONT_RETAIN_VALUE="DONT_RETAIN_VALUE",o.PERSISTENT="PERSISTENT",o.REMOVAL="REMOVAL",o.CONFLATION="CONFLATION",o.OWNER="OWNER",o.COMPRESSION="COMPRESSION",o.PRIORITY="PRIORITY",o}();Rl.TopicSpecification=Cl;var Al={};(function(i){"use strict";var s,a,c;Object.defineProperty(Al,"__esModule",{value:!0}),Al.read=function(e){if(a&&e.buffer.slice(e.pos,e.pos+c).equals(a))return e.readMany(c),s;var t=e.pos,r=Il.read(e,tl.TopicTypeEnum),n=Sa.readDictionary(e,Sa.readString),o=new Rl.TopicSpecification(r,n);return c=e.pos-t,a=i.from(e.buffer.slice(t,e.pos)),s=Object.freeze(o),o},Al.write=function(e,t){Il.write(e,t.type),Sa.writeDictionary(e,t.properties,Sa.writeString)}}).call(this,t({}).Buffer);var Pl,Nl={},Ml=this&&this.__extends||(Pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Pl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Nl,"__esModule",{value:!0});var Ll=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ml(t,e),t.prototype.read=function(e){var t=Sa.readInt32(e),r=Sa.readString(e),n=Al.read(e);return new Tl.TopicSpecificationInfo(t,r,n)},t.prototype.write=function(e,t){Sa.writeInt32(e,t.id),Sa.writeString(e,t.path),Al.write(e,t.specification)},t}(wa.AbstractSerialiser);Nl.TopicSpecificationInfoSerialiser=new Ll;var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.memoize=function(o,i,s){void 0===i&&(i={}),void 0===s&&(s=Wc.identity);var e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=s(e),n=i[r];return n||(n=o.apply(o,e),i[r]=n)};return e._uncached=o,e};var jl={};function Ul(e){for(var t=0;t<e.length;t++){var r=e.charAt(t);if('"'===r||"\\"===r||"'"===r){for(var n="",o=0;o<e.length;o++){var i=e.charAt(o);switch(i){case"\\":n+="\\\\";break;case'"':n+='\\"';break;case"'":n+="\\'";break;default:n+=i}}return n}}return e}Object.defineProperty(jl,"__esModule",{value:!0}),jl.split=function(e,t){if(""===e)return[];for(var r=[],n=t.length,o=e.lastIndexOf(t);-1<o;)r.push(e.substring(o+n,e.length)),o=(e=e.substring(0,o)).lastIndexOf(t);return r.push(e),r.reverse()},jl.escape=Ul,jl.stringToSet=function(e){return new Set(function(e){var t,r=[],n="",o=0,i=!1;e:for(;o<e.length;o++){var s=e[o];if("'"===(t=s)||'"'===t){for(o++,n="",i=!1;o<e.length;o++){var a=e[o];if(i)n+=a,i=!1;else if("\\"===a)i=!0;else{if(a===s){r.push(n);continue e}n+=a}}throw new Error("Mis-quoted input")}}return r}(e))},jl.collectionToString=function(e){var t=[];return e.forEach(function(e){t.push('"'+Ul(e)+'"')}),t.join(",")};var xl,Bl,kl={};Object.defineProperty(kl,"__esModule",{value:!0}),(Bl=kl.Prefix||(kl.Prefix={})).PATH=">",Bl.SPLIT_PATH_PATTERN="?",Bl.FULL_PATH_PATTERN="*",Bl.SELECTOR_SET="#",(xl=kl.Type||(kl.Type={})).PATH=">",xl.SPLIT_PATH_PATTERN="?",xl.FULL_PATH_PATTERN="*",xl.SELECTOR_SET="#";var ql={};Object.defineProperty(ql,"__esModule",{value:!0}),ql.PATH_SEPARATOR="/",ql.split=function(e){return e.split(ql.PATH_SEPARATOR)},ql.canonicalise=function(e){if(!e)return"";var t=e.length,r=0<t&&e.charAt(0)===ql.PATH_SEPARATOR?1:0,n=1<t&&e.charAt(t-1)===ql.PATH_SEPARATOR?1:0;return e.substring(r,t-n)};var Vl=function(e){this.includesDescendants=e};ql.DescendantQualifier=Object.freeze({MATCH:new Vl(!1),DESCENDANTS_OF_MATCH:new Vl(!0),MATCH_AND_DESCENDANTS:new Vl(!0)});var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});var Gl=function(){function e(e,t,r){this.type=e,this.prefix=t,this.expression=r}return e.prototype.selects=function(e){var t=ql.canonicalise(e);return 0===t.indexOf(this.prefix)&&this.doSelects(t)},e.prototype.toString=function(){return this.expression},e}();Fl.AbstractTopicSelector=Gl;var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.regex=function(e,t){if(void 0===t&&(t=""),""===e)throw new Error("Empty regular expression ["+t+"]");try{var r=new RegExp(e);return function(e){var t=r.exec(e);return t&&t[0]===e}}catch(e){throw new Error("Bad regular expression ["+e.message+", "+t+"]")}};var Wl,Yl={},zl=this&&this.__extends||(Wl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Wl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Yl,"__esModule",{value:!0});var $l=function(r){function e(e){var t=r.call(this,e.type,e.prefix,e.expression)||this;if(t.pattern=void 0,t.qualifier=e.qualifier,!e.base)throw new Error("Invalid full-path selector");return t.base=e.base,t}return zl(e,r),e.prototype.doSelects=function(e){if(!this.pattern)switch(this.qualifier){case ql.DescendantQualifier.DESCENDANTS_OF_MATCH:this.pattern=Hl.regex(this.base+"/.+");break;case ql.DescendantQualifier.MATCH_AND_DESCENDANTS:this.pattern=Hl.regex(this.base+"(?:$|/.+)");break;default:case ql.DescendantQualifier.MATCH:this.pattern=Hl.regex(this.base)}return!0===this.pattern(e)},e}(Fl.AbstractTopicSelector);Yl.FullPathSelector=$l;var Ql,Kl={},Jl=this&&this.__extends||(Ql=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Ql(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Kl,"__esModule",{value:!0});var Xl=function(n){function e(e){var t=this,r=e.remainder;if(e.type===kl.Type.PATH){if(""===e.prefix)throw new Error("Topic path must have at least one part: "+r);if(-1<e.prefix.indexOf("//"))throw new Error("Topic path contains empty part: "+r)}return(t=n.call(this,e.type,e.prefix,e.expression)||this).qualifier=e.qualifier,t.path=e.prefix,t}return Jl(e,n),e.prototype.doSelects=function(e){var t=this.path===e,r=0===e.indexOf(this.path+"/");switch(this.qualifier){case ql.DescendantQualifier.MATCH:return t;case ql.DescendantQualifier.DESCENDANTS_OF_MATCH:return r;case ql.DescendantQualifier.MATCH_AND_DESCENDANTS:return t||r;default:return!1}},e}(Fl.AbstractTopicSelector);Kl.PathSelector=Xl;var Zl,ef={},tf=this&&this.__extends||(Zl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Zl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),rf=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(ef,"__esModule",{value:!0}),ef.DELIMITER="////";var nf=function(i){function s(e){var t=this,r=[];e.forEach(function(e){e instanceof s?e.selectors.forEach(function(e){r.push(e)}):r.push(e)});var n=r.join(ef.DELIMITER),o=function(e){var t,r;if(0===e.length)return"";var n=wc.MAX_INT32,o=[];e.forEach(function(e,t){var r=ql.split(e.prefix);n=Math.min(n,r.length),o[t]=r});var i=[];e:for(var s=0;s<n;++s){var a=o[0][s];try{for(var c=rf(o),u=c.next();!u.done;u=c.next())if(a!==u.value[s])break e}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}i.push(a),i.push(ql.PATH_SEPARATOR)}return ql.canonicalise(i.join(""))}(r);return(t=i.call(this,kl.Type.SELECTOR_SET,o,kl.Prefix.SELECTOR_SET+n)||this).selectors=r,t}return tf(s,i),s.prototype.selects=function(e){var t,r;try{for(var n=rf(this.selectors),o=n.next();!o.done;o=n.next())if(o.value.selects(e))return!0}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!1},s.prototype.doSelects=function(e){return this.selects(e)},s}(Fl.AbstractTopicSelector);ef.SelectorSet=nf;var of,sf={},af=this&&this.__extends||(of=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}of(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(sf,"__esModule",{value:!0});var cf=function(r){function e(e){var t=r.call(this,e.type,e.prefix,e.expression)||this;return t.patterns=void 0,t.qualifier=e.qualifier,t.parts=ql.split(e.base),t.parts.forEach(function(e){if(!e)throw new Error("Invalid split-path selector")}),t}return af(e,r),e.prototype.doSelects=function(e){this.patterns||(this.patterns=this.parts.map(function(e){return Hl.regex(e)}));var t=this.patterns.length,r=e.split(ql.PATH_SEPARATOR);switch(this.qualifier){case ql.DescendantQualifier.MATCH:if(r.length!==t)return!1;break;case ql.DescendantQualifier.DESCENDANTS_OF_MATCH:if(r.length<=t)return!1;break;case ql.DescendantQualifier.MATCH_AND_DESCENDANTS:if(r.length<t)return!1}for(var n=0;n<t;++n)if(!this.patterns[n](r[n]))return!1;return!0},e}(Fl.AbstractTopicSelector);sf.SplitPathSelector=cf;var uf={};(function(e){"use strict";Object.defineProperty(uf,"__esModule",{value:!0});var a=ql.DescendantQualifier;function c(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!e)throw new Error("Empty topic selector expression");if(0<t.length&&(e=[e].concat(t)),e instanceof Array){var n=e.map(function(e){return e instanceof Fl.AbstractTopicSelector?e:c(e)});return new ef.SelectorSet(n)}if("string"==typeof e){var o=function(e){var t=function(e){switch(e[0]){case kl.Prefix.PATH:return kl.Type.PATH;case kl.Prefix.SPLIT_PATH_PATTERN:return kl.Type.SPLIT_PATH_PATTERN;case kl.Prefix.FULL_PATH_PATTERN:return kl.Type.FULL_PATH_PATTERN;case kl.Prefix.SELECTOR_SET:return kl.Type.SELECTOR_SET;case"$":case"%":case"&":case"<":throw new Error("Invalid expression type: "+e);default:return null}}(e);null===t&&(e=kl.Prefix.PATH+e,t=kl.Type.PATH);var r,n,o=e.substring(1);return t===kl.Type.PATH?(n=o,r=a.MATCH):"/"===o[o.length-1]?n="/"===o[o.length-2]?(r=a.MATCH_AND_DESCENDANTS,ql.canonicalise(o.substring(0,o.length-2))):(r=a.DESCENDANTS_OF_MATCH,ql.canonicalise(o.substring(0,o.length-1))):(n=ql.canonicalise(o),r=a.MATCH),{type:t,base:n,prefix:t===kl.Type.PATH?ql.canonicalise(o):function(e){for(var t=[],r=[],n=u,o=0,i=e.length;o<i;++o){var s=e[o];if("\\"===s&&o<i-1){var a=e[o+1];if(n===u&&"Q"===a)n=p;else if(n===p&&"E"===a)n=u;else{if(!(a<"a"||"z"<a)||!(a<"A"||"Z"<a)){t.length=0;break}t.push(a)}o++}else{if(!n(s)){t.length=0;break}s===ql.PATH_SEPARATOR&&(r.push(t.join("")),t.length=0),t.push(s)}}return r.push(t.join("")),ql.canonicalise(r.join(""))}(n),remainder:o,qualifier:r,expression:t+o}}(e);if((s=o).type===kl.Type.PATH||s.type!==kl.Type.SELECTOR_SET&&""!==s.prefix&&s.prefix===s.base)return new Kl.PathSelector(o);switch(o.type){case kl.Type.SPLIT_PATH_PATTERN:return new sf.SplitPathSelector(o);case kl.Type.FULL_PATH_PATTERN:return new Yl.FullPathSelector(o);case kl.Type.SELECTOR_SET:var i=jl.split(o.remainder,ef.DELIMITER).map(function(e){return c(e)});return new ef.SelectorSet(i)}}var s;if(e instanceof Fl.AbstractTopicSelector)return e;throw new Error("Topic selector expression must be a string or array")}var t=["*",".","+","?","^","$","{","}","(",")","[","]","\\","|"];function u(e){return-1===t.indexOf(e)}function p(){return!0}var r=e&&e.env&&"true"===e.env.DISABLE_TOPIC_CACHE?c:Dl.memoize(c,{},function(e){return JSON.stringify(e)});uf.parseSelector=r}).call(this,al);var pf,lf={},ff=this&&this.__extends||(pf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}pf(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(lf,"__esModule",{value:!0});var hf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ff(t,e),t.prototype.read=function(e){return uf.parseSelector(Sa.readString(e))},t.prototype.write=function(e,t){Sa.writeString(e,t.expression)},t}(wa.AbstractSerialiser);lf.TopicSelectorSerialiser=new hf;var df={};Object.defineProperty(df,"__esModule",{value:!0});var yf=function(){function e(){}return e.prototype.read=function(e){return Sa.readBoolean(e)},e.prototype.write=function(e,t){Sa.writeBoolean(e,t)},e}();df.BooleanSerialiser=new yf;var vf={};Object.defineProperty(vf,"__esModule",{value:!0});var _f=function(){function e(){}return e.prototype.read=function(e){return Sa.readBytes(e)},e.prototype.write=function(e,t){Sa.writeBytes(e,t)},e}();vf.BytesSerialiser=new _f;var Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});var Ef=function(){function e(){}return e.prototype.read=function(e){return Sa.readString(e)},e.prototype.write=function(e,t){Sa.writeString(e,t)},e}();Sf.StringSerialiser=new Ef;var mf={};Object.defineProperty(mf,"__esModule",{value:!0});var wf=function(){function e(e){this.script=iu.requireNonNull(e,"script")}return e.prototype.toString=function(){return"SecurityCommandScript ["+this.script+"]"},e}();mf.SecurityCommandScript=wf;var gf,Tf={},Of=this&&this.__extends||(gf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}gf(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Tf,"__esModule",{value:!0});var If=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Of(t,e),t.prototype.read=function(e){var t=Sa.readString(e);return new mf.SecurityCommandScript(t)},t.prototype.write=function(e,t){Sa.writeString(e,t.script)},t}(wa.AbstractSerialiser);Tf.SecurityCommandScriptSerialiser=new If;var Rf={};Object.defineProperty(Rf,"__esModule",{value:!0});var bf=function(){function e(e,t,r,n){void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===n&&(n={}),this.principals=e,this.anonymous={action:t,roles:r},this.trustedClientProposedProperties=n}return e.prototype.toString=function(){return"SystemAuthenticationConfiguration [principals="+this.principals+", anonymous="+this.anonymous+"]"},e}();Rf.SystemAuthentication=bf,Rf.CONNECTION_ACTION={ALLOW:{id:0,value:"allow"},DENY:{id:1,value:"deny"},ABSTAIN:{id:2,value:"abstain"}},Ha.enumerize(Rf.CONNECTION_ACTION),Rf.connectionActionFromString=function(e){return Rf.CONNECTION_ACTION[e.toUpperCase()]};var Cf={};Object.defineProperty(Cf,"__esModule",{value:!0});var Af=function(e){this.type=e};Cf.SessionPropertyValidationImpl=Af;var Pf,Nf,Mf,Lf={};Object.defineProperty(Lf,"__esModule",{value:!0}),(Mf=Lf.GlobalPermission||(Lf.GlobalPermission={})).AUTHENTICATE="AUTHENTICATE",Mf.VIEW_SESSION="VIEW_SESSION",Mf.MODIFY_SESSION="MODIFY_SESSION",Mf.REGISTER_HANDLER="REGISTER_HANDLER",Mf.VIEW_SERVER="VIEW_SERVER",Mf.CONTROL_SERVER="CONTROL_SERVER",Mf.VIEW_SECURITY="VIEW_SECURITY",Mf.MODIFY_SECURITY="MODIFY_SECURITY",Mf.UNKNOWN_GLOBAL_PERMISSION="UNKNOWN_GLOBAL_PERMISSION",Mf.READ_TOPIC_VIEWS="READ_TOPIC_VIEWS",Mf.MODIFY_TOPIC_VIEWS="MODIFY_TOPIC_VIEWS",(Nf=Lf.PathPermission||(Lf.PathPermission={})).READ_TOPIC="READ_TOPIC",Nf.UPDATE_TOPIC="UPDATE_TOPIC",Nf.MODIFY_TOPIC="MODIFY_TOPIC",Nf.SEND_TO_MESSAGE_HANDLER="SEND_TO_MESSAGE_HANDLER",Nf.SEND_TO_SESSION="SEND_TO_SESSION",Nf.SELECT_TOPIC="SELECT_TOPIC",Nf.QUERY_OBSOLETE_TIME_SERIES_EVENTS="QUERY_OBSOLETE_TIME_SERIES_EVENTS",Nf.EDIT_TIME_SERIES_EVENTS="EDIT_TIME_SERIES_EVENTS",Nf.EDIT_OWN_TIME_SERIES_EVENTS="EDIT_OWN_TIME_SERIES_EVENTS",Nf.ACQUIRE_LOCK="ACQUIRE_LOCK",Nf.UNKNOWN_PATH_PERMISSION="UNKNOWN_PATH_PERMISSION",Nf.UNKNOWN_TOPIC_PERMISSION="UNKNOWN_TOPIC_PERMISSION",(Pf=Lf.ValidationType||(Lf.ValidationType={}))[Pf.REGEX=0]="REGEX",Pf[Pf.VALUES=1]="VALUES";var Df,jf={},Uf=this&&this.__extends||(Df=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Df(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(jf,"__esModule",{value:!0});var xf=function(r){function e(e){var t=r.call(this,Lf.ValidationType.REGEX)||this;return t.regex=e,t}return Uf(e,r),e.prototype.toString=function(){return"SessionPropertyValidation [type="+this.type+", regex="+this.regex+"]"},e}(Cf.SessionPropertyValidationImpl);jf.MatchesSessionPropertyValidationImpl=xf;var Bf,kf={},qf=this&&this.__extends||(Bf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Bf(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(kf,"__esModule",{value:!0});var Vf=function(r){function e(e){var t=r.call(this,Lf.ValidationType.VALUES)||this;return t.values=e,t}return qf(e,r),e.prototype.toString=function(){return"SessionPropertyValidation [type="+this.type+", values="+this.values+"]"},e}(Cf.SessionPropertyValidationImpl);kf.ValuesSessionPropertyValidationImpl=Vf;var Ff,Gf={},Hf=this&&this.__extends||(Ff=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Ff(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Gf,"__esModule",{value:!0});var Wf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hf(t,e),t.prototype.read=function(e){if(Il.read(e,Lf.ValidationType)===Lf.ValidationType.REGEX)return new jf.MatchesSessionPropertyValidationImpl(Sa.readString(e));var t=Sa.readCollection(e,Sa.readString);return new kf.ValuesSessionPropertyValidationImpl(t)},t.prototype.write=function(e,t){var r=t.type;if(Sa.writeByte(e,r),r===Lf.ValidationType.REGEX){var n=t;Sa.writeString(e,n.regex)}else{var o=t;Sa.writeCollection(e,o.values,Sa.writeString)}},t}(wa.AbstractSerialiser);Gf.SessionPropertyValidationSerialiser=new Wf;var Yf={};Object.defineProperty(Yf,"__esModule",{value:!0});var zf=function(){function e(e,t,r){this.name=iu.requireNonNull(e,"name"),this.roles=t||[],this.lockingPrincipal=r}return e.prototype.toString=function(){return"SystemPrincipal ["+this.name+", "+this.roles+"]"},e}();Yf.SystemPrincipalImpl=zf;var $f,Qf={},Kf=this&&this.__extends||($f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}$f(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Qf,"__esModule",{value:!0});var Jf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kf(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=Sa.readCollection(e,Sa.readString),n=Sa.readBoolean(e)?Sa.readString(e):void 0;return new Yf.SystemPrincipalImpl(t,r,n)},t.prototype.write=function(e,t){Sa.writeString(e,t.name),Sa.writeCollection(e,t.roles,Sa.writeString),Sa.writeBoolean(e,!!t.lockingPrincipal),t.lockingPrincipal&&Sa.writeString(e,t.lockingPrincipal)},t}(wa.AbstractSerialiser);Qf.SystemPrincipalSerialiser=new Jf;var Xf,Zf={},eh=this&&this.__extends||(Xf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Xf(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Zf,"__esModule",{value:!0});var th=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eh(t,e),t.prototype.read=function(e){var t=Sa.readCollection(e,Qf.SystemPrincipalSerialiser.read),r=Il.read(e,Rf.CONNECTION_ACTION),n=Sa.readCollection(e,Sa.readString),o=Sa.readDictionary(e,Gf.SessionPropertyValidationSerialiser.read);return new Rf.SystemAuthentication(t,r.value,n,o)},t.prototype.write=function(e,t){Sa.writeCollection(e,t.principals,Qf.SystemPrincipalSerialiser.write);var r=Rf.connectionActionFromString(t.anonymous.action);Sa.writeByte(e,r.id),Sa.writeCollection(e,t.anonymous.roles,Sa.writeString),Sa.writeDictionary(e,t.trustedClientProposedProperties,Gf.SessionPropertyValidationSerialiser.write)},t}(wa.AbstractSerialiser);Zf.SystemAuthenticationConfigurationSerialiser=new th;var rh,nh,oh={};Object.defineProperty(oh,"__esModule",{value:!0}),(nh=rh||(rh={}))[nh.NONE=0]="NONE",nh[nh.PLAIN=1]="PLAIN",nh[nh.CUSTOM=2]="CUSTOM",oh.read=function(e){switch(Il.read(e,rh)){case rh.NONE:return Sa.readBytes(e),null;case rh.PLAIN:return Sa.readString(e)||null;case rh.CUSTOM:return Sa.readBytes(e)}},oh.write=function(e,t){null!=t?"string"==typeof t?(Il.write(e,rh.PLAIN),Sa.writeString(e,t)):(Il.write(e,rh.CUSTOM),Sa.writeBytes(e,t)):(Il.write(e,rh.NONE),Sa.writeInt32(e,0))};var ih,sh={},ah=this&&this.__extends||(ih=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}ih(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(sh,"__esModule",{value:!0});var ch=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ah(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.principal),oh.write(e,t.credentials)},t}(wa.AbstractSerialiser);sh.ChangePrincipalRequestSerialiser=new ch;var uh={};Object.defineProperty(uh,"__esModule",{value:!0});var ph=function(e,t){this.filter=e,this.selector=t};uh.ClientFilterSubscribeRequest=ph;var lh,fh={},hh=this&&this.__extends||(lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}lh(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(fh,"__esModule",{value:!0});var dh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hh(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=lf.TopicSelectorSerialiser.read(e);return new uh.ClientFilterSubscribeRequest(t,r)},t.prototype.write=function(e,t){Sa.writeString(e,t.filter),lf.TopicSelectorSerialiser.write(e,t.selector)},t}(wa.AbstractSerialiser);fh.ClientFilterSubscribeRequestSerialiser=new dh;var yh={};Object.defineProperty(yh,"__esModule",{value:!0});var vh=function(){function e(e,t,r){this.message=iu.requireNonNull(e,"message"),this.line=t||0,this.column=r||0}return e.prototype.toString=function(){return"ErrorReport ["+this.message+" at ["+this.line+":"+this.column+"]]"},e}();yh.ErrorReportImpl=vh;var _h,Sh={},Eh=this&&this.__extends||(_h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}_h(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Sh,"__esModule",{value:!0});var mh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Eh(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=Sa.readInt32(e),n=Sa.readInt32(e);return new yh.ErrorReportImpl(t,r,n)},t.prototype.write=function(e,t){Sa.writeString(e,t.message),Sa.writeInt32(e,t.line),Sa.writeInt32(e,t.column)},t}(wa.AbstractSerialiser);Sh.ErrorReportSerialiser=new mh;var wh={};Object.defineProperty(wh,"__esModule",{value:!0});var gh=function(){function e(e,t){this.selected=e,this.errors=t}return e.prototype.isSuccess=function(){return 0===this.errors.length},e}();wh.ClientFilterSubscribeResponse=gh;var Th,Oh={},Ih=this&&this.__extends||(Th=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Th(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Oh,"__esModule",{value:!0});var Rh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ih(t,e),t.prototype.read=function(e){if(Sa.readByte(e)){var t=Sa.readCollection(e,Sh.ErrorReportSerialiser.read);return new wh.ClientFilterSubscribeResponse(0,t)}var r=Sa.readInt32(e);return new wh.ClientFilterSubscribeResponse(r,[])},t.prototype.write=function(e,t){t.isSuccess()?(Sa.writeByte(e,0),Sa.writeInt32(e,t.selected)):(Sa.writeByte(e,1),Sa.writeCollection(e,t.errors,Sh.ErrorReportSerialiser.write))},t}(wa.AbstractSerialiser);Oh.ClientFilterSubscribeResponseSerialiser=new Rh;var bh={};Object.defineProperty(bh,"__esModule",{value:!0});var Ch=function(){function n(e,t){this.server=e,this.value=t}return n.fromString=function(e){var t,r=e.split("-");if(2!==r.length)throw new Error("SessionId must consist of two hexadecimal parts, joined with a '-'");try{t=new n(Us.fromString(r[0],!1,16),Us.fromString(r[1],!1,16))}catch(e){throw new Error("SessionId must consist of two hexadecimal parts, joined with a '-'")}return t},n.validate=function(e){if(e instanceof n)return e;if(0===e.length||e.indexOf("-")<0||0<=e.indexOf(" "))return!1;try{return n.fromString(e)}catch(e){return!1}},n.prototype.toString=function(){var e="0000000000000000"+this.server.toUnsigned().toString(16),t="0000000000000000"+this.value.toUnsigned().toString(16);return(e.substr(e.length-16)+"-"+t.substr(t.length-16)).toLowerCase()},n}();bh.SessionId=Ch;var Ah={};Object.defineProperty(Ah,"__esModule",{value:!0});var Ph=function(){function e(){}return e.prototype.read=function(e){var t=Sa.readInt64(e),r=Sa.readInt64(e);return new bh.SessionId(t,r)},e.prototype.write=function(e,t){Sa.writeInt64(e,t.server),Sa.writeInt64(e,t.value)},e}();Ah.SessionIdSerialiser=new Ph;var Nh={};Object.defineProperty(Nh,"__esModule",{value:!0});var Mh=function(e,t){this.sessionID=e,this.selector=t};Nh.ClientSubscribeRequest=Mh;var Lh,Dh={},jh=this&&this.__extends||(Lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Lh(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Dh,"__esModule",{value:!0});var Uh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jh(t,e),t.prototype.read=function(e){var t=Ah.SessionIdSerialiser.read(e),r=lf.TopicSelectorSerialiser.read(e);return new Nh.ClientSubscribeRequest(t,r)},t.prototype.write=function(e,t){Ah.SessionIdSerialiser.write(e,t.sessionID),lf.TopicSelectorSerialiser.write(e,t.selector)},t}(wa.AbstractSerialiser);Dh.ClientSubscribeRequestSerialiser=new Uh;var xh,Bh={},kh=this&&this.__extends||(xh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}xh(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Bh,"__esModule",{value:!0});var qh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return kh(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.filter),Sa.writeCollection(e,t.rolesToRemove,Sa.writeString),Sa.writeCollection(e,t.rolesToAdd,Sa.writeString)},t}(wa.AbstractSerialiser);Bh.ChangeAuthorisationRolesFilterRequestSerialiser=new qh;var Vh,Fh={},Gh=this&&this.__extends||(Vh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Vh(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Fh,"__esModule",{value:!0});var Hh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gh(t,e),t.prototype.write=function(e,t){if(void 0===t.sessionID||null===t.sessionID)throw new Error("Session ID is null or undefined");Ah.SessionIdSerialiser.write(e,t.sessionID),Sa.writeCollection(e,t.rolesToRemove,Sa.writeString),Sa.writeCollection(e,t.rolesToAdd,Sa.writeString)},t}(wa.AbstractSerialiser);Fh.ChangeAuthorisationRolesRequestSerialiser=new Hh;var Wh={};Object.defineProperty(Wh,"__esModule",{value:!0});var Yh=function(){function e(e){this.sessionID=e}return e.prototype.toString=function(){return"CloseClientRequest ["+this.sessionID+"]"},e}();Wh.CloseClientRequest=Yh;var zh,$h={},Qh=this&&this.__extends||(zh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}zh(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty($h,"__esModule",{value:!0});var Kh=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qh(t,e),t.prototype.read=function(e){var t=Ah.SessionIdSerialiser.read(e);return new Wh.CloseClientRequest(t)},t.prototype.write=function(e,t){Ah.SessionIdSerialiser.write(e,t.sessionID)},t}(wa.AbstractSerialiser);$h.CloseClientRequestSerialiser=new Kh;var Jh,Xh={},Zh=this&&this.__extends||(Jh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Jh(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Xh,"__esModule",{value:!0});var ed=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zh(t,e),t.prototype.write=function(e,t){if(void 0===t.sessionID||null===t.sessionID)throw new Error("session ID is null or undefined");Ah.SessionIdSerialiser.write(e,t.sessionID),void 0!==t.propertyKeys&&null!==t.propertyKeys?Sa.writeCollection(e,t.propertyKeys,Sa.writeString):Sa.writeCollection(e,[],Sa.writeString)},t}(wa.AbstractSerialiser);Xh.GetSessionPropertiesRequestSerialiser=new ed;var td={};Object.defineProperty(td,"__esModule",{value:!0});var rd=function(){function e(e){this.properties=e}return e.prototype.toString=function(){return"GetSessionPropertiesResponse []"},e}();td.GetSessionPropertiesResponse=rd;var nd,od={},id=this&&this.__extends||(nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}nd(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(od,"__esModule",{value:!0});var sd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return id(t,e),t.prototype.read=function(e){return Sa.readBoolean(e)?new td.GetSessionPropertiesResponse(Sa.readDictionary(e,Sa.readString)):null},t}(wa.AbstractSerialiser);od.GetSessionPropertiesResponseSerialiser=new sd;var ad={};Object.defineProperty(ad,"__esModule",{value:!0});var cd=function(e){this.name=e};ad.ControlGroup=cd,ad.DEFAULT=Object.freeze(new cd("default"));var ud,pd={},ld=this&&this.__extends||(ud=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}ud(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(pd,"__esModule",{value:!0});var fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ld(t,e),t.prototype.read=function(e){var t=Sa.readString(e);return new ad.ControlGroup(t)},t.prototype.write=function(e,t){Sa.writeString(e,t.name)},t}(wa.AbstractSerialiser);pd.ControlGroupSerialiser=new fd;var hd,dd={},yd=this&&this.__extends||(hd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}hd(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(dd,"__esModule",{value:!0});var vd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yd(t,e),t.prototype.write=function(e,t){Sa.writeInt32(e,t.definition.id),pd.ControlGroupSerialiser.write(e,t.group),Sa.writeString(e,t.path),Sa.writeCollection(e,t.keys,Sa.writeString)},t}(wa.AbstractSerialiser);dd.MessageReceiverControlRegistrationParamsSerialiser=new vd;var _d,Sd={},Ed=this&&this.__extends||(_d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}_d(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Sd,"__esModule",{value:!0});var md=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ed(t,e),t.prototype.write=function(e,t){dd.MessageReceiverControlRegistrationParamsSerialiser.write(e,t.params),Ea.CIDSerialiser.write(e,t.cid)},t}(wa.AbstractSerialiser);Sd.MessageReceiverControlRegistrationRequestSerialiser=new md;var wd={};Object.defineProperty(wd,"__esModule",{value:!0});var gd=function(e,t,r,n,o,i){this.cid=e,this.sessionID=t,this.path=r,this.properties=n,this.dataType=o,this.content=i};wd.MessagingClientForwardSendRequest=gd;var Td,Od={},Id=this&&this.__extends||(Td=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Td(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Od,"__esModule",{value:!0});var Rd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Id(t,e),t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e),r=Ah.SessionIdSerialiser.read(e),n=Sa.readString(e),o=Sa.readDictionary(e,Sa.readString),i=Sa.readString(e),s=Sa.readBytes(e);return new wd.MessagingClientForwardSendRequest(t,r,n,o,i,s)},t}(wa.AbstractSerialiser);Od.MessagingClientForwardSendRequestSerialiser=new Rd;var bd,Cd={},Ad=this&&this.__extends||(bd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}bd(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Cd,"__esModule",{value:!0});var Pd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ad(t,e),t.prototype.write=function(e,t){Ah.SessionIdSerialiser.write(e,t.sessionId),Sa.writeString(e,t.path),Sa.writeString(e,t.dataType),Sa.writeBytes(e,t.request)},t}(wa.AbstractSerialiser);Cd.MessagingClientSendRequestSerialiser=new Pd;var Nd={};Object.defineProperty(Nd,"__esModule",{value:!0});var Md=function(e,t,r,n){this.cid=e,this.sessionID=t,this.response=r,this.errorReason=n};Nd.MessagingFilterResponse=Md;var Ld={};Object.defineProperty(Ld,"__esModule",{value:!0});var Dd=function(e,t){this.responseDataType=e,this.data=t};Ld.MessagingResponse=Dd;var jd,Ud={},xd=this&&this.__extends||(jd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}jd(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Ud,"__esModule",{value:!0});var Bd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xd(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=Sa.readBytes(e);return new Ld.MessagingResponse(t,r)},t.prototype.write=function(e,t){Sa.writeString(e,t.responseDataType),Sa.writeBytes(e,t.data)},t}(wa.AbstractSerialiser);Ud.MessagingResponseSerialiser=new Bd;var kd,qd={},Vd=this&&this.__extends||(kd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}kd(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(qd,"__esModule",{value:!0});var Fd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vd(t,e),t.prototype.read=function(e){var t=Sa.readInt32(e),r=Sa.readString(e);return new Ds.ErrorReason(t,r)},t.prototype.write=function(e,t){Sa.writeInt32(e,t.id),Sa.writeString(e,t.reason)},t}(wa.AbstractSerialiser);qd.ErrorReasonSerialiser=new Fd;var Gd,Hd={},Wd=this&&this.__extends||(Gd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Gd(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Hd,"__esModule",{value:!0});var Yd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wd(t,e),t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e),r=Ah.SessionIdSerialiser.read(e);switch(Sa.readByte(e)){case 0:var n=Ud.MessagingResponseSerialiser.read(e);return new Nd.MessagingFilterResponse(t,r,n);default:var o=qd.ErrorReasonSerialiser.read(e);return new Nd.MessagingFilterResponse(t,r,null,o)}},t}(wa.AbstractSerialiser);Hd.MessagingFilterResponseSerialiser=new Yd;var zd,$d={},Qd=this&&this.__extends||(zd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}zd(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty($d,"__esModule",{value:!0});var Kd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qd(t,e),t.prototype.write=function(e,t){Ea.CIDSerialiser.write(e,t.cid),Sa.writeString(e,t.filter),Sa.writeString(e,t.path),Sa.writeString(e,t.dataType.name()),Sa.writeBytes(e,t.request)},t}(wa.AbstractSerialiser);$d.MessagingFilterSendRequestSerialiser=new Kd;var Jd={};Object.defineProperty(Jd,"__esModule",{value:!0});var Xd=function(e,t){this.numberSent=e,this.errors=t,this.isSuccess=0===t.length};Jd.MessagingFilterSendResponse=Xd;var Zd,ey={},ty=this&&this.__extends||(Zd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Zd(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ey,"__esModule",{value:!0});var ry=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ty(t,e),t.prototype.read=function(e){if(0===Sa.readByte(e)){var t=Sa.readInt32(e);return new Jd.MessagingFilterSendResponse(t,[])}var r=Sa.readCollection(e,Sh.ErrorReportSerialiser.read);return new Jd.MessagingFilterSendResponse(0,r)},t}(wa.AbstractSerialiser);ey.MessagingFilterSendResponseSerialiser=new ry;var ny={};Object.defineProperty(ny,"__esModule",{value:!0});var oy=function(e,t,r){this.path=e,this.dataType=t,this.request=r};ny.MessagingSendRequest=oy;var iy,sy={},ay=this&&this.__extends||(iy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}iy(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(sy,"__esModule",{value:!0});var cy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ay(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=Sa.readString(e),n=Sa.readBytes(e);return new ny.MessagingSendRequest(t,r,n)},t.prototype.write=function(e,t){Sa.writeString(e,t.path),Sa.writeString(e,t.dataType),Sa.writeBytes(e,t.request)},t}(wa.AbstractSerialiser);sy.MessagingSendRequestSerialiser=new cy;var uy,py={};Object.defineProperty(py,"__esModule",{value:!0}),(uy=py.SessionCloseReason||(py.SessionCloseReason={}))[uy.CONNECTION_LOST=0]="CONNECTION_LOST",uy[uy.IO_EXCEPTION=1]="IO_EXCEPTION",uy[uy.CLIENT_UNRESPONSIVE=2]="CLIENT_UNRESPONSIVE",uy[uy.MESSAGE_QUEUE_LIMIT_REACHED=3]="MESSAGE_QUEUE_LIMIT_REACHED",uy[uy.CLOSED_BY_CLIENT=4]="CLOSED_BY_CLIENT",uy[uy.MESSAGE_TOO_LARGE=5]="MESSAGE_TOO_LARGE",uy[uy.INTERNAL_ERROR=6]="INTERNAL_ERROR",uy[uy.INVALID_INBOUND_MESSAGE=7]="INVALID_INBOUND_MESSAGE",uy[uy.ABORT=8]="ABORT",uy[uy.LOST_MESSAGES=9]="LOST_MESSAGES",uy[uy.SERVER_CLOSING=10]="SERVER_CLOSING",uy[uy.CLOSED_BY_CONTROLLER=11]="CLOSED_BY_CONTROLLER";var ly={};Object.defineProperty(ly,"__esModule",{value:!0});var fy=function(e,t,r,n,o,i){this.sessionId=e,this.type=t,this.updateType=r,this.oldProperties=n,this.newProperties=o,this.closeReason=i};ly.SessionPropertiesEvent=fy;var hy,dy={};Object.defineProperty(dy,"__esModule",{value:!0}),(hy=dy.SessionPropertiesEventType||(dy.SessionPropertiesEventType={}))[hy.OPEN=0]="OPEN",hy[hy.UPDATE=1]="UPDATE",hy[hy.CLOSE=2]="CLOSE";var yy,vy,_y,Sy={},Ey=this&&this.__extends||(vy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}vy(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Sy,"__esModule",{value:!0}),(_y=yy||(yy={}))[_y.NEW=1]="NEW",_y[_y.CHANGE=2]="CHANGE",_y[_y.REMOVE=3]="REMOVE",_y[_y.SAME=4]="SAME";var my=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ey(t,e),t.prototype.read=function(e){var t=Ah.SessionIdSerialiser.read(e),r=Il.read(e,dy.SessionPropertiesEventType);switch(r){case dy.SessionPropertiesEventType.OPEN:var n=Sa.readDictionary(e,Sa.readString);return new ly.SessionPropertiesEvent(t,r,void 0,n);case dy.SessionPropertiesEventType.UPDATE:return function(e,t){for(var r=Sa.readByte(e),n={},o={},i=Sa.readInt32(e),s=0;s<i;++s){var a=Sa.readString(e);switch(Il.read(e,yy)){case yy.NEW:n[a]=null,o[a]=Sa.readString(e);break;case yy.CHANGE:n[a]=Sa.readString(e),o[a]=Sa.readString(e);break;case yy.REMOVE:n[a]=Sa.readString(e);break;case yy.SAME:o[a]=Sa.readString(e);break;default:throw new Error("Invalid update entry type: type")}}return new ly.SessionPropertiesEvent(t,dy.SessionPropertiesEventType.UPDATE,r,n,o)}(e,t);case dy.SessionPropertiesEventType.CLOSE:var o=Il.read(e,py.SessionCloseReason),i=Sa.readDictionary(e,Sa.readString);return new ly.SessionPropertiesEvent(t,r,void 0,i,void 0,o);default:throw new Error("Unknown session properties event type: "+r)}},t}(wa.AbstractSerialiser);Sy.SessionPropertiesEventSerialiser=new my;var wy={};Object.defineProperty(wy,"__esModule",{value:!0});var gy=function(e,t){this.cid=e,this.events=t};wy.SessionPropertiesEventBatch=gy;var Ty,Oy={},Iy=this&&this.__extends||(Ty=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Ty(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Oy,"__esModule",{value:!0});var Ry=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Iy(t,e),t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e),r=Sa.readCollection(e,Sy.SessionPropertiesEventSerialiser.read);return new wy.SessionPropertiesEventBatch(t,r)},t}(wa.AbstractSerialiser);Oy.SessionPropertiesEventBatchSerialiser=new Ry;var by,Cy={},Ay=this&&this.__extends||(by=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}by(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Cy,"__esModule",{value:!0});var Py=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ay(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.filter),Sa.writeBoolean(e,t.conflate)},t}(wa.AbstractSerialiser);Cy.SetClientConflationFilterRequestSerialiser=new Py;var Ny,My={},Ly=this&&this.__extends||(Ny=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Ny(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(My,"__esModule",{value:!0});var Dy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ly(t,e),t.prototype.write=function(e,t){Ah.SessionIdSerialiser.write(e,t.sessionID),Sa.writeBoolean(e,t.conflate)},t}(wa.AbstractSerialiser);My.SetClientConflationRequestSerialiser=new Dy;var jy,Uy={},xy=this&&this.__extends||(jy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}jy(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Uy,"__esModule",{value:!0});var By=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xy(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.filter),0===Object.keys(t.overwriteProperties).length?Sa.writeByte(e,0):(Sa.writeByte(e,1),Sa.writeDictionary(e,t.overwriteProperties,Sa.writeString)),0===Object.keys(t.removeProperties).length?Sa.writeByte(e,0):(Sa.writeByte(e,1),Sa.writeCollection(e,t.removeProperties,Sa.writeString))},t}(wa.AbstractSerialiser);Uy.SetSessionPropertiesFilterRequestSerialiser=new By;var ky,qy={},Vy=this&&this.__extends||(ky=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}ky(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(qy,"__esModule",{value:!0});var Fy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vy(t,e),t.prototype.write=function(e,t){t.properties?(Sa.writeInt32(e,0),Sa.writeCollection(e,t.properties,Sa.writeString)):Sa.writeInt32(e,1),Ea.CIDSerialiser.write(e,t.cid)},t}(wa.AbstractSerialiser);qy.SetSessionPropertiesListenerSerialiser=new Fy;var Gy,Hy={},Wy=this&&this.__extends||(Gy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Gy(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Hy,"__esModule",{value:!0});var Yy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Wy(t,e),t.prototype.write=function(e,t){if(void 0===t.sessionID||null===t.sessionID)throw new Error("Session ID is null or undefined");Ah.SessionIdSerialiser.write(e,t.sessionID),0===Object.keys(t.overwriteProperties).length?Sa.writeByte(e,0):(Sa.writeByte(e,1),Sa.writeDictionary(e,t.overwriteProperties,Sa.writeString)),0===Object.keys(t.removeProperties).length?Sa.writeByte(e,0):(Sa.writeByte(e,1),Sa.writeCollection(e,t.removeProperties,Sa.writeString))},t}(wa.AbstractSerialiser);Hy.SetSessionPropertiesRequestSerialiser=new Yy;var zy={},$y=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(zy,"__esModule",{value:!0});var Qy=function(e,t){var r,n,o,i;this.properties={};try{for(var s=$y(Object.getOwnPropertyNames(e)),a=s.next();!a.done;a=s.next()){var c=a.value;this.properties[c]=e[c]}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}try{for(var u=$y(t),p=u.next();!p.done;p=u.next()){var l=p.value;this.properties[l]=null}}catch(e){o={error:e}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}};zy.SetSessionPropertiesResult=Qy;var Ky,Jy={},Xy=this&&this.__extends||(Ky=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Ky(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Jy,"__esModule",{value:!0});var Zy=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xy(t,e),t.prototype.read=function(e){var t,r;return t=0===Sa.readByte(e)?{}:Sa.readDictionary(e,Sa.readString),r=0===Sa.readByte(e)?[]:Sa.readCollection(e,Sa.readString),new zy.SetSessionPropertiesResult(t,r)},t}(wa.AbstractSerialiser);Jy.SetSessionPropertiesResultSerialiser=new Zy;var ev,tv={},rv=this&&this.__extends||(ev=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}ev(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(tv,"__esModule",{value:!0});var nv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rv(t,e),t.prototype.write=function(e,t){Sa.writeInt32(e,t.definition.id),pd.ControlGroupSerialiser.write(e,t.group),Sa.writeString(e,t.path)},t}(wa.AbstractSerialiser);tv.TopicControlRegistrationParamsSerialiser=new nv;var ov,iv={},sv=this&&this.__extends||(ov=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}ov(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(iv,"__esModule",{value:!0});var av=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sv(t,e),t.prototype.write=function(e,t){tv.TopicControlRegistrationParamsSerialiser.write(e,t.params),Ea.CIDSerialiser.write(e,t.cid)},t}(wa.AbstractSerialiser);iv.TopicControlRegistrationRequestSerialiser=new av;var cv={};Object.defineProperty(cv,"__esModule",{value:!0});var uv=function(e,t){this.count=iu.requireNonNull(e,"count"),this.errors=iu.requireNonNull(t,"errors")};cv.CountOrParserErrors=uv;var pv,lv={},fv=this&&this.__extends||(pv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}pv(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(lv,"__esModule",{value:!0});var hv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fv(t,e),t.prototype.read=function(e){var t=Sa.readInt32(e),r=Sa.readCollection(e,Sh.ErrorReportSerialiser.read);return new cv.CountOrParserErrors(t,r)},t.prototype.write=function(e,t){Sa.writeInt32(e,t.count),Sa.writeCollection(e,t.errors,Sh.ErrorReportSerialiser.write)},t}(wa.AbstractSerialiser);lv.CountOrParserErrorsSerialiser=new hv;var dv={};Object.defineProperty(dv,"__esModule",{value:!0});var yv=function(){function e(e){this.errors=iu.requireNonNull(e,"errors")}return e.prototype.toString=function(){return"ErrorReportList ["+this.errors+"]"},e}();dv.ErrorReportList=yv;var vv,_v={},Sv=this&&this.__extends||(vv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}vv(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(_v,"__esModule",{value:!0});var Ev=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Sv(t,e),t.prototype.read=function(e){var t=Sa.readCollection(e,Sh.ErrorReportSerialiser.read);return new dv.ErrorReportList(t)},t.prototype.write=function(e,t){Sa.writeCollection(e,t.errors,Sh.ErrorReportSerialiser.write)},t}(wa.AbstractSerialiser);_v.ErrorReportListSerialiser=new Ev;var mv={};Object.defineProperty(mv,"__esModule",{value:!0});var wv=function(e){this.names=e};mv.JMXObjectNames=wv;var gv,Tv={},Ov=this&&this.__extends||(gv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}gv(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Tv,"__esModule",{value:!0});var Iv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ov(t,e),t.prototype.read=function(e){var t=Sa.readCollection(e,Sa.readString);return new mv.JMXObjectNames(t)},t.prototype.write=function(e,t){Sa.writeCollection(e,t.names,Sa.writeString)},t}(wa.AbstractSerialiser);Tv.JMXObjectNamesSerialiser=new Iv;var Rv,bv={},Cv=this&&this.__extends||(Rv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Rv(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(bv,"__esModule",{value:!0});var Av=new mc.Encoder,Pv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cv(t,e),t.prototype.read=function(e){var t=Sa.readBytes(e);return new Ec.Decoder(t).nextValueExpecting(function(e){return e===ac.types.MAP})},t.prototype.write=function(e,t){Av.encode(t),Sa.writeBytes(e,Av.flush())},t}(wa.AbstractSerialiser);bv.MBeanValuesSerialiser=new Pv;var Nv={};Object.defineProperty(Nv,"__esModule",{value:!0});var Mv=function(e,t,r,n){this.path=e,this.type=t,this.value=n,this.propertiesIndex=r};Nv.FetchTopicResult=Mv;var Lv={};Object.defineProperty(Lv,"__esModule",{value:!0});var Dv=function(e,t,r){this.properties=e,this.results=t,this.hasMore=r};Lv.FetchQueryResult=Dv;var jv,Uv={},xv=this&&this.__extends||(jv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}jv(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function Bv(e){return Sa.readDictionary(e,Sa.readString)}function kv(e){var t=Sa.readString(e),r=Il.read(e,tl.TopicTypeEnum),n=0!==Sa.readByte(e)?Sa.readBytes(e):void 0,o=Sa.readInt32(e);return new Nv.FetchTopicResult(t,r,o,n)}Object.defineProperty(Uv,"__esModule",{value:!0});var qv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xv(t,e),t.prototype.read=function(e){var t=Sa.readCollection(e,Bv),r=Sa.readCollection(e,kv),n=Sa.readBoolean(e);return new Lv.FetchQueryResult(t,r,n)},t}(wa.AbstractSerialiser);Uv.FetchQueryResultSerialiser=new qv;var Vv={};Object.defineProperty(Vv,"__esModule",{value:!0}),Vv.write=function(e,t){var r=Us.UZERO,n={write:function(e){if(64<=e)throw new Error("Cannot encode enum in long, "+e+" >= 64'");r=r.or(Us.ONE.shiftLeft(e))}};t.forEach(function(e){Il.write(n,e)}),Sa.writeInt64(e,r)};var Fv,Gv={},Hv=this&&this.__extends||(Fv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Fv(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function Wv(e,t){void 0===t?Sa.writeByte(e,0):(Sa.writeByte(e,1),Sa.writeString(e,t.path),Sa.writeBoolean(e,t.includesPath))}Object.defineProperty(Gv,"__esModule",{value:!0});var Yv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hv(t,e),t.prototype.write=function(e,t){var r,n;lf.TopicSelectorSerialiser.write(e,t.selector),r=e,n=t.range,Wv(r,n.from),Wv(r,n.to),Vv.write(e,t.topicTypes),Sa.writeBoolean(e,t.withValues),Sa.writeBoolean(e,t.withProperties),Sa.writeInt32(e,t.limit),Sa.writeInt32(e,t.maximumResultSize),Sa.writeInt32(e,t.deepBranchDepth),Sa.writeInt32(e,t.deepBranchLimit),Sa.writeBoolean(e,t.withUnpublishedDelayedTopics)},t}(wa.AbstractSerialiser);Gv.FetchQuerySerialiser=new Yv;var zv={};Object.defineProperty(zv,"__esModule",{value:!0});var $v=function(e,t){this.cid=e,this.selector=t};zv.FetchRequest=$v;var Qv,Kv={},Jv=this&&this.__extends||(Qv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Qv(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Kv,"__esModule",{value:!0});var Xv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Jv(t,e),t.prototype.read=function(e){var t=lf.TopicSelectorSerialiser.read(e),r=Ea.CIDSerialiser.read(e);return new zv.FetchRequest(r,t)},t.prototype.write=function(e,t){lf.TopicSelectorSerialiser.write(e,t.selector),Ea.CIDSerialiser.write(e,t.cid)},t}(wa.AbstractSerialiser);Kv.FetchRequestSerialiser=new Xv;var Zv={};Object.defineProperty(Zv,"__esModule",{value:!0});var e_=function(e,t){this.firstEntry=e,this.entryCount=t};Zv.EntriesFetchRequest=e_;var t_,r_={},n_=this&&this.__extends||(t_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}t_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r_,"__esModule",{value:!0});var o_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n_(t,e),t.prototype.read=function(e){var t=Sa.readInt64(e),r=Sa.readInt64(e);return new Zv.EntriesFetchRequest(t,r)},t.prototype.write=function(e,t){Sa.writeInt64(e,t.firstEntry),Sa.writeInt64(e,t.entryCount)},t}(wa.AbstractSerialiser);r_.EntriesFetchRequestSerialiser=new o_;var i_={};Object.defineProperty(i_,"__esModule",{value:!0});var s_=function(e,t,r,n,o,i){this.firstEntry=e,this.entryCount=t,this.fileId=r,this.maxEntriesAvailable=n,this.firstLineNumber=o,this.entries=i};i_.EntriesFetchResponse=s_;var a_,c_={},u_=this&&this.__extends||(a_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(c_,"__esModule",{value:!0});var p_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u_(t,e),t.prototype.read=function(e){var t=Sa.readInt64(e),r=Sa.readInt64(e),n=Sa.readInt64(e),o=Sa.readInt64(e),i=Sa.readBytes(e),s=Sa.readInt64(e);return new i_.EntriesFetchResponse(t,r,s,n,o,i)},t.prototype.write=function(e,t){Sa.writeInt64(e,t.firstEntry),Sa.writeInt64(e,t.entryCount),Sa.writeInt64(e,t.maxEntriesAvailable),Sa.writeInt64(e,t.firstLineNumber),Sa.writeBytes(e,t.entries),Sa.writeInt64(e,t.fileId)},t}(wa.AbstractSerialiser);c_.EntriesFetchResponseSerialiser=new p_;var l_={};Object.defineProperty(l_,"__esModule",{value:!0});var f_=function(e){this.collectors=e};l_.SessionMetricCollectorList=f_;var h_={};Object.defineProperty(h_,"__esModule",{value:!0});var d_=function(e,t){this.name=e,this.exportToPrometheus=t,this.name=e,this.exportToPrometheus=t};h_.AbstractMetricCollector=d_;var y_,v_={},__=this&&this.__extends||(y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}y_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(v_,"__esModule",{value:!0});var S_=function(s){function e(e,t,r,n,o){var i=s.call(this,e,t)||this;return i.removeMetricsWithNoMatches=r,i.sessionFilter=n,i.groupByProperties=o,i}return __(e,s),e}(h_.AbstractMetricCollector);v_.SessionMetricCollector=S_;var E_,m_={},w_=this&&this.__extends||(E_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}E_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(m_,"__esModule",{value:!0});var g_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w_(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=Sa.readBoolean(e),n=Sa.readBoolean(e),o=Sa.readString(e),i=Sa.readCollection(e,Sa.readString);return new v_.SessionMetricCollector(t,r,n,o,i)},t.prototype.write=function(e,t){Sa.writeString(e,t.name),Sa.writeBoolean(e,t.exportToPrometheus),Sa.writeBoolean(e,t.removeMetricsWithNoMatches),Sa.writeString(e,t.sessionFilter),Sa.writeCollection(e,t.groupByProperties,Sa.writeString)},t}(wa.AbstractSerialiser);m_.SessionMetricCollectorSerialiser=new g_;var T_,O_={},I_=this&&this.__extends||(T_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}T_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(O_,"__esModule",{value:!0});var R_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return I_(t,e),t.prototype.read=function(e){var t=Sa.readCollection(e,m_.SessionMetricCollectorSerialiser.read);return new l_.SessionMetricCollectorList(t)},t.prototype.write=function(e,t){Sa.writeCollection(e,t.collectors,m_.SessionMetricCollectorSerialiser.write)},t}(wa.AbstractSerialiser);O_.SessionMetricCollectorListSerialiser=new R_;var b_={};Object.defineProperty(b_,"__esModule",{value:!0});var C_=function(e){this.collectors=e};b_.TopicMetricCollectorList=C_;var A_,P_={},N_=this&&this.__extends||(A_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}A_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(P_,"__esModule",{value:!0});var M_=function(i){function e(e,t,r,n){var o=i.call(this,e,t)||this;return o.topicSelector=r,o.groupByTopicType=n,o}return N_(e,i),e}(h_.AbstractMetricCollector);P_.TopicMetricCollector=M_;var L_,D_={},j_=this&&this.__extends||(L_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}L_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(D_,"__esModule",{value:!0});var U_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return j_(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=Sa.readBoolean(e),n=Sa.readString(e),o=Sa.readBoolean(e);return new P_.TopicMetricCollector(t,r,n,o)},t.prototype.write=function(e,t){Sa.writeString(e,t.name),Sa.writeBoolean(e,t.exportToPrometheus),Sa.writeString(e,t.topicSelector),Sa.writeBoolean(e,t.groupByTopicType)},t}(wa.AbstractSerialiser);D_.TopicMetricCollectorSerialiser=new U_;var x_,B_={},k_=this&&this.__extends||(x_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}x_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(B_,"__esModule",{value:!0});var q_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k_(t,e),t.prototype.read=function(e){var t=Sa.readCollection(e,D_.TopicMetricCollectorSerialiser.read);return new b_.TopicMetricCollectorList(t)},t.prototype.write=function(e,t){Sa.writeCollection(e,t.collectors,D_.TopicMetricCollectorSerialiser.write)},t}(wa.AbstractSerialiser);B_.TopicMetricCollectorListSerialiser=new q_;var V_={};Object.defineProperty(V_,"__esModule",{value:!0});var F_=function(e,t){this.metricNames=e,this.values=t};V_.MeasuredEntityClassMetrics=F_;var G_,H_={},W_=this&&this.__extends||(G_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}G_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function Y_(e,t){return Sa.readMap(e,function(e){return Sa.readCollection(e,Sa.readString)},t)}function z_(e,t,r){Sa.writeMap(e,t,function(e,t){return Sa.writeCollection(e,t,Sa.writeString)},r)}Object.defineProperty(H_,"__esModule",{value:!0});var $_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W_(t,e),t.prototype.read=function(e){var t=Sa.readCollection(e,Sa.readString),r=Y_(e,function(e){return Y_(e,function(e){return Sa.readCollection(e,Sa.readInt64)})});return new V_.MeasuredEntityClassMetrics(t,r)},t.prototype.write=function(e,t){Sa.writeCollection(e,t.metricNames,Sa.writeString),z_(e,t.values,function(e,t){return z_(e,t,function(e,t){return Sa.writeCollection(e,t,Sa.writeInt64)})})},t}(wa.AbstractSerialiser);H_.MeasuredEntityClassMetricsSerialiser=new $_;var Q_,K_={},J_=this&&this.__extends||(Q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Q_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(K_,"__esModule",{value:!0});var X_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return J_(t,e),t.prototype.read=function(e){return Sa.readDictionary(e,function(e){return Sa.readDictionary(e,Sa.readInt64)})},t.prototype.write=function(e,t){Sa.writeDictionary(e,t,function(e,t){return Sa.writeDictionary(e,t,Sa.writeInt64)})},t}(wa.AbstractSerialiser);K_.ServerMetricsSerialiser=new X_;var Z_={};Object.defineProperty(Z_,"__esModule",{value:!0});var eS=function(e,t,r){this.sessionID=e,this.selector=t,this.cid=r};Z_.MissingTopicRequest=eS;var tS,rS={},nS=this&&this.__extends||(tS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}tS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(rS,"__esModule",{value:!0});var oS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nS(t,e),t.prototype.read=function(e){var t=Ah.SessionIdSerialiser.read(e),r=lf.TopicSelectorSerialiser.read(e),n=Ea.CIDSerialiser.read(e);return new Z_.MissingTopicRequest(t,r,n)},t.prototype.write=function(e,t){Ah.SessionIdSerialiser.write(e,t.sessionID),lf.TopicSelectorSerialiser.write(e,t.selector),Ea.CIDSerialiser.write(e,t.cid)},t}(wa.AbstractSerialiser);rS.MissingTopicRequestSerialiser=new oS;var iS={};Object.defineProperty(iS,"__esModule",{value:!0});var sS=function(e){this.status=e};iS.CheckRemoteServerResult=sS;var aS,cS,uS={};Object.defineProperty(uS,"__esModule",{value:!0}),(cS=uS.ConnectionOption||(uS.ConnectionOption={}))[cS.CONNECTION_TIMEOUT=1]="CONNECTION_TIMEOUT",cS[cS.INPUT_BUFFER_SIZE=2]="INPUT_BUFFER_SIZE",cS[cS.MAXIMUM_QUEUE_SIZE=3]="MAXIMUM_QUEUE_SIZE",cS[cS.OUTPUT_BUFFER_SIZE=4]="OUTPUT_BUFFER_SIZE",cS[cS.RECONNECTION_TIMEOUT=5]="RECONNECTION_TIMEOUT",cS[cS.RECOVERY_BUFFER_SIZE=6]="RECOVERY_BUFFER_SIZE",cS[cS.RETRY_DELAY=7]="RETRY_DELAY",cS[cS.WRITE_TIMEOUT=8]="WRITE_TIMEOUT",(aS=uS.ConnectionState||(uS.ConnectionState={}))[aS.INACTIVE=1]="INACTIVE",aS[aS.CONNECTED=2]="CONNECTED",aS[aS.RETRYING=3]="RETRYING",aS[aS.FAILED=4]="FAILED",aS[aS.MISSING=5]="MISSING";var pS={};Object.defineProperty(pS,"__esModule",{value:!0}),pS.readRemoteServerStatus=function(e){return{connectionState:Il.read(e,uS.ConnectionState),failureMessage:Sa.readString(e)}};var lS,fS={},hS=this&&this.__extends||(lS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}lS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(fS,"__esModule",{value:!0});var dS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return hS(t,e),t.prototype.read=function(e){var t=pS.readRemoteServerStatus(e);return new iS.CheckRemoteServerResult(t)},t}(wa.AbstractSerialiser);fS.CheckRemoteServerResultSerialiser=new dS;var yS={};Object.defineProperty(yS,"__esModule",{value:!0}),yS.readRemoteServer=function(e){return{name:Sa.readString(e),url:Sa.readString(e),principal:Sa.readString(e),connectionOptions:Sa.readObject(e,function(e){return Il.read(e,uS.ConnectionOption)},Sa.readString)}};var vS={};Object.defineProperty(vS,"__esModule",{value:!0});var _S=function(e,t){this.server=e,this.errors=t};vS.CreateRemoteServerResult=_S;var SS,ES={},mS=this&&this.__extends||(SS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}SS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ES,"__esModule",{value:!0});var wS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mS(t,e),t.prototype.read=function(e){if(0===e.peek()){Sa.readByte(e);var t=yS.readRemoteServer(e);return new vS.CreateRemoteServerResult(t)}var r=_v.ErrorReportListSerialiser.read(e);return new vS.CreateRemoteServerResult(void 0,r)},t}(wa.AbstractSerialiser);ES.CreateRemoteServerResultSerialiser=new wS;var gS={};Object.defineProperty(gS,"__esModule",{value:!0});var TS=function(e){this.result=e};gS.ListRemoteServersResult=TS;var OS,IS={},RS=this&&this.__extends||(OS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}OS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(IS,"__esModule",{value:!0});var bS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return RS(t,e),t.prototype.read=function(e){var t=Sa.readCollection(e,yS.readRemoteServer);return new gS.ListRemoteServersResult(t)},t}(wa.AbstractSerialiser);IS.ListRemoteServersResultSerialiser=new bS;var CS,AS={},PS=this&&this.__extends||(CS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}CS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(AS,"__esModule",{value:!0});var NS=function(e,t){return Sa.writeByte(e,parseInt(t,10))},MS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return PS(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.name),Sa.writeString(e,t.url),Sa.writeString(e,t.principal),Sa.writeObject(e,t.connectionOptions,NS,Sa.writeString),oh.write(e,t.credentials)},t}(wa.AbstractSerialiser);AS.RemoteServerDefinitionSerialiser=new MS;var LS,DS={},jS=this&&this.__extends||(LS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}LS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(DS,"__esModule",{value:!0});var US=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jS(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.selector.expression)},t}(wa.AbstractSerialiser);DS.RemoveTopicSerialiser=new US;var xS={};Object.defineProperty(xS,"__esModule",{value:!0});var BS=function(e,t){this.type=e,this.resString=t};xS.ReplaceLicenceResponse=BS;var kS,qS={},VS=this&&this.__extends||(kS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}kS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(qS,"__esModule",{value:!0});var FS=function(t){function e(){var e=t.call(this)||this;return e.responseCode=[],e.responseCode[0]="The license was replaced successfully.",e.responseCode[1]="The provided license does not match this version of Diffusion.",e.responseCode[2]="Diffusion was unable to find the IP address provided within the license.",e.responseCode[3]="The provided license has expired.",e.responseCode[4]="The date on the provided license is not valid.",e.responseCode[5]="The license file is missing.Please check the read / write permissions of your Diffusion server.",e.responseCode[6]="The licencing service has encountered an unknown error.",e.responseCode[7]="The provided license is not valid for the given IP address(es).",e.responseCode[8]="The provided license is not valid for the given MAC address(es).",e.responseCode[9]="The license file provided cannot be read, and may be corrupt.",e.responseCode[10]="The new license has an non-matching feature set to the current license.\nPlease shut down the server and replace the license manually.",e}return VS(e,t),e.prototype.read=function(e){var t=Sa.readByte(e),r=t in this.responseCode?this.responseCode[t]:"An unknown response was received from the server.";return new xS.ReplaceLicenceResponse(t,r)},e}(wa.AbstractSerialiser);qS.ReplaceLicenceResponseSerialiser=new FS;var GS={};Object.defineProperty(GS,"__esModule",{value:!0});var HS=function(e,t){this.definition=e,this.group=t};GS.ControlRegistrationParams=HS;var WS,YS={},zS=this&&this.__extends||(WS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}WS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(YS,"__esModule",{value:!0});var $S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zS(t,e),t.prototype.read=function(e){var t=Sa.readInt32(e),r=pd.ControlGroupSerialiser.read(e);return new GS.ControlRegistrationParams({id:t},r)},t.prototype.write=function(e,t){Sa.writeInt32(e,t.definition.id),pd.ControlGroupSerialiser.write(e,t.group)},t}(wa.AbstractSerialiser);YS.ControlRegistrationParamsSerialiser=new $S;var QS,KS={};Object.defineProperty(KS,"__esModule",{value:!0}),(QS=KS.DetailType||(KS.DetailType={}))[QS.SUMMARY=0]="SUMMARY",QS[QS.LOCATION=1]="LOCATION",QS[QS.CONNECTOR_NAME=2]="CONNECTOR_NAME",QS[QS.SERVER_NAME=3]="SERVER_NAME";var JS,XS={},ZS=this&&this.__extends||(JS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}JS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(XS,"__esModule",{value:!0});var eE=function(o){function e(e,t,r){var n=o.call(this,e.definition,e.group)||this;return n.name=t,n.details=r,n}return ZS(e,o),e}(GS.ControlRegistrationParams);XS.AuthenticationControlRegistrationParameters=eE;var tE,rE={},nE=this&&this.__extends||(tE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}tE(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),oE=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(rE,"__esModule",{value:!0});var iE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nE(t,e),t.prototype.read=function(e){var t=YS.ControlRegistrationParamsSerialiser.read(e),r=Sa.readString(e),n=Sa.readCollection(e,function(){return Il.read(e,KS.DetailType)});return new XS.AuthenticationControlRegistrationParameters(t,r,n)},t.prototype.write=function(e,t){var r,n;YS.ControlRegistrationParamsSerialiser.write(e,t),Sa.writeString(e,t.name),Sa.writeByte(e,t.details.length);try{for(var o=oE(t.details),i=o.next();!i.done;i=o.next()){var s=i.value;Sa.writeByte(e,s)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t}(wa.AbstractSerialiser);rE.AuthenticationControlRegistrationParametersSerialiser=new iE;var sE={};Object.defineProperty(sE,"__esModule",{value:!0});var aE=function(e,t){this.params=e,this.cid=t};sE.AuthenticationControlRegistrationRequest=aE;var cE,uE={},pE=this&&this.__extends||(cE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}cE(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(uE,"__esModule",{value:!0});var lE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return pE(t,e),t.prototype.read=function(e){var t=rE.AuthenticationControlRegistrationParametersSerialiser.read(e),r=Ea.CIDSerialiser.read(e);return new sE.AuthenticationControlRegistrationRequest(t,r)},t.prototype.write=function(e,t){rE.AuthenticationControlRegistrationParametersSerialiser.write(e,t.params),Ea.CIDSerialiser.write(e,t.cid)},t}(wa.AbstractSerialiser);uE.AuthenticationControlRegistrationRequestSerialiser=new lE;var fE,hE={};Object.defineProperty(hE,"__esModule",{value:!0}),(fE=hE.AddressType||(hE.AddressType={}))[fE.GLOBAL=1]="GLOBAL",fE[fE.LOCAL=2]="LOCAL",fE[fE.LOOPBACK=3]="LOOPBACK",fE[fE.UNKNOWN=4]="UNKNOWN";var dE={};Object.defineProperty(dE,"__esModule",{value:!0}),dE.read=function(e){var t=Sa.readString(e),r=Sa.readString(e)||t,n=Sa.readString(e)||r;return{type:Il.read(e,hE.AddressType),address:t,hostname:r,resolved:n,details:{country:Sa.readString(e),language:Sa.readString(e)},coordinates:{latitude:wc.intBitsToFloat(Sa.readInt32(e)),longitude:wc.intBitsToFloat(Sa.readInt32(e))}}};var yE,vE,_E={};Object.defineProperty(_E,"__esModule",{value:!0}),(vE=_E.ClientType||(_E.ClientType={}))[vE.JAVASCRIPT_BROWSER=0]="JAVASCRIPT_BROWSER",vE[vE.ANDROID=3]="ANDROID",vE[vE.IOS=4]="IOS",vE[vE.JAVA=8]="JAVA",vE[vE.DOTNET=9]="DOTNET",vE[vE.C=10]="C",vE[vE.OTHER=12]="OTHER",(yE=_E.TransportType||(_E.TransportType={}))[yE.WEBSOCKET=0]="WEBSOCKET",yE[yE.HTTP_LONG_POLL=1]="HTTP_LONG_POLL",yE[yE.IFRAME_LONG_POLL=2]="IFRAME_LONG_POLL",yE[yE.IFRAME_STREAMING=3]="IFRAME_STREAMING",yE[yE.DPT=4]="DPT",yE[yE.HTTPC=5]="HTTPC",yE[yE.HTTPC_DUPLEX=6]="HTTPC_DUPLEX",yE[yE.OTHER=7]="OTHER";var SE={};Object.defineProperty(SE,"__esModule",{value:!0}),SE.read=function(e){return{principal:Sa.readString(e),clientType:Il.read(e,_E.ClientType),transportType:Il.read(e,_E.TransportType)}};var EE={};function mE(e){var t=Sa.readByte(e);switch(t){case 0:return!1;case 1:return!0;default:throw new Error("Invalid option byte: "+t)}}Object.defineProperty(EE,"__esModule",{value:!0}),EE.read=function(e){var t={available:[]};return mE(e)&&(mE(e)&&(t.available.push(KS.DetailType.SUMMARY),t.summary=SE.read(e)),mE(e)&&(t.available.push(KS.DetailType.LOCATION),t.location=dE.read(e)),mE(e)&&(t.available.push(KS.DetailType.CONNECTOR_NAME),t.connector=Sa.readString(e)),mE(e)&&(t.available.push(KS.DetailType.SERVER_NAME),t.server=Sa.readString(e))),t};var wE={};Object.defineProperty(wE,"__esModule",{value:!0});var gE=function(e,t,r,n){this.principal=e,this.credentials=t,this.details=r,this.cid=n};wE.AuthenticationRequest=gE;var TE,OE={},IE=this&&this.__extends||(TE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}TE(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(OE,"__esModule",{value:!0});var RE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return IE(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=oh.read(e),n=EE.read(e),o=Ea.CIDSerialiser.read(e);return new wE.AuthenticationRequest(t,r,n,o)},t}(wa.AbstractSerialiser);OE.AuthenticationRequestSerialiser=new RE;var bE,CE,AE={};Object.defineProperty(AE,"__esModule",{value:!0}),(CE=bE=AE.TypeCode||(AE.TypeCode={}))[CE.DENY=0]="DENY",CE[CE.ABSTAIN=1]="ABSTAIN",CE[CE.ALLOW=2]="ALLOW",CE[CE.ALLOW_WITH_RESULT=3]="ALLOW_WITH_RESULT";var PE=function(e,t){this.type=e,this.result=t};AE.allow=function(e){return new PE(bE.ALLOW_WITH_RESULT,{roles:(t=e).roles||[],properties:t.properties||{}});var t},AE.DENY=Object.freeze(new PE(bE.DENY)),AE.ALLOW=Object.freeze(new PE(bE.ALLOW)),AE.ABSTAIN=Object.freeze(new PE(bE.ABSTAIN));var NE,ME={},LE=this&&this.__extends||(NE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}NE(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ME,"__esModule",{value:!0});var DE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return LE(t,e),t.prototype.read=function(e){switch(Il.read(e,AE.TypeCode)){case AE.TypeCode.ABSTAIN:return AE.ABSTAIN;case AE.TypeCode.ALLOW:return AE.ALLOW;case AE.TypeCode.ALLOW_WITH_RESULT:return AE.allow({roles:Sa.readCollection(e,Sa.readString),properties:Sa.readDictionary(e,Sa.readString)});default:return AE.DENY}},t.prototype.write=function(e,t){if(Il.write(e,t.type),t.type===AE.TypeCode.ALLOW_WITH_RESULT){var r=t.result;Sa.writeCollection(e,r.roles,Sa.writeString),Sa.writeDictionary(e,r.properties,Sa.writeString)}},t}(wa.AbstractSerialiser);ME.AuthenticationResponseSerialiser=new DE;var jE,UE={},xE=this&&this.__extends||(jE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}jE(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(UE,"__esModule",{value:!0});var BE=function(o){function e(e,t,r){var n=o.call(this,t,r)||this;return n.name=e,n}return xE(e,o),e}(GS.ControlRegistrationParams);UE.AuthenticatorRegistrationParameters=BE;var kE,qE={},VE=this&&this.__extends||(kE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}kE(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(qE,"__esModule",{value:!0});var FE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return VE(t,e),t.prototype.read=function(e){var t=YS.ControlRegistrationParamsSerialiser.read(e),r=Sa.readString(e);return new UE.AuthenticatorRegistrationParameters(r,t.definition,t.group)},t.prototype.write=function(e,t){YS.ControlRegistrationParamsSerialiser.write(e,t),Sa.writeString(e,t.name)},t}(wa.AbstractSerialiser);qE.AuthenticatorRegistrationParametersSerialiser=new FE;var GE={};Object.defineProperty(GE,"__esModule",{value:!0});var HE=function(e,t){this.params=e,this.cid=t};GE.AuthenticatorRegistrationRequest=HE;var WE,YE={},zE=this&&this.__extends||(WE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}WE(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(YE,"__esModule",{value:!0});var $E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return zE(t,e),t.prototype.read=function(e){var t=qE.AuthenticatorRegistrationParametersSerialiser.read(e),r=Ea.CIDSerialiser.read(e);return new GE.AuthenticatorRegistrationRequest(t,r)},t.prototype.write=function(e,t){qE.AuthenticatorRegistrationParametersSerialiser.write(e,t.params),Ea.CIDSerialiser.write(e,t.cid)},t}(wa.AbstractSerialiser);YE.AuthenticatorRegistrationRequestSerialiser=new $E;var QE={};Object.defineProperty(QE,"__esModule",{value:!0});var KE=function(e,t,r,n,o){this.principal=e,this.credentials=t,this.sessionProperties=r,this.proposedProperties=n,this.cid=o};QE.AuthenticatorRequest=KE;var JE,XE={},ZE=this&&this.__extends||(JE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}JE(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(XE,"__esModule",{value:!0});var em=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ZE(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=oh.read(e),n=Sa.readDictionary(e,Sa.readString),o=Sa.readDictionary(e,Sa.readString),i=Ea.CIDSerialiser.read(e);return new QE.AuthenticatorRequest(t,r,n,o,i)},t}(wa.AbstractSerialiser);XE.AuthenticatorRequestSerialiser=new em;var tm,rm,nm={};Object.defineProperty(nm,"__esModule",{value:!0}),(rm=tm=nm.TypeCode||(nm.TypeCode={}))[rm.DENY=0]="DENY",rm[rm.ABSTAIN=1]="ABSTAIN",rm[rm.ALLOW=2]="ALLOW";var om=function(e,t){this.type=e,this.properties=t};nm.AuthenticatorResponse=om,nm.DENY=Object.freeze(new om(tm.DENY)),nm.ABSTAIN=Object.freeze(new om(tm.ABSTAIN));var im,sm={},am=this&&this.__extends||(im=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}im(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(sm,"__esModule",{value:!0});var cm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return am(t,e),t.prototype.read=function(e){switch(Il.read(e,nm.TypeCode)){case nm.TypeCode.ABSTAIN:return nm.ABSTAIN;case nm.TypeCode.ALLOW:var t=Sa.readDictionary(e,Sa.readString);return new nm.AuthenticatorResponse(nm.TypeCode.ALLOW,t);default:return nm.DENY}},t.prototype.write=function(e,t){Il.write(e,t.type),t.type===nm.TypeCode.ALLOW&&Sa.writeDictionary(e,t.properties||{},Sa.writeString)},t}(wa.AbstractSerialiser);sm.AuthenticatorResponseSerialiser=new cm;var um,pm,lm={};Object.defineProperty(lm,"__esModule",{value:!0}),(pm=lm.GlobalPermissionCode||(lm.GlobalPermissionCode={}))[pm.AUTHENTICATE=0]="AUTHENTICATE",pm[pm.VIEW_SESSION=1]="VIEW_SESSION",pm[pm.MODIFY_SESSION=2]="MODIFY_SESSION",pm[pm.REGISTER_HANDLER=3]="REGISTER_HANDLER",pm[pm.VIEW_SERVER=4]="VIEW_SERVER",pm[pm.CONTROL_SERVER=5]="CONTROL_SERVER",pm[pm.VIEW_SECURITY=6]="VIEW_SECURITY",pm[pm.MODIFY_SECURITY=7]="MODIFY_SECURITY",pm[pm.UNKNOWN_GLOBAL_PERMISSION=8]="UNKNOWN_GLOBAL_PERMISSION",pm[pm.READ_TOPIC_VIEWS=9]="READ_TOPIC_VIEWS",pm[pm.MODIFY_TOPIC_VIEWS=10]="MODIFY_TOPIC_VIEWS",(um=lm.PathPermissionCode||(lm.PathPermissionCode={}))[um.READ_TOPIC=0]="READ_TOPIC",um[um.UPDATE_TOPIC=1]="UPDATE_TOPIC",um[um.MODIFY_TOPIC=2]="MODIFY_TOPIC",um[um.SEND_TO_MESSAGE_HANDLER=3]="SEND_TO_MESSAGE_HANDLER",um[um.SEND_TO_SESSION=4]="SEND_TO_SESSION",um[um.SELECT_TOPIC=5]="SELECT_TOPIC",um[um.QUERY_OBSOLETE_TIME_SERIES_EVENTS=6]="QUERY_OBSOLETE_TIME_SERIES_EVENTS",um[um.EDIT_TIME_SERIES_EVENTS=7]="EDIT_TIME_SERIES_EVENTS",um[um.EDIT_OWN_TIME_SERIES_EVENTS=8]="EDIT_OWN_TIME_SERIES_EVENTS",um[um.ACQUIRE_LOCK=9]="ACQUIRE_LOCK",um[um.UNKNOWN_TOPIC_PERMISSION=10]="UNKNOWN_TOPIC_PERMISSION",um[um.UNKNOWN_PATH_PERMISSION=10]="UNKNOWN_PATH_PERMISSION";var fm={};Object.defineProperty(fm,"__esModule",{value:!0});var hm=function(e){this.permissions=e};fm.ListGlobalPermissionsResult=hm;var dm,ym={},vm=this&&this.__extends||(dm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}dm(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ym,"__esModule",{value:!0});var _m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vm(t,e),t.prototype.read=function(t){return new fm.ListGlobalPermissionsResult(Sa.readCollection(t,function(){var e=lm.GlobalPermissionCode[t.read()];return Lf.GlobalPermission[e]}))},t}(wa.AbstractSerialiser);ym.ListGlobalPermissionsResultSerialiser=new _m;var Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});var Em=function(e){this.permissions=e};Sm.ListPathPermissionsResult=Em;var mm,wm={},gm=this&&this.__extends||(mm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}mm(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(wm,"__esModule",{value:!0});var Tm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gm(t,e),t.prototype.read=function(t){return new Sm.ListPathPermissionsResult(Sa.readCollection(t,function(){var e=lm.PathPermissionCode[t.read()];return Lf.PathPermission[e]}))},t}(wa.AbstractSerialiser);wm.ListPathPermissionsResultSerialiser=new Tm;var Om={};Object.defineProperty(Om,"__esModule",{value:!0});var Im=function(){function e(e,t,r,n){this.anonymous=e,this.named=t,this.roles=r,this.isolatedPaths=n}return e.prototype.toString=function(){return"SecurityConfiguration [anonymous=${this.anonymous}, named=${this.named}, roles=${this.roles}, isolatedPaths=${this.isolatedPaths}]"},e}();Om.SecurityConfigurationImpl=Im;var Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});var bm=function(e,t,r,n,o,i){this.name=e,this.global=t,this.default=r,this.topic=n,this.roles=o,this.lockingPrincipal=i};Rm.RoleImpl=bm;var Cm={};Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.read=function(e){var t=Sa.readString(e),r=Sa.readCollection(e,function(){return Il.read(e,lm.GlobalPermissionCode)}).map(function(e){return lm.GlobalPermissionCode[e]}),n=Sa.readCollection(e,function(){return Il.read(e,lm.PathPermissionCode)}).map(function(e){return lm.PathPermissionCode[e]}),o=Sa.readDictionary(e,function(){return Sa.readCollection(e,function(){return Il.read(e,lm.PathPermissionCode)}).map(function(e){return lm.PathPermissionCode[e]})}),i=Sa.readCollection(e,Sa.readString),s=Sa.readBoolean(e)?Sa.readString(e):void 0;return new Rm.RoleImpl(t,r,n,o,i,s)};var Am,Pm={},Nm=this&&this.__extends||(Am=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Am(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Pm,"__esModule",{value:!0});var Mm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Nm(t,e),t.prototype.read=function(e){var t=Sa.readCollection(e,Sa.readString),r=Sa.readCollection(e,Sa.readString),n=Sa.readCollection(e,Cm.read),o=Sa.readCollection(e,Sa.readString);return new Om.SecurityConfigurationImpl(t,r,n,o)},t}(wa.AbstractSerialiser);Pm.SecurityConfigurationSerialiser=new Mm;var Lm,Dm,jm={};Object.defineProperty(jm,"__esModule",{value:!0}),(Dm=Lm=jm.SessionLockScope||(jm.SessionLockScope={}))[Dm.UNLOCK_ON_SESSION_LOSS=0]="UNLOCK_ON_SESSION_LOSS",Dm[Dm.UNLOCK_ON_CONNECTION_LOSS=1]="UNLOCK_ON_CONNECTION_LOSS",jm.SessionLockOptions={SessionLockScope:Lm};var Um={};Object.defineProperty(Um,"__esModule",{value:!0});var xm=function(e,t,r){this.lockName=e,this.sequence=t,this.scope=r};Um.SessionLockAcquisition=xm;var Bm,km={},qm=this&&this.__extends||(Bm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Bm(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(km,"__esModule",{value:!0});var Vm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return qm(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=Sa.readInt64(e),n=Il.read(e,jm.SessionLockScope);return new Um.SessionLockAcquisition(t,r,n)},t.prototype.write=function(e,t){Sa.writeString(e,t.lockName),Sa.writeInt64(e,t.sequence),Il.write(e,t.scope)},t}(wa.AbstractSerialiser);km.SessionLockAcquisitionSerialiser=new Vm;var Fm,Gm={},Hm=this&&this.__extends||(Fm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Fm(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Gm,"__esModule",{value:!0});var Wm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hm(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.lockName),Sa.writeInt64(e,t.requestId),Il.write(e,t.scope)},t}(wa.AbstractSerialiser);Gm.SessionLockRequestSerialiser=new Wm;var Ym={};function zm(e,t){if(null==e||e<0)throw new Error(t+" is negative: "+e);return e}Object.defineProperty(Ym,"__esModule",{value:!0});var $m=function(e,t,r,n){this.id=e,this.anchorOperator=t,this.spanOperator=r,this.unitsSuffix=n};Ym.Types={ABSOLUTE_START:new $m(0,"fromStart","toStart",""),ABSOLUTE_SEQUENCE:new $m(1,"from","to",""),ABSOLUTE_TIME:new $m(2,"from","to"," ms"),OFFSET_SEQUENCE:new $m(3,"fromLast","untilLast",""),OFFSET_TIME:new $m(4,"fromLast","untilLast"," ms"),NEXT_COUNT:new $m(5,null,"next",""),NEXT_TIME:new $m(6,null,"next"," ms"),PREVIOUS_COUNT:new $m(7,null,"previous",""),PREVIOUS_TIME:new $m(8,null,"previous"," ms")},Ha.enumerize(Ym.Types);var Qm=function(){function t(e,t){this.value=e,this.type=t}return t.at=function(e){return e instanceof Date?new t(iu.requireNonNull(e,"Date").getTime(),Ym.Types.ABSOLUTE_TIME):new t(zm(e,"Sequence"),Ym.Types.ABSOLUTE_SEQUENCE)},t.atStart=function(){return Km},t.offset=function(e){return new t(zm(e,"Count"),Ym.Types.OFFSET_SEQUENCE)},t.offsetMillis=function(e){return new t(zm(e,"Timespan"),Ym.Types.OFFSET_TIME)},t.next=function(e){return new t(zm(e,"Count"),Ym.Types.NEXT_COUNT)},t.nextMillis=function(e){return new t(zm(e,"Timespan"),Ym.Types.NEXT_TIME)},t.previous=function(e){return new t(zm(e,"Count"),Ym.Types.PREVIOUS_COUNT)},t.previousMillis=function(e){return new t(zm(e,"Timespan"),Ym.Types.PREVIOUS_TIME)},t.prototype.equals=function(e){return!!(e&&e instanceof t)&&this.value===e.value&&this.type===e.type},t}(),Km=new(Ym.Point=Qm)(0,Ym.Types.ABSOLUTE_START),Jm={};Object.defineProperty(Jm,"__esModule",{value:!0});var Xm=function(){function t(e,t){this.anchor=e,this.span=t}return t.prototype.equals=function(e){return!!(e&&e instanceof t)&&this.anchor.equals(e.anchor)&&this.span.equals(e.span)},t.prototype.from=function(e){return new t(Ym.Point.at(e),this.span)},t.prototype.fromStart=function(){return new t(Ym.Point.atStart(),this.span)},t.prototype.fromLast=function(e){return new t(Ym.Point.offset(e),this.span)},t.prototype.fromLastMillis=function(e){return new t(Ym.Point.offsetMillis(e),this.span)},t.prototype.to=function(e){return new t(this.anchor,Ym.Point.at(e))},t.prototype.toStart=function(){return new t(this.anchor,Ym.Point.atStart())},t.prototype.untilLast=function(e){return new t(this.anchor,Ym.Point.offset(e))},t.prototype.untilLastMillis=function(e){return new t(this.anchor,Ym.Point.offsetMillis(e))},t.prototype.next=function(e){return new t(this.anchor,Ym.Point.next(e))},t.prototype.nextMillis=function(e){return new t(this.anchor,Ym.Point.nextMillis(e))},t.prototype.previous=function(e){return new t(this.anchor,Ym.Point.previous(e))},t.prototype.previousMillis=function(e){return new t(this.anchor,Ym.Point.previousMillis(e))},t}();Jm.Range=Xm,Jm.DEFAULT_RANGE=new Xm(Ym.Point.atStart(),Ym.Point.offset(0));var Zm={};Object.defineProperty(Zm,"__esModule",{value:!0});var ew=function(){function e(e,t){this.id=e,this.name=t}return e.prototype.toString=function(){return this.name},e}();Zm.StreamStructures={VALUE_EVENT_STREAM:new ew(1,"VALUE_EVENT_STREAM"),EDIT_EVENT_STREAM:new ew(2,"EDIT_EVENT_STREAM")},Ha.enumerize(Zm.StreamStructures),Object.freeze(Zm.StreamStructures);var tw=function(e,t){this.id=e,this.streamStructure=t};Zm.QueryTypes={VALUES:new tw(0,Zm.StreamStructures.VALUE_EVENT_STREAM),ALL_EDITS:new tw(1,Zm.StreamStructures.EDIT_EVENT_STREAM),LATEST_EDITS:new tw(2,Zm.StreamStructures.EDIT_EVENT_STREAM)},Ha.enumerize(Zm.QueryTypes),Object.freeze(Zm.QueryTypes);var rw=function(){function t(e,t,r,n){this.queryType=e,this.viewRange=t,this.editRange=r,this.limit=n}return t.prototype.withViewRange=function(e){return new t(this.queryType,e,this.editRange,this.limit)},t.prototype.withEditRange=function(e){return new t(this.queryType,this.viewRange,e,this.limit)},t.prototype.withLimit=function(e){return new t(this.queryType,this.viewRange,this.editRange,function(e,t){if(e<0)throw new Error('limit" is negative: '+e);return e}(e))},t.prototype.withQueryType=function(e){return new t(e,this.viewRange,this.editRange,this.limit)},t.prototype.equals=function(e){return!!(e&&e instanceof t)&&this.queryType===e.queryType&&this.viewRange.equals(e.viewRange)&&this.editRange.equals(e.editRange)&&this.limit===e.limit},t}();Zm.RangeQueryParameters=rw,Zm.DEFAULT_RANGE_QUERY=Object.freeze(new rw(Zm.QueryTypes.VALUES,Jm.DEFAULT_RANGE,Jm.DEFAULT_RANGE,wc.MAX_SAFE_INTEGER));var nw={};function ow(e){var t=Sa.readInt64(e),r=Il.read(e,Ym.Types);return new Ym.Point(t,r)}function iw(e){var t=ow(e),r=ow(e);return new Jm.Range(t,r)}function sw(e,t){Sa.writeInt64(e,t.value),Il.write(e,t.type)}function aw(e,t){sw(e,t.anchor),sw(e,t.span)}Object.defineProperty(nw,"__esModule",{value:!0}),nw.read=function(e){var t=Il.read(e,Zm.QueryTypes),r=iw(e),n=iw(e),o=Sa.readInt64(e);return new Zm.RangeQueryParameters(t,r,n,o)},nw.write=function(e,t){Il.write(e,t.queryType),aw(e,t.viewRange),aw(e,t.editRange),Sa.writeInt64(e,t.limit)};var cw={};Object.defineProperty(cw,"__esModule",{value:!0});var uw=function(e,t){this.topicPath=e,this.parameters=t};cw.RangeQueryRequest=uw;var pw,lw={},fw=this&&this.__extends||(pw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}pw(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(lw,"__esModule",{value:!0});var hw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fw(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=nw.read(e);return new cw.RangeQueryRequest(t,r)},t.prototype.write=function(e,t){Sa.writeString(e,t.topicPath),nw.write(e,t.parameters)},t}(wa.AbstractSerialiser);lw.RangeQueryRequestSerialiser=new hw;var dw={};function yw(e){return!!e}function vw(e,t){return e.originalEvent.sequence!==t.originalEvent.sequence?e.originalEvent.sequence-t.originalEvent.sequence:e.sequence-t.sequence}Object.defineProperty(dw,"__esModule",{value:!0});var _w=function(){function i(e,t,r,n){this.events=n,this.selectedCount=e.toNumber(),this.isComplete=e.equals(t),this.streamStructure=r}return i.prototype.merge=function(e){var t,n,r=this.events.concat(e.events).sort(vw).map((t=this.events.concat(e.events),n={},t.forEach(function(e){var t=e.originalEvent.sequence.toString(10);(!n[t]||n[t].sequence.toNumber()<e.sequence.toNumber())&&(n[t]=e)}),function(e){var t=e.originalEvent.sequence.toString(10),r=n[t];return r?e.isEditEvent?e.sequence.equals(r.sequence)?(delete n[t],e):null:(delete n[t],r):null})).filter(yw),o=Us.fromNumber(r.length);return new i(o,o,Zm.StreamStructures.VALUE_EVENT_STREAM,r)},i}();dw.QueryResultImpl=_w;var Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});var Ew=function(){function e(e,t,r){this.valueDataType=e,this.selectedCount=t,this.events=r}return e.prototype.createQueryResult=function(t,e){var r=this;if(!this.valueDataType.canReadAs(t))throw new Error("Time series topic has an incompatible event data type: "+this.valueDataType);return new dw.QueryResultImpl(this.selectedCount,Us.fromNumber(this.events.length),e,this.events.map(function(e){return e.withValue(r.valueDataType.readAs(t,e.value))}))},e}();Sw.RangeQueryResult=Ew;var mw,ww={},gw=this&&this.__extends||(mw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}mw(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ww,"__esModule",{value:!0});var Tw=function(e,t){this.sequence=e,this.timestamp=t};function Ow(e,t,r){var n=Sa.readInt64(e).add(t.sequence),o=Sa.readInt64(e).add(t.timestamp),i=Sa.readBytes(e),s=r[i.toString()]||i.toString("utf-8");return new Fp.EventMetadataImpl(n.toNumber(),o.toNumber(),s)}function Iw(e,t){t[Sa.readBytes(e).toString()]=Sa.readString(e)}var Rw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gw(t,e),t.prototype.read=function(e){var t,r,n,o,i,s,a,c=nl.DataTypes.get(Sa.readString(e));if(null===c)throw new Error("Received unexpected data type");for(var u,p=Sa.readInt64(e),l=new Tw(Us.ZERO,Us.ZERO),f={},h=[],d=Sa.readInt32(e),y=0;y<d;++y)switch(Sa.readByte(e)){case 0:h.push((void 0,a=Ow(s=e,l,f),qp.EventImpl.create(a,a,Sa.readBytes(s))));break;case 1:h.push((void 0,o=Ow(t=e,r=l,n=f),i=Ow(t,r,n),qp.EventImpl.create(i,o,Sa.readBytes(t))));break;case 2:u=e,l=new Tw(Sa.readInt64(u),Sa.readInt64(u));break;case 3:Iw(e,f);break;default:Iw(e,f)}return new Sw.RangeQueryResult(c,p,h)},t}(wa.AbstractSerialiser);ww.RangeQueryResultSerialiser=new Rw;var bw,Cw={},Aw=this&&this.__extends||(bw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}bw(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Cw,"__esModule",{value:!0});var Pw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Aw(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.path),Sa.writeString(e,t.dataType.name()),Sa.writeBytes(e,t.value)},t}(wa.AbstractSerialiser);Cw.TimeSeriesAppendRequestSerialiser=new Pw;var Nw,Mw={},Lw=this&&this.__extends||(Nw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Nw(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Mw,"__esModule",{value:!0});var Dw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Lw(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.path),Sa.writeString(e,t.dataType.name()),Sa.writeInt64(e,t.sequence),Sa.writeBytes(e,t.value)},t}(wa.AbstractSerialiser);Mw.TimeSeriesEditRequestSerialiser=new Dw;var jw,Uw={},xw=this&&this.__extends||(jw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}jw(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Uw,"__esModule",{value:!0});var Bw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xw(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.path),Al.write(e,t.specification)},t}(wa.AbstractSerialiser);Uw.TopicAddRequestSerialiser=new Bw;var kw,qw={};Object.defineProperty(qw,"__esModule",{value:!0}),(kw=qw.TopicAddResponseStatus||(qw.TopicAddResponseStatus={}))[kw.OK=0]="OK",kw[kw.EXISTS=1]="EXISTS";var Vw=function(e){this.status=e};qw.TopicAddResponse=Vw;var Fw,Gw={},Hw=this&&this.__extends||(Fw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Fw(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Gw,"__esModule",{value:!0});var Ww=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Hw(t,e),t.prototype.read=function(e){var t=Sa.readByte(e);return new qw.TopicAddResponse(t)},t}(wa.AbstractSerialiser);Gw.TopicAddResponseSerialiser=new Ww;var Yw,zw={},$w=this&&this.__extends||(Yw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Yw(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(zw,"__esModule",{value:!0});var Qw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $w(t,e),t.prototype.write=function(e,t){Ea.CIDSerialiser.write(e,t.cid)},t}(wa.AbstractSerialiser);zw.TopicNotificationDeregistrationRequestSerialiser=new Qw;var Kw,Jw={};Object.defineProperty(Jw,"__esModule",{value:!0}),(Kw=Jw.TopicNotificationType||(Jw.TopicNotificationType={}))[Kw.ADDED=0]="ADDED",Kw[Kw.SELECTED=1]="SELECTED",Kw[Kw.REMOVED=2]="REMOVED",Kw[Kw.DESELECTED=3]="DESELECTED";var Xw={};Object.defineProperty(Xw,"__esModule",{value:!0});var Zw=function(e,t,r){this.cid=e,this.path=t,this.type=r,this.isDescendantEvent=!0};Xw.TopicNotificationDescendantEvent=Zw;var eg,tg={},rg=this&&this.__extends||(eg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}eg(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(tg,"__esModule",{value:!0});var ng=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return rg(t,e),t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e),r=Sa.readString(e),n=Il.read(e,Jw.TopicNotificationType);return new Xw.TopicNotificationDescendantEvent(t,r,n)},t}(wa.AbstractSerialiser);tg.TopicNotificationDescendantEventSerialiser=new ng;var og,ig={},sg=this&&this.__extends||(og=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}og(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ig,"__esModule",{value:!0});var ag=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return sg(t,e),t.prototype.write=function(e,t){Ea.CIDSerialiser.write(e,t.cid),lf.TopicSelectorSerialiser.write(e,t.selector)},t}(wa.AbstractSerialiser);ig.TopicNotificationDeselectionSerialiser=new ag;var cg={};Object.defineProperty(cg,"__esModule",{value:!0});var ug=function(e,t,r,n){this.cid=e,this.path=t,this.type=r,this.specification=n,this.isDescendantEvent=!1};cg.TopicNotificationEvent=ug;var pg,lg={},fg=this&&this.__extends||(pg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}pg(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(lg,"__esModule",{value:!0});var hg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fg(t,e),t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e),r=Sa.readString(e),n=Il.read(e,Jw.TopicNotificationType),o=Al.read(e);return new cg.TopicNotificationEvent(t,r,n,o)},t}(wa.AbstractSerialiser);lg.TopicNotificationEventSerialiser=new hg;var dg,yg={},vg=this&&this.__extends||(dg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}dg(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(yg,"__esModule",{value:!0});var _g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return vg(t,e),t.prototype.write=function(e,t){Ea.CIDSerialiser.write(e,t.cid),lf.TopicSelectorSerialiser.write(e,t.selector)},t}(wa.AbstractSerialiser);yg.TopicNotificationSelectionSerialiser=new _g;var Sg,Eg,mg={},wg=this&&this.__extends||(Sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Sg(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(mg,"__esModule",{value:!0}),(Eg=mg.ConstraintType||(mg.ConstraintType={}))[Eg.UNCONSTRAINED=0]="UNCONSTRAINED",Eg[Eg.CONJUNCTION=1]="CONJUNCTION",Eg[Eg.BINARY_VALUE=2]="BINARY_VALUE",Eg[Eg.NO_VALUE=3]="NO_VALUE",Eg[Eg.LOCKED=4]="LOCKED",Eg[Eg.NO_TOPIC=5]="NO_TOPIC",Eg[Eg.PARTIAL_JSON=6]="PARTIAL_JSON";var gg=function(){function e(){}return e.prototype.and=function(e){if(!Array.isArray(e)&&"CONJUNCTION"===e.getConstraintType())return e.and(this);var t=Array.isArray(e)?e.concat(this):[this,e];return Pg(t),new Og(t)},e}(),Tg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wg(t,e),t.prototype.getConstraintType=function(){return"UNCONSTRAINED"},t}(gg);mg.Unconstrained=Tg;var Og=function(){function r(e){Pg(e),this.constraints=e}return r.prototype.and=function(e){if(!Array.isArray(e)&&"CONJUNCTION"===e.getConstraintType())return e.and(this.constraints);var t=this.constraints.concat(e);return Pg(t),new r(t)},r.prototype.getConstraints=function(){return this.constraints.slice()},r.prototype.getConstraintType=function(){return"CONJUNCTION"},r}(),Ig=function(r){function e(e){var t=r.call(this)||this;return t.bytes=e,t}return wg(e,r),e.prototype.getBytes=function(){return this.bytes},e.prototype.getConstraintType=function(){return"BINARY_VALUE"},e}(gg);mg.BinaryValue=Ig;var Rg=function(r){function e(e){var t=r.call(this)||this;return t.lock=e,t.lockName=e.getName(),t.sequence=e.getSequence(),t}return wg(e,r),e.prototype.getLockName=function(){return this.lockName},e.prototype.getSequence=function(){return this.sequence},e.prototype.getConstraintType=function(){return"LOCKED"},e}(gg);mg.Locked=Rg;var bg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wg(t,e),t.prototype.getConstraintType=function(){return"NO_TOPIC"},t}(gg);mg.NoTopic=bg;var Cg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wg(t,e),t.prototype.getConstraintType=function(){return"NO_VALUE"},t}(gg);mg.NoValue=Cg;var Ag=function(n){function i(e,t){void 0===e&&(e={}),void 0===t&&(t=new Set);var r=n.call(this)||this;return r.withValues=e,r.withoutValues=t,r}return wg(i,n),i.prototype.getWithValues=function(){return Object.assign({},this.withValues)},i.prototype.getWithoutValues=function(){return new Set(this.withoutValues)},i.prototype.with=function(e,t,r){var n=void 0!==r?r:nl.DataTypes.getByValue(t);if(void 0===n)throw new Error("Datatype invalid or could not be inferred");iu.requireNonNull(t,"value"),Xc.JSONPointer.parse(iu.requireNonNull(e,"pointer"));var o={};return o[e.toString()]=n.toBytes(t),new i(Object.assign({},this.withValues,o),this.withoutValues)},i.prototype.without=function(e){Xc.JSONPointer.parse(iu.requireNonNull(e,"pointer"));var t=new Set(this.withoutValues);return t.add(e.toString()),new i(this.withValues,t)},i.prototype.getConstraintType=function(){return"PARTIAL_JSON"},i}(gg);function Pg(e){var r;e.forEach(function(t){if(function(e){switch(t.getConstraintType()){case"BINARY_VALUE":case"NO_VALUE":case"NO_TOPIC":case"PARTIAL_JSON":return!0;default:return!1}}()){if(void 0!==r)throw new Error("Multiple value constraints found: "+r+" and "+t);r=t}})}mg.PartialJSONImpl=Ag;var Ng={};Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.write=function(e,t){Sa.writeBytes(e,t.getBytes().asBuffer())};var Mg={};Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.write=function(e,t,r){Sa.writeCollection(e,t.getConstraints(),r)};var Lg={};Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.write=function(e,t){Sa.writeString(e,t.getLockName()),Sa.writeInt64(e,t.getSequence())};var Dg={};Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.write=function(){};var jg={};Object.defineProperty(jg,"__esModule",{value:!0}),jg.write=function(){};var Ug={};Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.write=function(e,t){Sa.writeObject(e,t.getWithValues(),Sa.writeString,function(e,t){Sa.writeBytes(e,t.asBuffer())}),Sa.writeCollection(e,Array.from(t.getWithoutValues()),Sa.writeString)};var xg={};Object.defineProperty(xg,"__esModule",{value:!0}),xg.write=function(){};var Bg={};Object.defineProperty(Bg,"__esModule",{value:!0});var kg={UNCONSTRAINED:xg,CONJUNCTION:Mg,BINARY_VALUE:Ng,NO_VALUE:jg,LOCKED:Lg,NO_TOPIC:Dg,PARTIAL_JSON:Ug};Bg.write=function e(t,r){if(void 0===r.getConstraintType||void 0===mg.ConstraintType[r.getConstraintType()])throw new Error("Unknown constraint type");Sa.writeByte(t,mg.ConstraintType[r.getConstraintType()]),kg[r.getConstraintType()].write(t,r,e)};var qg,Vg={},Fg=this&&this.__extends||(qg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}qg(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Vg,"__esModule",{value:!0});var Gg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fg(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.path),Al.write(e,t.topicSpecification),Sa.writeBytes(e,t.value),Bg.write(e,t.constraint)},t}(wa.AbstractSerialiser);Vg.AddAndSetTopicRequestSerialiser=new Gg;var Hg,Wg,Yg={};Object.defineProperty(Yg,"__esModule",{value:!0}),(Wg=Hg=Yg.TopicCreationResult||(Yg.TopicCreationResult={}))[Wg.CREATED=1]="CREATED",Wg[Wg.EXISTS=2]="EXISTS",Yg.TopicUpdateNamespace={TopicCreationResult:Hg};var zg={};Object.defineProperty(zg,"__esModule",{value:!0});var $g=function(e){this.result=e};zg.AddTopicResult=$g;var Qg,Kg,Jg,Xg={},Zg=this&&this.__extends||(Kg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}Kg(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(Xg,"__esModule",{value:!0}),(Jg=Qg||(Qg={}))[Jg.CREATED=0]="CREATED",Jg[Jg.EXISTS=1]="EXISTS";var eT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Zg(t,e),t.prototype.read=function(e){var t=Il.read(e,Qg)===Qg.CREATED?Yg.TopicCreationResult.CREATED:Yg.TopicCreationResult.EXISTS;return new zg.AddTopicResult(t)},t}(wa.AbstractSerialiser);Xg.AddTopicResultSerialiser=new eT;var tT,rT={},nT=this&&this.__extends||(tT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}tT(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(rT,"__esModule",{value:!0});var oT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nT(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.path),Sa.writeString(e,t.patch),Bg.write(e,t.constraint)},t}(wa.AbstractSerialiser);rT.ApplyJsonPatchRequestSerialiser=new oT;var iT,sT={},aT=this&&this.__extends||(iT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}iT(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(sT,"__esModule",{value:!0});var cT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return aT(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.path),Il.write(e,t.topicType),Sa.writeBytes(e,t.value),Bg.write(e,t.constraint)},t}(wa.AbstractSerialiser);sT.CreateUpdateStreamAndSetRequestSerialiser=new cT;var uT,pT={},lT=this&&this.__extends||(uT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}uT(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(pT,"__esModule",{value:!0});var fT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return lT(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.path),Il.write(e,t.topicType),Bg.write(e,t.constraint)},t}(wa.AbstractSerialiser);pT.CreateUpdateStreamRequestSerialiser=new fT;var hT={};Object.defineProperty(hT,"__esModule",{value:!0});var dT=function(e){this.failedOperation=e<0?void 0:e};hT.JsonPatchResult=dT;var yT,vT={},_T=this&&this.__extends||(yT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}yT(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(vT,"__esModule",{value:!0});var ST=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _T(t,e),t.prototype.read=function(e){var t=Sa.readInt32(e);return new hT.JsonPatchResult(t)},t}(wa.AbstractSerialiser);vT.JsonPatchResultSerialiser=new ST;var ET,mT={},wT=this&&this.__extends||(ET=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}ET(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(mT,"__esModule",{value:!0});var gT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wT(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.path),Il.write(e,t.topicType),Sa.writeBytes(e,t.value),Bg.write(e,t.constraint)},t}(wa.AbstractSerialiser);mT.SetTopicRequestSerialiser=new gT;var TT,OT={},IT=this&&this.__extends||(TT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}TT(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(OT,"__esModule",{value:!0});var RT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return IT(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.path),Al.write(e,t.topicSpecification),Bg.write(e,t.constraint)},t}(wa.AbstractSerialiser);OT.UpdateStreamAddTopicRequestSerialiser=new RT;var bT={};Object.defineProperty(bT,"__esModule",{value:!0});var CT=function(e,t){this.creationResult=e,this.streamId=t};bT.UpdateStreamAddTopicResponse=CT;var AT={};Object.defineProperty(AT,"__esModule",{value:!0});var PT=function(e,t,r,n,o){this.topicId=e,this.instanceId=t,this.clustered=r,this.partitionId=n,this.generationId=o};AT.UpdateStreamId=PT;var NT,MT={},LT=this&&this.__extends||(NT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}NT(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(MT,"__esModule",{value:!0});var DT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return LT(t,e),t.prototype.read=function(e){var t=Sa.readInt32(e),r=Sa.readInt32(e),n=Sa.readInt32(e),o=Sa.readInt32(e),i=0!==n;return new AT.UpdateStreamId(t,r,i,i?n-1:0,i?o:0)},t.prototype.write=function(e,t){Sa.writeInt32(e,t.topicId),Sa.writeInt32(e,t.instanceId),t.clustered?(Sa.writeInt32(e,t.partitionId+1),Sa.writeInt32(e,t.generationId)):(Sa.writeInt32(e,0),Sa.writeInt32(e,0))},t}(wa.AbstractSerialiser);MT.UpdateStreamIdSerialiser=new DT;var jT,UT={},xT=this&&this.__extends||(jT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}jT(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(UT,"__esModule",{value:!0});var BT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xT(t,e),t.prototype.read=function(e){var t=Xg.AddTopicResultSerialiser.read(e),r=MT.UpdateStreamIdSerialiser.read(e);return new bT.UpdateStreamAddTopicResponse(t.result,r)},t}(wa.AbstractSerialiser);UT.UpdateStreamAddTopicResponseSerialiser=new BT;var kT,qT={},VT=this&&this.__extends||(kT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}kT(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(qT,"__esModule",{value:!0});var FT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return VT(t,e),t.prototype.write=function(e,t){MT.UpdateStreamIdSerialiser.write(e,t.streamId),Sa.writeBytes(e,t.update)},t}(wa.AbstractSerialiser);qT.UpdateStreamRequestSerialiser=new FT;var GT={};Object.defineProperty(GT,"__esModule",{value:!0});var HT=function(e,t){this.view=e,this.errors=t};GT.CreateTopicViewResult=HT;var WT={};Object.defineProperty(WT,"__esModule",{value:!0}),WT.readTopicView=function(e){return{name:Sa.readString(e),specification:Sa.readString(e),roles:new Set(Sa.readCollection(e,Sa.readString))}};var YT,zT={},$T=this&&this.__extends||(YT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}YT(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(zT,"__esModule",{value:!0});var QT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $T(t,e),t.prototype.read=function(e){if(0===e.peek()){Sa.readByte(e);var t=WT.readTopicView(e);return new GT.CreateTopicViewResult(t)}var r=_v.ErrorReportListSerialiser.read(e);return new GT.CreateTopicViewResult(void 0,r)},t}(wa.AbstractSerialiser);zT.CreateTopicViewResultSerialiser=new QT;var KT={};Object.defineProperty(KT,"__esModule",{value:!0});var JT=function(e){this.result=e};KT.ListTopicViewsResult=JT;var XT,ZT={},eO=this&&this.__extends||(XT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}XT(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ZT,"__esModule",{value:!0});var tO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eO(t,e),t.prototype.read=function(e){var t=Sa.readCollection(e,WT.readTopicView);return new KT.ListTopicViewsResult(t)},t}(wa.AbstractSerialiser);ZT.ListTopicViewsResultSerialiser=new tO;var rO,nO={},oO=this&&this.__extends||(rO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}rO(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(nO,"__esModule",{value:!0});var iO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return oO(t,e),t.prototype.write=function(e,t){Sa.writeString(e,t.name),Sa.writeString(e,t.specification)},t}(wa.AbstractSerialiser);nO.NamedTopicViewSpecificationSerialiser=new iO;var sO={};Object.defineProperty(sO,"__esModule",{value:!0}),sO.read=function(e){return Sa.readInt32(e)},sO.write=function(e,t){Sa.writeInt32(e,t)};var aO={};Object.defineProperty(aO,"__esModule",{value:!0});var cO=function(){function e(){}return e.getAllTypes=function(){return new Set([tl.TopicTypeEnum.JSON,tl.TopicTypeEnum.BINARY,tl.TopicTypeEnum.RECORD_V2,tl.TopicTypeEnum.DOUBLE,tl.TopicTypeEnum.INT64,tl.TopicTypeEnum.STRING,tl.TopicTypeEnum.TIME_SERIES])},e}();aO.FetchRequest=cO;var uO={};Object.defineProperty(uO,"__esModule",{value:!0});var pO=function(e,t){this.id=e,this.reason=t};uO.UnsubscribeReasonEnum={SUBSCRIPTION_REFRESH:new pO(void 0,"The server has re-subscribed this session"),STREAM_CHANGE:new pO(void 0,"A more specific stream has been registered to the same path"),REQUESTED:new pO(0,"The unsubscription was requested by this client"),CONTROL:new pO(1,"The server or another client unsubscribed this client"),REMOVED:new pO(2,"The topic was removed"),AUTHORIZATION:new pO(3,"Not authorized to subscribe to this topic"),UNKNOWN_UNSUBSCRIBE_REASON:new pO(4,"Unknown unsubscribe reason"),BACK_PRESSURE:new pO(5,"The server has unsubscribed due to a backlog of messages")},Ha.enumerize(uO.UnsubscribeReasonEnum),Object.freeze(uO.UnsubscribeReasonEnum);var lO=function(e,t){this.id=e,this.reason=t};uO.UpdateFailReasonEnum={INCOMPATIBLE_UPDATE:new lO(1,"Update type is incompatible with topic type"),UPDATE_FAILED:new lO(2,"Update failed - possible content incompatibility"),INVALID_UPDATER:new lO(3,"Updater is invalid for updating"),MISSING_TOPIC:new lO(4,"Topic does not exist"),EXCLUSIVE_UPDATER_CONFLICT:new lO(7,"An exclusive update source is already registered for the topic branch"),DELTA_WITHOUT_VALUE:new lO(8,"An attempt has been made to apply a delta to a topic that does not yet have a value"),CLUSTER_REPARTITION:new lO(9,"When trying to update the topic the cluster was migrating the partition that owns the topic"),INCOMPATIBLE_STATE:new lO(10,"An update could not be performed because the topic is managed bya component (e.g fan-out) that prohibits updates from the caller"),UNSATISFIED_CONSTRAINT:new lO(-1,"The topic update failed because the constraint was not satisfied"),INVALID_UPDATE_STREAM:new lO(-2,"The topic update failed because the update stream is no longer valid")},Ha.enumerize(uO.UpdateFailReasonEnum),Object.freeze(uO.UpdateFailReasonEnum);var fO=function(e,t){this.id=e,this.reason=t};uO.TopicAddFailReasonEnum={EXISTS:new fO(1,"The topic already exists with the same details"),EXISTS_MISMATCH:new fO(2,"The topic already exists, with different details"),INVALID_PATH:new fO(3,"The topic path is invalid"),INVALID_DETAILS:new fO(4,"The topic details are invalid"),USER_CODE_ERROR:new fO(5,"A user supplied class could not be found or instantiated"),TOPIC_NOT_FOUND:new fO(6,"A referenced topic could not be found"),PERMISSIONS_FAILURE:new fO(7,"Invalid permissions to add a topic at the specified path"),INITIALISE_ERROR:new fO(8,"The topic could not be initialised, supplied value may be of the wrong format"),UNEXPECTED_ERROR:new fO(9,"An unexpected error occured while creating the topic"),CLUSTER_REPARTITION:new fO(10,"When trying to create the topic the cluster was migrating the partition that owns the topic"),EXCEEDED_LICENSE_LIMIT:new fO(11,"Adding the topic failed because of a license limit"),INCOMPATIBLE_PARENT:new fO(12,"Adding the topic failed because an incompatible topic is already bound to the parent path"),INCOMPATIBLE_MASTER:new fO(13,"Adding a slave topic failed because an incompatible topic is already bound to the specified master path."),EXISTS_INCOMPATIBLE:new fO(14,"Adding the topic failed because a topic is already bound to the specifiedpath but the caller does not have the rights to manage it"),INVALID_NAME:new fO(15,"The supplied topic path is invalid.")},Ha.enumerize(uO.TopicAddFailReasonEnum),Object.freeze(uO.TopicAddFailReasonEnum),uO.topicsNamespace={FetchRequest:aO.FetchRequest,TopicType:tl.TopicTypeEnum,TopicSpecification:Rl.TopicSpecification,UnsubscribeReason:uO.UnsubscribeReasonEnum,UpdateFailReason:uO.UpdateFailReasonEnum,TopicAddFailReason:uO.TopicAddFailReasonEnum};var hO={};Object.defineProperty(hO,"__esModule",{value:!0});var dO=function(e,t){this.id=e,this.reason=t};hO.UnsubscriptionNotification=dO;var yO,vO={},_O=this&&this.__extends||(yO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}yO(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(vO,"__esModule",{value:!0});var SO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _O(t,e),t.prototype.read=function(e){var t=sO.read(e),r=Il.read(e,uO.UnsubscribeReasonEnum);return new hO.UnsubscriptionNotification(t,r)},t.prototype.write=function(e,t){if(sO.write(e,t.id),void 0===t.reason.id)throw new Error("Cannot serialise UnsubscribeReason ${value.reason.reason}");Il.write(e,t.reason)},t}(wa.AbstractSerialiser);vO.UnsubscriptionNotificationSerialiser=new SO;var EO={};Object.defineProperty(EO,"__esModule",{value:!0});var mO=function(e,t,r,n){this.cid=e,this.path=t,this.id=r,this.bytes=n};EO.UpdateSourceDeltaRequest=mO;var wO,gO={},TO=this&&this.__extends||(wO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}wO(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(gO,"__esModule",{value:!0});var OO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return TO(t,e),t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e),r=Sa.readString(e),n=Sa.readInt32(e),o=Sa.readBytes(e);return new EO.UpdateSourceDeltaRequest(t,r,n,o)},t.prototype.write=function(e,t){Ea.CIDSerialiser.write(e,t.cid),Sa.writeString(e,t.path),Sa.writeInt32(e,t.id),Sa.writeBytes(e,t.bytes)},t}(wa.AbstractSerialiser);gO.UpdateSourceDeltaRequestSerialiser=new OO;var IO={};Object.defineProperty(IO,"__esModule",{value:!0});var RO=function(e){this.cid=e};IO.UpdateSourceDeregistrationRequest=RO;var bO,CO={},AO=this&&this.__extends||(bO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}bO(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(CO,"__esModule",{value:!0});var PO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return AO(t,e),t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e);return new IO.UpdateSourceDeregistrationRequest(t)},t.prototype.write=function(e,t){Ea.CIDSerialiser.write(e,t.cid)},t}(wa.AbstractSerialiser);CO.UpdateSourceDeregistrationRequestSerialiser=new PO;var NO={};Object.defineProperty(NO,"__esModule",{value:!0});var MO=function(e,t){this.cid=e,this.path=t};NO.UpdateSourceRegistrationRequest=MO;var LO,DO={},jO=this&&this.__extends||(LO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}LO(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(DO,"__esModule",{value:!0});var UO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return jO(t,e),t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e),r=Sa.readString(e);return new NO.UpdateSourceRegistrationRequest(t,r)},t.prototype.write=function(e,t){Ea.CIDSerialiser.write(e,t.cid),Sa.writeString(e,t.path)},t}(wa.AbstractSerialiser);DO.UpdateSourceRegistrationRequestSerialiser=new UO;var xO={};Object.defineProperty(xO,"__esModule",{value:!0});var BO=function(e,t,r){this.cid=e,this.path=t,this.bytes=r};xO.UpdateSourceSetRequest=BO;var kO,qO={},VO=this&&this.__extends||(kO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}kO(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(qO,"__esModule",{value:!0});var FO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return VO(t,e),t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e),r=Sa.readString(e),n=Sa.readBytes(e);return new xO.UpdateSourceSetRequest(t,r,n)},t.prototype.write=function(e,t){Ea.CIDSerialiser.write(e,t.cid),Sa.writeString(e,t.path),Sa.writeBytes(e,t.bytes)},t}(wa.AbstractSerialiser);qO.UpdateSourceSetRequestSerialiser=new FO;var GO={};Object.defineProperty(GO,"__esModule",{value:!0});var HO=function(e,t,r){this.cid=e,this.old=t,this.current=r};GO.UpdateSourceStateRequest=HO;var WO,YO={};Object.defineProperty(YO,"__esModule",{value:!0}),(WO=YO.UpdateSourceState||(YO.UpdateSourceState={}))[WO.INIT=0]="INIT",WO[WO.ACTIVE=1]="ACTIVE",WO[WO.CLOSED=2]="CLOSED",WO[WO.STANDBY=3]="STANDBY";var zO={};Object.defineProperty(zO,"__esModule",{value:!0});var $O=function(e){this.state=e};zO.UpdateSourceState=$O;var QO,KO={},JO=this&&this.__extends||(QO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}QO(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(KO,"__esModule",{value:!0});var XO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JO(t,e),t.prototype.read=function(e){var t=Il.read(e,YO.UpdateSourceState);return new zO.UpdateSourceState(t)},t}(wa.AbstractSerialiser);KO.UpdateSourceStateSerialiser=new XO;var ZO,eI={},tI=this&&this.__extends||(ZO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}ZO(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(eI,"__esModule",{value:!0});var rI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tI(t,e),t.prototype.read=function(e){var t=Ea.CIDSerialiser.read(e),r=KO.UpdateSourceStateSerialiser.read(e),n=KO.UpdateSourceStateSerialiser.read(e);return new GO.UpdateSourceStateRequest(t,r.state,n.state)},t}(wa.AbstractSerialiser);eI.UpdateSourceStateRequestSerialiser=new rI;var nI,oI={};Object.defineProperty(oI,"__esModule",{value:!0}),(nI=oI.ResponseCode||(oI.ResponseCode={}))[nI.SUCCESS=0]="SUCCESS",nI[nI.INCOMPATIBLE_UPDATE=1]="INCOMPATIBLE_UPDATE",nI[nI.UPDATE_FAILED=2]="UPDATE_FAILED",nI[nI.INVALID_UPDATER=3]="INVALID_UPDATER",nI[nI.MISSING_TOPIC=4]="MISSING_TOPIC",nI[nI.INVALID_ADDRESS=5]="INVALID_ADDRESS",nI[nI.DUPLICATES=6]="DUPLICATES",nI[nI.EXCLUSIVE_UPDATER_CONFLICT=7]="EXCLUSIVE_UPDATER_CONFLICT",nI[nI.DELTA_WITHOUT_VALUE=8]="DELTA_WITHOUT_VALUE",nI[nI.CLUSTER_REPARTITION=9]="CLUSTER_REPARTITION",nI[nI.INCOMPATIBLE_STATE=10]="INCOMPATIBLE_STATE";var iI=function(e){this.error=e};oI.UpdateSourceUpdateResponse=iI;var sI,aI={},cI=this&&this.__extends||(sI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}sI(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(aI,"__esModule",{value:!0});var uI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return cI(t,e),t.prototype.read=function(e){var t=Il.read(e,oI.ResponseCode);return new oI.UpdateSourceUpdateResponse(t===oI.ResponseCode.SUCCESS?null:t)},t}(wa.AbstractSerialiser);aI.UpdateSourceUpdateResponseSerialiser=new uI;var pI={};Object.defineProperty(pI,"__esModule",{value:!0}),pI.UpdateTopicResponseEnum={SUCCESS:{id:0,reason:null},INCOMPATIBLE_UPDATE:{id:1,reason:uO.UpdateFailReasonEnum.INCOMPATIBLE_UPDATE},UPDATE_FAILED:{id:2,reason:uO.UpdateFailReasonEnum.UPDATE_FAILED},INVALID_UPDATER:{id:3,reason:uO.UpdateFailReasonEnum.INVALID_UPDATER},MISSING_TOPIC:{id:4,reason:uO.UpdateFailReasonEnum.MISSING_TOPIC},EXCLUSIVE_UPDATER_CONFLICT:{id:7,reason:uO.UpdateFailReasonEnum.EXCLUSIVE_UPDATER_CONFLICT},DELTA_WITHOUT_VALUE:{id:8,reason:uO.UpdateFailReasonEnum.DELTA_WITHOUT_VALUE},CLUSTER_REPARTITION:{id:9,reason:uO.UpdateFailReasonEnum.CLUSTER_REPARTITION},INCOMPATIBLE_STATE:{id:10,reason:uO.UpdateFailReasonEnum.INCOMPATIBLE_STATE},UNSATISFIED_CONSTRAINT:{id:-1,reason:uO.UpdateFailReasonEnum.UNSATISFIED_CONSTRAINT},INVALID_UPDATE_STREAM:{id:-2,reason:uO.UpdateFailReasonEnum.INVALID_UPDATE_STREAM}},Ha.enumerize(pI.UpdateTopicResponseEnum),Object.freeze(pI.UpdateTopicResponseEnum);var lI=function(e,t){this.reason=e,this.isError=t};pI.UpdateTopicResponse=lI;var fI,hI={},dI=this&&this.__extends||(fI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}fI(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(hI,"__esModule",{value:!0});var yI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return dI(t,e),t.prototype.read=function(e){var t=Il.read(e,pI.UpdateTopicResponseEnum);return new pI.UpdateTopicResponse(t.reason,t!==pI.UpdateTopicResponseEnum.SUCCESS)},t}(wa.AbstractSerialiser);hI.UpdateTopicResponseSerialiser=new yI;var vI={};Object.defineProperty(vI,"__esModule",{value:!0});var _I=function(e,t){this.path=e,this.bytes=t};vI.UpdateTopicSetRequest=_I;var SI,EI={},mI=this&&this.__extends||(SI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}SI(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(EI,"__esModule",{value:!0});var wI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mI(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=Sa.readBytes(e);return new vI.UpdateTopicSetRequest(t,r)},t.prototype.write=function(e,t){Sa.writeString(e,t.path),Sa.writeBytes(e,t.bytes)},t}(wa.AbstractSerialiser);EI.UpdateTopicSetRequestSerialiser=new wI;var gI,TI={};Object.defineProperty(TI,"__esModule",{value:!0}),(gI=TI.Will||(TI.Will={}))[gI.REMOVE_TOPICS=0]="REMOVE_TOPICS";var OI=function(e,t){this.path=e,this.will=t};TI.TopicWillParameters=OI;var II,RI={},bI=this&&this.__extends||(II=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}II(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(RI,"__esModule",{value:!0});var CI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bI(t,e),t.prototype.read=function(e){var t=Sa.readString(e),r=Il.read(e,TI.Will);return new TI.TopicWillParameters(t,r)},t.prototype.write=function(e,t){Sa.writeString(e,t.path),Il.write(e,t.will)},t}(wa.AbstractSerialiser);RI.TopicWillParametersSerialiser=new CI;var AI,PI={};Object.defineProperty(PI,"__esModule",{value:!0}),(AI=PI.WillRegistrationResultEnum||(PI.WillRegistrationResultEnum={}))[AI.SUCCESS=0]="SUCCESS",AI[AI.GROUP_CONFLICT=1]="GROUP_CONFLICT",AI[AI.TOPIC_TREE_CONFLICT=2]="TOPIC_TREE_CONFLICT";var NI=function(e){this.result=e};PI.WillRegistrationResult=NI;var MI,LI={},DI=this&&this.__extends||(MI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}MI(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(LI,"__esModule",{value:!0});var jI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return DI(t,e),t.prototype.read=function(e){var t=Il.read(e,PI.WillRegistrationResultEnum);return new PI.WillRegistrationResult(t)},t.prototype.write=function(e,t){Il.write(e,t.result)},t}(wa.AbstractSerialiser);LI.WillRegistrationResultSerialiser=new jI;var UI={};Object.defineProperty(UI,"__esModule",{value:!0});var xI={read:function(){return null},write:function(){}};UI.FETCH={id:2,request:Kv.FetchRequestSerialiser,response:xI},UI.SUBSCRIBE={id:3,request:lf.TopicSelectorSerialiser,response:xI},UI.UNSUBSCRIBE={id:4,request:lf.TopicSelectorSerialiser,response:xI},UI.SUBSCRIBE_CLIENT={id:10,request:Dh.ClientSubscribeRequestSerialiser,response:xI},UI.UNSUBSCRIBE_CLIENT={id:11,request:Dh.ClientSubscribeRequestSerialiser,response:xI},UI.CLOSE_CLIENT={id:14,request:$h.CloseClientRequestSerialiser,response:xI},UI.SET_CLIENT_CONFLATION={id:15,request:My.SetClientConflationRequestSerialiser,response:xI},UI.UNSUBSCRIPTION_NOTIFICATION={id:42,request:vO.UnsubscriptionNotificationSerialiser,response:xI},UI.MISSING_TOPIC={id:50,request:rS.MissingTopicRequestSerialiser,response:df.BooleanSerialiser},UI.TOPIC_SCOPED_WILL_REGISTRATION={id:53,request:RI.TopicWillParametersSerialiser,response:LI.WillRegistrationResultSerialiser},UI.TOPIC_SCOPED_WILL_DEREGISTRATION={id:54,request:RI.TopicWillParametersSerialiser,response:xI},UI.SYSTEM_PING={id:55,request:xI,response:xI},UI.USER_PING={id:56,request:xI,response:xI},UI.CHANGE_PRINCIPAL={id:5,request:sh.ChangePrincipalRequestSerialiser,response:df.BooleanSerialiser},UI.GET_SYSTEM_AUTHENTICATION={id:57,request:xI,response:Zf.SystemAuthenticationConfigurationSerialiser},UI.UPDATE_SYSTEM_AUTHENTICATION={id:58,request:Tf.SecurityCommandScriptSerialiser,response:_v.ErrorReportListSerialiser},UI.GET_SECURITY_CONFIGURATION={id:59,request:xI,response:Pm.SecurityConfigurationSerialiser},UI.UPDATE_SECURITY_CONFIGURATION={id:60,request:Tf.SecurityCommandScriptSerialiser,response:_v.ErrorReportListSerialiser},UI.TOPIC_CONTROL_REGISTRATION={id:20,request:iv.TopicControlRegistrationRequestSerialiser,response:xI},UI.TOPIC_CONTROL_DEREGISTRATION={id:21,request:tv.TopicControlRegistrationParamsSerialiser,response:xI},UI.AUTHENTICATION_CONTROL_REGISTRATION={id:22,request:uE.AuthenticationControlRegistrationRequestSerialiser,response:xI},UI.AUTHENTICATION_CONTROL_DEREGISTRATION={id:23,request:rE.AuthenticationControlRegistrationParametersSerialiser,response:xI},UI.AUTHENTICATION={id:24,request:OE.AuthenticationRequestSerialiser,response:ME.AuthenticationResponseSerialiser},UI.AUTHENTICATOR_REGISTRATION={id:119,request:YE.AuthenticatorRegistrationRequestSerialiser,response:xI},UI.AUTHENTICATOR={id:120,request:XE.AuthenticatorRequestSerialiser,response:sm.AuthenticatorResponseSerialiser},UI.AUTHENTICATOR_DEREGISTRATION={id:121,request:qE.AuthenticatorRegistrationParametersSerialiser,response:xI},UI.UPDATE_SOURCE_REGISTRATION={id:30,request:DO.UpdateSourceRegistrationRequestSerialiser,response:KO.UpdateSourceStateSerialiser},UI.UPDATE_SOURCE_DEREGISTRATION={id:31,request:CO.UpdateSourceDeregistrationRequestSerialiser,response:xI},UI.UPDATE_SOURCE_STATE={id:32,request:eI.UpdateSourceStateRequestSerialiser,response:xI},UI.MESSAGE_RECEIVER_CONTROL_REGISTRATION={id:63,request:Sd.MessageReceiverControlRegistrationRequestSerialiser,response:xI},UI.MESSAGE_RECEIVER_CONTROL_DEREGISTRATION={id:64,request:dd.MessageReceiverControlRegistrationParamsSerialiser,response:xI},UI.FILTER_SUBSCRIBE={id:65,request:fh.ClientFilterSubscribeRequestSerialiser,response:Oh.ClientFilterSubscribeResponseSerialiser},UI.FILTER_UNSUBSCRIBE={id:66,request:fh.ClientFilterSubscribeRequestSerialiser,response:Oh.ClientFilterSubscribeResponseSerialiser},UI.GET_SESSION_PROPERTIES={id:67,request:Xh.GetSessionPropertiesRequestSerialiser,response:od.GetSessionPropertiesResponseSerialiser},UI.SET_SESSION_PROPERTIES={id:105,request:Hy.SetSessionPropertiesRequestSerialiser,response:Jy.SetSessionPropertiesResultSerialiser},UI.SET_SESSION_PROPERTIES_FILTER={id:106,request:Uy.SetSessionPropertiesFilterRequestSerialiser,response:lv.CountOrParserErrorsSerialiser},UI.MESSAGING_SEND={id:85,request:sy.MessagingSendRequestSerialiser,response:Ud.MessagingResponseSerialiser},UI.MESSAGING_RECEIVER_SERVER={id:86,request:Cd.MessagingClientSendRequestSerialiser,response:Ud.MessagingResponseSerialiser},UI.NOTIFY_SUBSCRIPTION={id:87,request:Nl.TopicSpecificationInfoSerialiser,response:xI},UI.MESSAGING_RECEIVER_CLIENT={id:88,request:Od.MessagingClientForwardSendRequestSerialiser,response:Ud.MessagingResponseSerialiser},UI.MESSAGING_FILTER_SEND={id:102,request:$d.MessagingFilterSendRequestSerialiser,response:ey.MessagingFilterSendResponseSerialiser},UI.FILTER_RESPONSE={id:103,request:Hd.MessagingFilterResponseSerialiser,response:xI},UI.TOPIC_NOTIFICATION_DEREGISTRATION={id:91,request:zw.TopicNotificationDeregistrationRequestSerialiser,response:xI},UI.TOPIC_NOTIFICATION_EVENTS={id:92,request:lg.TopicNotificationEventSerialiser,response:xI},UI.TOPIC_DESCENDANT_EVENTS={id:93,request:tg.TopicNotificationDescendantEventSerialiser,response:xI},UI.TOPIC_NOTIFICATION_SELECTION={id:94,request:yg.TopicNotificationSelectionSerialiser,response:xI},UI.TOPIC_NOTIFICATION_DESELECTION={id:95,request:ig.TopicNotificationDeselectionSerialiser,response:xI},UI.MESSAGING_RECEIVER_CONTROL_REGISTRATION={id:97,request:Sd.MessageReceiverControlRegistrationRequestSerialiser,response:xI},UI.MESSAGING_RECEIVER_CONTROL_DEREGISTRATION={id:98,request:dd.MessageReceiverControlRegistrationParamsSerialiser,response:xI},UI.UPDATE_SOURCE_SET={id:77,request:qO.UpdateSourceSetRequestSerialiser,response:aI.UpdateSourceUpdateResponseSerialiser},UI.UPDATE_SOURCE_DELTA={id:78,request:gO.UpdateSourceDeltaRequestSerialiser,response:aI.UpdateSourceUpdateResponseSerialiser},UI.UPDATE_TOPIC_SET={id:79,request:EI.UpdateTopicSetRequestSerialiser,response:hI.UpdateTopicResponseSerialiser},UI.SESSION_PROPERTIES_REGISTRATION_2={id:81,request:qy.SetSessionPropertiesListenerSerialiser,response:xI},UI.SESSION_PROPERTIES_EVENT_2={id:82,request:Oy.SessionPropertiesEventBatchSerialiser,response:xI},UI.TOPIC_REMOVAL={id:83,request:DS.RemoveTopicSerialiser,response:xI},UI.RANGE_QUERY={id:84,request:lw.RangeQueryRequestSerialiser,response:ww.RangeQueryResultSerialiser},UI.TIME_SERIES_APPEND={id:99,request:Cw.TimeSeriesAppendRequestSerialiser,response:Wp.EventMetadataImplSerialiser},UI.TIME_SERIES_EDIT={id:100,request:Mw.TimeSeriesEditRequestSerialiser,response:Wp.EventMetadataImplSerialiser},UI.TOPIC_ADD={id:112,request:Uw.TopicAddRequestSerialiser,response:Gw.TopicAddResponseSerialiser},UI.ACQUIRE_SESSION_LOCK={id:114,request:Gm.SessionLockRequestSerialiser,response:km.SessionLockAcquisitionSerialiser},UI.RELEASE_SESSION_LOCK={id:116,request:km.SessionLockAcquisitionSerialiser,response:df.BooleanSerialiser},UI.FETCH_QUERY={id:117,request:Gv.FetchQuerySerialiser,response:Uv.FetchQueryResultSerialiser},UI.SET_TOPIC={id:118,request:mT.SetTopicRequestSerialiser,response:xI},UI.ADD_AND_SET_TOPIC={id:122,request:Vg.AddAndSetTopicRequestSerialiser,response:Xg.AddTopicResultSerialiser},UI.APPLY_JSON_PATCH={id:151,request:rT.ApplyJsonPatchRequestSerialiser,response:vT.JsonPatchResultSerialiser},UI.CHANGE_AUTHORISATION_ROLES={id:123,request:Fh.ChangeAuthorisationRolesRequestSerialiser,response:xI},UI.CHANGE_AUTHORISATION_ROLES_FILTER={id:124,request:Bh.ChangeAuthorisationRolesFilterRequestSerialiser,response:lv.CountOrParserErrorsSerialiser},UI.CREATE_UPDATE_STREAM={id:125,request:pT.CreateUpdateStreamRequestSerialiser,response:MT.UpdateStreamIdSerialiser},UI.CREATE_UPDATE_STREAM_AND_SET={id:126,request:sT.CreateUpdateStreamAndSetRequestSerialiser,response:MT.UpdateStreamIdSerialiser},UI.CHECK_UPDATE_STREAM={id:127,request:MT.UpdateStreamIdSerialiser,response:xI},UI.STREAM_SET_TOPIC_SERVICE={id:128,request:qT.UpdateStreamRequestSerialiser,response:xI},UI.STREAM_APPLY_DELTA_SERVICE={id:129,request:qT.UpdateStreamRequestSerialiser,response:xI},UI.STREAM_ADD_TOPIC_SERVICE={id:130,request:OT.UpdateStreamAddTopicRequestSerialiser,response:UT.UpdateStreamAddTopicResponseSerialiser},UI.STREAM_ADD_AND_SET_TOPIC_SERVICE={id:131,request:Vg.AddAndSetTopicRequestSerialiser,response:UT.UpdateStreamAddTopicResponseSerialiser},UI.FETCH_LOG_ENTRIES_SERVICE={id:132,request:r_.EntriesFetchRequestSerialiser,response:c_.EntriesFetchResponseSerialiser},UI.PUT_SESSION_METRIC_COLLECTOR={id:135,request:m_.SessionMetricCollectorSerialiser,response:_v.ErrorReportListSerialiser},UI.REMOVE_SESSION_METRIC_COLLECTOR={id:136,request:Sf.StringSerialiser,response:xI},UI.FETCH_SESSION_METRIC_COLLECTORS={id:137,request:xI,response:O_.SessionMetricCollectorListSerialiser},UI.CREATE_TOPIC_VIEW={id:138,request:nO.NamedTopicViewSpecificationSerialiser,response:zT.CreateTopicViewResultSerialiser},UI.REMOVE_TOPIC_VIEW={id:139,request:Sf.StringSerialiser,response:xI},UI.LIST_TOPIC_VIEWS={id:141,request:xI,response:ZT.ListTopicViewsResultSerialiser},UI.GET_SERVER_METRICS={id:142,request:xI,response:K_.ServerMetricsSerialiser},UI.LIST_GLOBAL_PERMISSIONS={id:143,request:xI,response:ym.ListGlobalPermissionsResultSerialiser},UI.LIST_PATH_PERMISSIONS={id:144,request:Sf.StringSerialiser,response:wm.ListPathPermissionsResultSerialiser},UI.GET_MEASURED_ENTITY_CLASS_METRICS={id:145,request:Sf.StringSerialiser,response:H_.MeasuredEntityClassMetricsSerialiser},UI.PUT_TOPIC_METRIC_COLLECTOR={id:146,request:D_.TopicMetricCollectorSerialiser,response:xI},UI.REMOVE_TOPIC_METRIC_COLLECTOR={id:147,request:Sf.StringSerialiser,response:xI},UI.FETCH_TOPIC_METRIC_COLLECTORS={id:148,request:xI,response:B_.TopicMetricCollectorListSerialiser},UI.FETCH_JMX_VALUES={id:149,request:Tv.JMXObjectNamesSerialiser,response:bv.MBeanValuesSerialiser},UI.CREATE_REMOTE_SERVER={id:157,request:AS.RemoteServerDefinitionSerialiser,response:ES.CreateRemoteServerResultSerialiser},UI.REMOVE_REMOTE_SERVER={id:158,request:Sf.StringSerialiser,response:xI},UI.UPDATE_LICENSE={id:159,request:vf.BytesSerialiser,response:qS.ReplaceLicenceResponseSerialiser},UI.CLOSE_CLIENT_FILTER={id:162,request:Sf.StringSerialiser,response:lv.CountOrParserErrorsSerialiser},UI.SET_CLIENT_CONFLATION_FILTER={id:163,request:Cy.SetClientConflationFilterRequestSerialiser,response:lv.CountOrParserErrorsSerialiser},UI.LIST_REMOTE_SERVERS={id:164,request:xI,response:IS.ListRemoteServersResultSerialiser},UI.CHECK_REMOTE_SERVER={id:165,request:Sf.StringSerialiser,response:fS.CheckRemoteServerResultSerialiser};var BI={};Object.defineProperty(BI,"__esModule",{value:!0}),BI.responseSuccess=function(e,t){return!e};var kI={},qI=this&&this.__awaiter||function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(r,n)}o((c=c.apply(i,s||[])).next())})},VI=this&&this.__generator||function(r,n){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(kI,"__esModule",{value:!0});var FI=La.create("diffusion.locks.SessionLocks"),GI=function(){function e(e,t,r){var n=this;this.owned=!0,this.acquisition=e,this.unlockSessionLock=r,t.setOwned=function(e){n.owned=e}}return e.prototype.toString=function(){return"SessionLock [name="+this.acquisition.lockName+", sequence="+this.acquisition.sequence+", scope="+this.acquisition.scope+", owned="+this.owned+"]"},e.prototype.getName=function(){return this.acquisition.lockName},e.prototype.getSequence=function(){return this.acquisition.sequence},e.prototype.isOwned=function(){return this.owned},e.prototype.getScope=function(){return this.acquisition.scope},e.prototype.unlock=function(){return this.owned?(this.owned=!1,this.unlockSessionLock(this.acquisition)):Promise.resolve(!1)},e}(),HI=function(){function e(i,e){var t=this;this.locks={},this.nextRequestId=0,this.serviceLocator=i.getServiceLocator(),this.ACQUIRE_SESSION_LOCK=this.serviceLocator.obtain(UI.ACQUIRE_SESSION_LOCK),this.RELEASE_SESSION_LOCK=this.serviceLocator.obtain(UI.RELEASE_SESSION_LOCK),e.on("change",function(e,o){return qI(t,void 0,void 0,function(){var t,r,n=this;return VI(this,function(e){switch(e.label){case 0:return t=null,r=function(e){e.ownedSetter.setOwned(!1),e.onRemoveLock()},o!==Ls.InternalSessionState.DISCONNECTED?[3,2]:(Object.values(this.locks).filter(function(e){return e.lock.getScope()===jm.SessionLockScope.UNLOCK_ON_CONNECTION_LOSS}).forEach(r),[4,i.getConversationSet().newConversation({onOpen:function(){},onResponse:function(){return!0},onDiscard:function(){Object.values(n.locks).forEach(r),n.locks={}}})]);case 1:return t=e.sent(),[3,3];case 2:o===Ls.InternalSessionState.CONNECTED?null!==t&&(i.getConversationSet().respondIfPresent(t,null),t=null):o===Ls.InternalSessionState.CLOSED&&(Object.values(this.locks).forEach(r),this.locks={}),e.label=3;case 3:return[2]}})})})}return e.prototype.handleAcquisistion=function(e,t,r){var n=this.locks[e];return void 0!==n?n.lock.getSequence().equals(t.sequence)?n.lock:(n.ownedSetter.setOwned(!1),this.createLock(e,t,r)):this.createLock(e,t,r)},e.prototype.createLock=function(e,t,r){var n={setOwned:function(){throw Error("Session lock ownedSetter must be implemented")}},o=new GI(t,n,this.unlock.bind(this)),i=r?{lock:o,ownedSetter:{setOwned:function(e){n.setOwned(e),r.onOwned(e)}},onRemoveLock:function(){r.onRemoveLock()}}:{lock:o,ownedSetter:n,onRemoveLock:function(){}};return this.locks[e]=i,o},e.prototype.unlock=function(o){var i=this;return new Promise(function(r,n){i.RELEASE_SESSION_LOCK.send(o,function(e,t){e?(FI.debug("Release session lock failed"),n(e)):(void 0!==i.locks[o.lockName]&&i.locks[o.lockName].lock.getSequence().toString(10)===o.sequence.toString(10)&&delete i.locks[o.lockName],r(t))})})},e.prototype.lock=function(i,t,s){var a=this;return void 0===t&&(t=jm.SessionLockScope.UNLOCK_ON_SESSION_LOSS),new Promise(function(n,o){if(void 0!==a.locks[i]&&a.locks[i].lock.isOwned())s?o(new Error("Cannot register the same lock in different shared sessions")):n(a.locks[i].lock);else{var e=a.nextRequestId++;a.ACQUIRE_SESSION_LOCK.send({lockName:i,requestId:e,scope:t},function(e,t){if(BI.responseSuccess(e,t)){var r=a.handleAcquisistion(i,t,s);n(r)}else FI.debug("Acquire session lock failed"),o(e)})}})},e}();kI.InternalSessionLocks=HI;var WI={};function YI(){return{type:ka.PROTOCOL.TYPE,version:ka.PROTOCOL.CURRENT_VERSION,capabilities:ka.PROTOCOL.CAPABILITIES}}Object.defineProperty(WI,"__esModule",{value:!0}),WI.connect=YI,WI.reconnect=function(e,t,r){return Object.assign(YI(),{token:e,availableClientSequence:t,lastServerSequence:r})};var zI={};function $I(e,t){return{id:e,message:t}}Object.defineProperty(zI,"__esModule",{value:!0}),zI.responseCodes={OK:$I(100,"Connected successfully"),DOWNGRADE:$I(102,"Server does not support the requested protocol level"),RECONNECTED:$I(105,"Reconnected successfully"),RECONNECTED_WITH_MESSAGE_LOSS:$I(106,"Reconnected with message loss"),LICENSE_EXCEEDED:$I(113,"Connection rejected due to license limit"),RECONNECTION_UNSUPPORTED:$I(114,"Reconnection not supported by connector"),CONNECTION_PROTOCOL_ERROR:$I(115,"Connection failed - protocol error"),AUTHENTICATION_FAILED:$I(116,"Connection failed - authentication failed"),UNKNOWN_SESSION:$I(117,"Reconnection failed - the session is unknown"),RECONNECTION_FAILED_MESSAGE_LOSS:$I(118,"Reconnection failed due to message loss"),REJECTED_SERVER_INITIALISING:$I(119,"Connection rejected because the server is not ready")},Ha.enumerize(zI.responseCodes),zI.isSuccess=function(e){switch(e){case zI.responseCodes.OK:case zI.responseCodes.RECONNECTED:case zI.responseCodes.RECONNECTED_WITH_MESSAGE_LOSS:return!0;default:return!1}};var QI={};function KI(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=e.length);for(var o=r;o<n;++o)e[o]=t}Object.defineProperty(QI,"__esModule",{value:!0}),QI.remove=function(e,t){var r=e.indexOf(t);return-1<r&&(e.splice(r,1),!0)},QI.fill=KI,QI.ofSize=function(e,t){var r=[];return r.length=e,void 0!==t&&KI(r,t),r};var JI={};Object.defineProperty(JI,"__esModule",{value:!0});var XI=function(){function e(e){this.streams=new Map,this.fallbacks=[],this.topicCache=e}return e.prototype.add=function(e,t){var r=this.streams.get(e);r?r.push(t):this.streams.set(e,[t]),this.topicCache.newStream(e,t,this),t.onOpen()},e.prototype.addFallback=function(e){this.fallbacks.push(e)},e.prototype.getFallbacks=function(t){return this.fallbacks.filter(function(e){return e.selects(t)})},e.prototype.remove=function(r){var n=this;QI.remove(this.fallbacks,r),this.streams.forEach(function(e,t){QI.remove(e,r)&&n.topicCache.removeStream(r,n),0===e.length&&n.streams.delete(t)})},e.prototype.streamsFor=function(r,n){var o=[];return this.streams.forEach(function(e,t){t.selects(r)&&(o=o.concat(e.filter(function(e){return e.selects(n)}).map(function(e){return e.adapter?e.adapter(n):e})))}),o},e.prototype.close=function(){this.topicCache.clear(),this.streams.forEach(function(e){e.forEach(function(e){e.onSubscriptionError(Wa.ErrorReason.SESSION_CLOSED)})}),this.fallbacks.forEach(function(e){e.onSubscriptionError(Wa.ErrorReason.SESSION_CLOSED)})},e}();JI.StreamRegistryImpl=XI;var ZI={};Object.defineProperty(ZI,"__esModule",{value:!0});var eR=function(){function e(e,t,r){this.streams=e,this.path=t,this.specification=r}return e.prototype.proxies=function(e,t){return 0===this.streams.length?t.getFallbacks(e):this.streams},e.prototype.getTopicPath=function(){return this.path},e.prototype.getTopicSpecification=function(){return this.specification},e.prototype.notifyInitialSubscription=function(e){var t=this;this.proxies(this.specification,e).forEach(function(e){e.onSubscription(t.path,t.specification)})},e.prototype.notifySubscription=function(e){e.onSubscription(this.path,this.specification),this.notifyValueToNewStream(this.path,this.specification,e)},e.prototype.notifyUnsubscription=function(t,e){var r=this;this.proxies(this.specification,e).forEach(function(e){e.onUnsubscription(r.path,r.specification,t)})},e.prototype.notifyValue=function(t,r,n,o,e){var i=this;this.proxies(this.specification,e).forEach(function(e){e.onValue(i.path,i.specification,t,r,n,o)})},e.prototype.notifyDelta=function(t,r,n,o,i,e){var s=this;this.proxies(this.specification,e).forEach(function(e){e.onDelta(s.path,s.specification,t,r,n,o,i)})},e.prototype.addStream=function(e,t){var r=this;0===this.streams.length&&t.getFallbacks(this.specification).forEach(function(e){e.onUnsubscription(r.path,r.specification,uO.UnsubscribeReasonEnum.STREAM_CHANGE)}),this.streams.indexOf(e)<0&&(this.streams.push(e),this.notifySubscription(e))},e.prototype.removeStream=function(e,t){var r=this;QI.remove(this.streams,e),0===this.streams.length&&t.getFallbacks(this.specification).forEach(function(e){r.notifySubscription(e)})},e.prototype.removeAllStreams=function(){this.streams.length=0},e}();ZI.TopicCacheEntry=eR;var tR,rR={},nR=this&&this.__extends||(tR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}tR(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(rR,"__esModule",{value:!0});var oR=function(i){function e(e,t,r,n){var o=i.call(this,e,t,r)||this;return o.datatype=n,r.properties&&r.properties.DONT_RETAIN_VALUE&&(o.dontRetainValue=JSON.parse(r.properties.DONT_RETAIN_VALUE)),o}return nR(e,i),e.prototype.handleValue=function(e,t,r){var n=this.value,o=this.buffer||null;try{var i=this.datatype.readValue(e);this.notifyValue(o,e,n,i,t),this.dontRetainValue||(this.value=i,this.buffer=e)}catch(e){r(e)}},e.prototype.handleDelta=function(e,t,r){var n=this.value,o=this.buffer||null;try{var i=this.datatype.deltaType("binary"),s=i.readDelta(e),a=i.applyImpl(n,s,this.buffer?new dc.BufferSlice(this.buffer):void 0),c=a.value,u=a.cbor;this.value=c,this.buffer=u.$buffer,this.notifyDelta(o,u.$buffer,s,n,this.value,t)}catch(e){r(e)}},e.prototype.notifyValueToNewStream=function(e,t,r){this.buffer&&r.onValue(e,t,null,this.buffer,null,this.value)},e}(ZI.TopicCacheEntry);rR.DatatypeCacheEntry=oR;var iR,sR={},aR=this&&this.__extends||(iR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}iR(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(sR,"__esModule",{value:!0});var cR=function(n){function e(e,t,r){return n.call(this,e,t,r)||this}return aR(e,n),e.prototype.handleValue=function(e,t){this.notifyValue(null,e,null,e,t)},e.prototype.handleDelta=function(e,t){this.notifyDelta(null,e,null,null,e,t)},e.prototype.notifyValueToNewStream=function(){},e}(ZI.TopicCacheEntry);sR.NoValueEntry=cR;var uR,pR={},lR=this&&this.__extends||(uR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}uR(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(pR,"__esModule",{value:!0});var fR=function(o){function e(e,t,r,n){return o.call(this,e,t,r,Jp.TimeSeriesEventDataType.create(n))||this}return lR(e,o),e}(rR.DatatypeCacheEntry);pR.TimeSeriesCacheEntry=fR;var hR={},dR=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(hR,"__esModule",{value:!0});var yR=function(){function e(e){this.byPath={},this.byId={},this.datatypes=e}return e.prototype.handleSubscription=function(e,t){var r,n=e.path,o=t.streamsFor(n,e.specification);switch(e.specification.type){case tl.TopicTypeEnum.JSON:case tl.TopicTypeEnum.BINARY:case tl.TopicTypeEnum.STRING:case tl.TopicTypeEnum.DOUBLE:case tl.TopicTypeEnum.INT64:case tl.TopicTypeEnum.RECORD_V2:var i=this.datatypes.get(e.specification.type);if(null===i)throw new Error("Invalid topic type");r=new rR.DatatypeCacheEntry(o,n,e.specification,i);break;case tl.TopicTypeEnum.TIME_SERIES:var s=this.datatypes.get(e.specification.properties.TIME_SERIES_EVENT_VALUE_TYPE);if(null===s)throw new Error("Invalid timeseries event type");r=new pR.TimeSeriesCacheEntry(o,n,e.specification,s);break;default:r=new sR.NoValueEntry(o,n,e.specification)}var a=this.byPath[n];if(this.byPath[n]=r,a)throw new Error("Existing cache entry for "+n);var c=this.byId[e.id];if(this.byId[e.id]=r,c)throw new Error("Existing cache entry for "+e.id);r.notifyInitialSubscription(t)},e.prototype.notifyUnsubscriptionOfAllTopics=function(e){for(var t in this.byId)this.byId[t].notifyUnsubscription(uO.UnsubscribeReasonEnum.SUBSCRIPTION_REFRESH,e);this.byPath={},this.byId={}},e.prototype.handleValue=function(e,t,r,n){var o=n.getErrorHandler(),i=this.byId[e];i?i.handleValue(t,r,o):o(new Error("Data loss on topic with ID: "+e+" - possibly due to reconnection"))},e.prototype.handleDelta=function(e,t,r,n){var o=n.getErrorHandler(),i=this.byId[e];i?i.handleDelta(t,r,o):o(new Error("Data loss on topic with ID: "+e+" - possibly due to reconnection"))},e.prototype.handleUnsubscription=function(e,t,r){var n=this.byId[e];if(delete this.byId[e],n){var o=n.getTopicPath();delete this.byPath[o],n.notifyUnsubscription(t,r)}},e.prototype.newStream=function(e,t,r){for(var n in this.byPath)if(this.byPath.hasOwnProperty(n)){var o=this.byPath[n],i=o.getTopicSpecification();e.selects(n)&&t.selects(i)&&o.addStream(t.adapter?t.adapter(i):t,r)}},e.prototype.removeStream=function(e,t){for(var r in this.byPath)this.byPath.hasOwnProperty(r)&&this.byPath[r].removeStream(e,t)},e.prototype.removeAllStreams=function(){var e,t;try{for(var r=dR(Object.getOwnPropertyNames(this.byPath)),n=r.next();!n.done;n=r.next()){var o=n.value;this.byPath[o].removeAllStreams()}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.prototype.clear=function(){this.byPath={},this.byId={}},e}();hR.TopicCache=yR;var vR={};Object.defineProperty(vR,"__esModule",{value:!0}),vR.cidFromHeaders=function(e){if(!e||0===e.length)throw new Error("Empty headers, expected at least 1");return aa.ConversationId.fromString(e[e.length-1])};var _R={};Object.defineProperty(_R,"__esModule",{value:!0});var SR=La.create("V4 Client Routing"),ER=function(){function e(e,t,r,n,o){this.errorHandler=e,this.serviceAdapter=t,this.conversationSet=r,this.cache=n,this.registry=o}return e.prototype.route=function(e){switch(e.type){case Ga.types.FETCH_REPLY:var t=vR.cidFromHeaders(e.headers);this.conversationSet.respondIfPresent(t,e);break;case Ga.types.SERVICE_REQUEST:case Ga.types.SERVICE_RESPONSE:case Ga.types.SERVICE_ERROR:this.serviceAdapter.onMessage(e.type,e.getInputStream());break;case Ga.types.TOPIC_VALUE:this.cache.handleValue(e.id,e.data,this.registry,this.errorHandler);break;case Ga.types.TOPIC_DELTA:this.cache.handleDelta(e.id,e.data,this.registry,this.errorHandler);break;default:SR.debug("Unhandled V4 message: "+e.type,e)}},e.prototype.subscribe=function(e){this.cache.handleSubscription(e,this.registry)},e.prototype.unsubscribe=function(e,t){this.cache.handleUnsubscription(e,t,this.registry)},e}();_R.TopicRouting=ER;var mR={};Object.defineProperty(mR,"__esModule",{value:!0}),mR.TOKEN_LENGTH=24;var wR=function(){function e(e){this.external=e}return e.prototype.toString=function(){return this.external.toString("ascii")},e}();mR.SessionToken=wR;var gR={};Object.defineProperty(gR,"__esModule",{value:!0}),gR.readSessionToken=function(e){return new mR.SessionToken(e.readMany(mR.TOKEN_LENGTH))};var TR,OR={},IR=this&&this.__extends||(TR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}TR(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(OR,"__esModule",{value:!0});var RR,bR,CR=La.create("Cascading");(bR=RR=OR.DeserialisationErrorReason||(OR.DeserialisationErrorReason={}))[bR.UNRECOGNISED_PROTOCOL_BYTE=0]="UNRECOGNISED_PROTOCOL_BYTE",bR[bR.PROTOCOL_VERSION_MISMATCH=1]="PROTOCOL_VERSION_MISMATCH";var AR=function(n){function e(e,t){var r=n.call(this,e)||this;return r.reason=t,r}return IR(e,n),e}(Error);OR.deserialise=function(e){var t=new Ua.BufferInputStream(e),r=t.read();if(r!==ka.PROTOCOL.PROTOCOL_BYTE)throw new AR("Unrecognised protocol byte: "+r,RR.UNRECOGNISED_PROTOCOL_BYTE);var n=t.read();if(n!==ka.PROTOCOL.CURRENT_VERSION){if(CR.debug("Server responded with protocol version "+n+". Client version is "+ka.PROTOCOL.CURRENT_VERSION+"."),n<ka.PROTOCOL.CURRENT_VERSION)throw new AR("Unrecognised protocol version: "+n,RR.PROTOCOL_VERSION_MISMATCH);if(n>ka.PROTOCOL.CURRENT_VERSION)throw new AR("Unsupported protocol version: "+n,RR.PROTOCOL_VERSION_MISMATCH)}var o=Il.read(t,zI.responseCodes);if(zI.isSuccess(o)){var i=new bh.SessionId(t.readUInt64(),t.readUInt64()),s=gR.readSessionToken(t),a=t.readInt64(),c=0,u=-1;return o===zI.responseCodes.RECONNECTED?c=t.readInt32():u=t.readInt32(),{response:o,identity:i,token:s,systemPingPeriod:a,version:n,success:!0,sequence:c,maximumMessageSize:u}}return{response:o,version:n,identity:null,token:null,systemPingPeriod:null,success:!1,sequence:0,maximumMessageSize:-1}};var PR={};Object.defineProperty(PR,"__esModule",{value:!0});var NR=La.create("Parsing");PR.connectionResponse=function(e,t,r){NR.trace("Received connection handshake response");try{return e(OR.deserialise(r))}catch(e){return t(e),null}};var MR={},LR={};Object.defineProperty(LR,"__esModule",{value:!0});var DR=La.create("Transports");function jR(){return"function"==typeof WebSocket?(DR.debug("Using native websocket"),{factory:WebSocket,enabled:!0,allowsOptions:!1}):"function"==typeof MR?(DR.debug("Using Node WS library"),{factory:MR,enabled:!0,allowsOptions:!0}):(DR.debug("Websocket transport not available"),{enabled:!1,allowsOptions:!1})}function UR(){return"function"==typeof XMLHttpRequest?(DR.debug("Using native XHR"),{factory:XMLHttpRequest,enabled:!0,allowsOptions:!1}):(DR.debug("XHR transport not available"),{enabled:!1,allowsOptions:!1})}LR.Subtransports=Object.freeze({WS:jR(),XHR:UR(),WEBSOCKET:jR(),HTTP_POLLING:UR()});var xR={};(function(e){"use strict";Object.defineProperty(xR,"__esModule",{value:!0}),xR.encodeAsString=function(e){var t=new Ba.BufferOutputStream;return oh.write(t,e),t.getBase64()}}).call(this,t({}).Buffer);var BR={};(function(a){"use strict";var n,t=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(BR,"__esModule",{value:!0});var c=La.create("Websocket transport"),e=function(i){function e(e,t,r){var n=this,o=gl.Emitter.create();return(n=i.call(this,o)||this).emitter=o.emitter(n),n.opts=e,n.ws=t,n.allowsOptions=r,n}return t(e,i),e.prototype.handler=function(e){e.data.length>this.opts.maxMessageSize?this.emitter.error(new Error("Received message of size: "+e.data.length+", exceeding max message size: "+this.opts.maxMessageSize)):this.emitter.immediate("data",a.from(e.data))},e.prototype.connect=function(e,t){var r,n,o,i=this;if(void 0!==this.opts.httpProxyAgent&&!this.allowsOptions)throw new Error("httpProxyAgent option is not allowed");try{var s=(r=e,n=this.opts,o=(n.secure?"wss":"ws")+"://"+n.host+":"+n.port+n.path,o+="?ty="+r.type,o+="&v="+r.version,o+="&ca="+r.capabilities,o+="&r="+n.reconnect.timeout,r.token&&(o+="&c="+encodeURIComponent(r.token),o+="&cs="+r.availableClientSequence,o+="&ss="+r.lastServerSequence),n.properties&&(o+="&sp="+encodeURIComponent(JSON.stringify(n.properties))),n.principal&&(o+="&username="+encodeURIComponent(n.principal),o+="&password="+encodeURIComponent(xR.encodeAsString(n.credentials))),o);this.socket=void 0===this.opts.httpProxyAgent?new this.ws(s):new this.ws(s,{agent:this.opts.httpProxyAgent}),c.debug("Created websocket",s)}catch(e){throw new Error("Unable to construct WebSocket "+e)}this.socket.binaryType="arraybuffer",this.socket.onmessage=function(e){i.socket.onmessage=i.handler.bind(i),i.socket.onerror=function(e){i.emitter.error(e)},t(a.from(e.data))},this.socket.onclose=function(e){i.emitter.close(e)},this.socket.onerror=function(e){i.emitter.close(e)}},e.prototype.dispatch=function(e){c.debug("Sending websocket message",e);try{return this.socket.send(e),!0}catch(e){return c.error("Websocket send error",e),!1}},e.prototype.close=function(){return c.debug("Closing websocket"),void 0!==this.socket&&this.socket.close(1e3),this},e}(ol.StreamImpl);BR.WSTransport=e}).call(this,t({}).Buffer);var kR={};Object.defineProperty(kR,"__esModule",{value:!0});var qR=function(){function e(){this.messages=[]}return e.prototype.length=function(){return this.messages.length},e.prototype.add=function(e){this.messages.push(e)},e.prototype.drain=function(){return this.messages.splice(0,this.messages.length)},e.prototype.isEmpty=function(){return 0===this.messages.length},e}();kR.Queue=qR;var VR={};(function(u){"use strict";var n,t=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),c=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(VR,"__esModule",{value:!0});var p=La.create("XHR transport"),e=function(o){function e(e,t){var r=this,n=gl.Emitter.create();return(r=o.call(this,n)||this).emitter=n.emitter(r),r.opts=e,r.protocolVersion=null,r.pollSequence=0,r.pingSequence=0,r.pollRequest=null,r.aborted=!1,r.isSending=!1,r.queue=new kR.Queue,r.xhr=t,r}return t(e,o),e.prototype.connect=function(e,n){var t,r,o,i,s=this;try{var a=(t=e,r=this.opts,o=(r.secure?"https":"http")+"://"+r.host+":"+r.port+r.path,i={m:"0",ty:"B",ca:t.capabilities,r:r.reconnect.timeout,v:t.version},void 0!==t.token&&(i.c=t.token,i.cs=t.availableClientSequence,i.ss=t.lastServerSequence),r.properties&&(i.sp=encodeURIComponent(JSON.stringify(r.properties))),r.principal&&(i.username=encodeURIComponent(r.principal),i.password=xR.encodeAsString(r.credentials)),{uri:o,headers:i});this.protocolVersion=a.headers.v,this.URI=a.uri;var c=this.createRequest(a.headers,a.uri);p.debug("Created XHR",a.uri),c.onreadystatechange=function(){if(4===c.readyState)if(200===c.status){var e=c.responseText,t=n(u.from(e,"binary"));if(!t)return;s.token=t.token;var r=t.response;zI.isSuccess(r)?s.poll():(p.debug(r.id+" - "+r.message),s.emitter.close())}else s.emitter.close()},c.send(null)}catch(e){throw new Error("Unable to create polling transport "+e)}},e.prototype.close=function(){return p.trace("Closing XHR transport"),this.pollRequest&&(this.aborted=!0,this.pollRequest.abort()),this.queue=new kR.Queue,this.emitter.close(),this},e.prototype.createRequest=function(e,t){var r,n,o=new this.xhr;o.open("POST",t,!0),o.overrideMimeType("text/plain; charset=x-user-defined");try{for(var i=c(Object.getOwnPropertyNames(e)),s=i.next();!s.done;s=i.next()){var a=s.value;try{o.setRequestHeader(a,e[a])}catch(t){p.warn("Can't set header "+a+":"+e.join(":"))}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},e.prototype.poll=function(){var s=this,a=this.createRequest({m:"1",c:this.token,s:this.pollSequence++,v:this.protocolVersion},this.URI);a.onreadystatechange=function(){if(4===a.readyState)if("reconnect"===a.getResponseHeader("diffusion-connection"))s.emitter.close();else if(200===a.status){s.aborted||s.poll();for(var e=a.responseText,t=new Ua.BufferInputStream(u.from(e,"base64"));t.pos!==t.count;){var r=t.readInt32();if(r>s.opts.maxMessageSize)return void s.emitter.error(new Error("Received message of size: "+r+", exceeding max message size: "+s.opts.maxMessageSize));var n=t.read(),o=t.readMany(r),i=u.alloc(o.length+1);i.writeUInt8(n,0),o.copy(i,1),s.emitter.emit("data",i)}}else s.emitter.close()},(this.pollRequest=a).send(null)},e.prototype.dispatch=function(e){return!this.aborted&&(this.queue.add(e),!!this.isSending||void this.flush())},e.prototype.flush=function(){var e=this;if(!this.queue.isEmpty()){var t=function(e){var t,r,n=new Ba.BufferOutputStream;try{for(var o=c(e),i=o.next();!i.done;i=o.next()){var s=i.value;n.writeInt32(s.length-1),n.writeMany(s,0,s.length)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n.getBuffer()}(this.queue.drain()),r=this.createRequest({m:"2",c:this.token,s:this.pingSequence++,v:this.protocolVersion},this.URI);r.onreadystatechange=function(){4===r.readyState&&("reconnect"===r.getResponseHeader("diffusion-connection")?e.emitter.close():200===r.status?(e.isSending=!1,e.flush()):e.emitter.close())},this.isSending=!0,r.send(t.toString("base64"))}},e}(ol.StreamImpl);VR.XHRTransport=e}).call(this,t({}).Buffer);var FR,GR={},HR=this&&this.__extends||(FR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}FR(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(GR,"__esModule",{value:!0});var WR=La.create("Cascading"),YR=Object.freeze({WS:BR.WSTransport,XHR:VR.XHRTransport,WEBSOCKET:BR.WSTransport,HTTP_POLLING:VR.XHRTransport}),zR=function(s){function e(e,t,r,n){var o=this,i=gl.Emitter.create();return(o=s.call(this,i)||this).emitter=i.emitter(o),o.transports=r,o.cascadeNotifications=n,o.name=null,o.req=null,o.responseReceived=!1,o.transportFactory=function(e,t,r){var n=YR[r],o=e[r];if(n&&o&&o.enabled)return new n(t,o.factory,o.allowsOptions);throw new Error("Unknown transport name: "+r)}.bind(null,e,t),o.transport=o.selectTransport(),o.onData=o.onData.bind(o),o.onClose=o.onClose.bind(o),o.onError=o.onError.bind(o),o.onConnectionResponse=o.onConnectionResponse.bind(o),o.onParsingError=o.onParsingError.bind(o),o}return HR(e,s),e.prototype.onData=function(e){this.emitter.immediate("data",e)},e.prototype.onClose=function(e){!this.responseReceived&&this.cascade(!0)||this.emitter.emit("close",e)},e.prototype.onError=function(e){this.emitter.emit("error",e)},e.prototype.onConnectionResponse=function(e){return this.responseReceived=!0,e.response===zI.responseCodes.ERROR&&this.cascade()?null:this.onHandshakeSuccess(e)},e.prototype.onParsingError=function(e){if(this.responseReceived=!0,!this.cascade())return this.onHandshakeError(e)},e.prototype.closeQuietly=function(){this.transport&&(this.transport.off("data",this.onData),this.transport.off("close",this.onClose),this.transport.off("error",this.onError),this.transport.close(),this.transport=null)},e.prototype.selectTransport=function(e){return void 0===e&&(e=!1),0===this.transports.length?(this.name=null,this.transport=null,WR.debug("Transports exhausted"),this.cascadeNotifications.emit("transports-exhausted"),e||this.emitter.emit("close"),null):(this.name=this.transports.shift(),this.transport=this.transportFactory(this.name),WR.debug("Selecting transport",this.name),this.cascadeNotifications.emit("transport-selected",this.name),this.transport)},e.prototype.internalConnect=function(){if(null===this.transport)throw new Error("Unable to connect when no transport is set");this.responseReceived=!1,WR.debug("Attempting to connect"),this.cascadeNotifications.emit("cascading-connect"),this.transport.on("data",this.onData),this.transport.on("close",this.onClose),this.transport.on("error",this.onError);try{this.transport.connect(this.req,PR.connectionResponse.bind(null,this.onConnectionResponse,this.onParsingError))}catch(e){if(!this.cascade())throw e}return!0},e.prototype.cascade=function(e){return this.closeQuietly(),!!this.selectTransport(e)&&(this.cascadeNotifications.emit("cascade"),this.internalConnect())},e.prototype.connect=function(e,t,r){this.req=e,this.onHandshakeSuccess=t,this.onHandshakeError=r,this.internalConnect()},e.prototype.dispatch=function(e){if(null===this.transport)throw new Error("Unable to send message when no transport is set");this.transport.dispatch(e)},e.prototype.close=function(){return null!==this.transport&&(this.responseReceived=!0,this.transport.close(),this.transport=null),this},e}(ol.StreamImpl),$R=function(n){function t(e){var t=this,r=gl.Emitter.create();return(t=n.call(this,r)||this).emitter=r.emitter(t),t.subtransports=e,t}return HR(t,n),t.create=function(e){return new t(e||LR.Subtransports)},t.prototype.get=function(e){var t,r,n=(t=e.transports,r=this.subtransports,t.filter(function(e){return e&&YR.hasOwnProperty(e)&&r[e].enabled}));return 0===n.length?(WR.warn("No valid transports found"),null):new zR(this.subtransports,e,n,this.emitter)},t}(ol.StreamImpl);GR.Transports=$R;var QR,KR={},JR=this&&this.__extends||(QR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}QR(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(KR,"__esModule",{value:!0});var XR=function(o){function e(e,t){var r=this,n=gl.Emitter.create();return(r=o.call(this,n)||this).emitter=n.emitter(r),r.states=t,r.current=t[e],r.state=e,r}return JR(e,o),e.prototype.change=function(e){return this.state===e||!(!this.states[e]||!("*"===this.current||-1<this.current.indexOf(e)))&&(this.emitter.emit("change",this.state,e),this.current=this.states[e],this.state=e,!0)},e}(ol.StreamImpl);KR.FSM=XR;var ZR={};Object.defineProperty(ZR,"__esModule",{value:!0});var eb=function(){function e(e,t,r){this.id=e,this.message=t,this.canReconnect=r}return e.prototype.toString=function(){return"id: "+this.message},e}();ZR.CloseReasonImpl=eb;var tb={};Object.defineProperty(tb,"__esModule",{value:!0}),tb.CloseReasonEnum={CLOSED_BY_CLIENT:new ZR.CloseReasonImpl(0,"The session was closed by the client",!1),CLOSED_BY_SERVER:new ZR.CloseReasonImpl(1,"The session was closed by the server",!1),RECONNECT_ABORTED:new ZR.CloseReasonImpl(2,"Client aborted a reconnect attempt",!1),CONNECTION_TIMEOUT:new ZR.CloseReasonImpl(3,"The connection attempt timed out",!1),HANDSHAKE_REJECTED:new ZR.CloseReasonImpl(4,"The connection handshake was rejected by the server",!1),HANDSHAKE_ERROR:new ZR.CloseReasonImpl(5,"There was an error parsing the handshake response",!1),TRANSPORT_ERROR:new ZR.CloseReasonImpl(6,"There was an unexpected error with the connection",!0),CONNECTION_ERROR:new ZR.CloseReasonImpl(7,"The client could not establish a connection to the server",!0),IDLE_CONNECTION:new ZR.CloseReasonImpl(8,"The activity monitor detected the connection was idle",!0),LOST_MESSAGES:new ZR.CloseReasonImpl(16,"Loss of messages has been detected",!1),PROTOCOL_VERSION_MISMATCH:new ZR.CloseReasonImpl(17,"There was a mismatch in the protocol versions",!1),LICENSE_EXCEEDED:new ZR.CloseReasonImpl(18,"The license limit was exceeded",!1),ACCESS_DENIED:new ZR.CloseReasonImpl(99,"The connection attempt was rejected by the server because authentication failed",!1)},Ha.enumerize(tb.CloseReasonEnum);var rb,nb={},ob=this&&this.__extends||(rb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}rb(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(nb,"__esModule",{value:!0});var ib=Ls.InternalSessionState.INITIALISING,sb=Ls.InternalSessionState.CONNECTING,ab=Ls.InternalSessionState.CONNECTED,cb=Ls.InternalSessionState.DISCONNECTED,ub=Ls.InternalSessionState.RECONNECTING,pb=Ls.InternalSessionState.CLOSING,lb=Ls.InternalSessionState.CLOSED,fb=La.create("Internal Session"),hb=function(a){function e(e,t,r,n){var o,i=this,s=gl.Emitter.create();return(i=a.call(this,s)||this).emitter=s.emitter(i),i.principal="",i.conversationSetFactory=e,i.conversationSet=e(),i.serviceRegistry=t,i.opts=n,i.fsm=new KR.FSM(ib,((o={})[ib]=[sb],o[sb]=[ab,pb],o[ab]=[cb,pb,lb],o[cb]=[ub,pb],o[ub]=[ab,pb],o[pb]=[lb],o[lb]=[],o)),i.fsm.on("change",function(e,t){fb.debug("State changed: "+e+" -> "+t)}),i.transports=GR.Transports.create(),i.transports.on({"transport-selected":function(e){i.emitter.emit("transport-selected",e)},cascade:function(){i.emitter.emit("cascade")}}),i.connection=r(i.transports,i.opts.reconnect.timeout,256),i.serviceAdapter=new Ya.ServiceAdapter(i,function(e){i.connection.send(e)}),i.serviceLocator=new Ka.ServiceLocatorImpl(i,i.serviceAdapter),i.topicCache=new hR.TopicCache(nl.DataTypes),i.topicStreamRegistry=new JI.StreamRegistryImpl(i.topicCache),i.topicRouting=new _R.TopicRouting(i,i.serviceAdapter,i.conversationSet,i.topicCache,i.topicStreamRegistry),i.serviceRegistry.addListener(i.serviceAdapter.addService.bind(i.serviceAdapter)),i.sessionLocks=new kI.InternalSessionLocks(i,i.fsm),i.attempts=0,i}return ob(e,a),e.prototype.getOptions=function(){return this.opts},e.prototype.getState=function(){return this.fsm.state},e.prototype.onStateChange=function(e){this.fsm.on("change",e)},e.prototype.getConversationSet=function(){return this.conversationSet},e.prototype.isConnected=function(){return this.fsm.state===ab},e.prototype.getServiceRegistry=function(){return this.serviceRegistry},e.prototype.getSessionId=function(){return this.sessionID},e.prototype.getServerMaximumMessageSize=function(){return this.serverMaximumMessageSize},e.prototype.checkConnected=function(e){return!!this.isConnected()||(e(new Error("The session is not connected. Operations are not possible at this time.")),!1)},e.prototype.internalClose=function(e){this.fsm.change(lb)?(this.topicStreamRegistry.close(),this.conversationSet.discardAll(e),this.emitter.close(e)):fb.debug("Unable to handle session close, session state: ",this.fsm.state)},e.prototype.reconnect=function(e,t){if(this.fsm.change(ub)){fb.info("Reconnect attempt ("+ ++this.attempts+")");var r=WI.reconnect(t,this.connection.getAvailableSequence(),this.connection.lastReceivedSequence);this.connection.connect(r,e,e.reconnect.timeout)}else fb.debug("Unable to attempt reconnect, session state: ",this.fsm.state)},e.prototype.abort=function(e){void 0===e&&(e=tb.CloseReasonEnum.RECONNECT_ABORTED),this.fsm.change(pb)?(fb.debug("Aborting reconnect"),this.internalClose(e)):fb.debug("Unable to abort reconnect, session state: ",this.fsm.state)},e.prototype.replaceConversationSet=function(e){var t=this.conversationSet;this.conversationSet=this.conversationSetFactory(),t.discardAll(e),fb.debug("Replaced conversation set",e)},e.prototype.connect=function(){var t=this;if(this.fsm.change(sb)){var r,e=WI.connect();this.connection.on("data",this.topicRouting.route.bind(this.topicRouting)),this.connection.on("close",this.internalClose.bind(this)),this.sessionActivityMonitor=this.opts.activityMonitor?Ps.create(Cs.connectionActivityMonitorFactory):Ps.NOOP,this.connection.on("disconnect",function(e){fb.debug("Connection disconnected, reason: ",e),t.fsm.change(cb)||t.fsm.state===ub?(t.sessionActivityMonitor.onConnectionClosed(),0<t.opts.reconnect.timeout&&e.canReconnect?(t.fsm.state===cb&&(t.emitter.emit("disconnect",e),r=setTimeout(function(){t.fsm.state!==ab&&t.abort(tb.CloseReasonEnum.CONNECTION_TIMEOUT)},t.opts.reconnect.timeout)),t.opts.reconnect.strategy(t.reconnect.bind(t,t.opts,t.token),t.abort.bind(t),e)):t.abort(e)):t.fsm.change(pb)?t.internalClose(e):(t.sessionActivityMonitor.onConnectionClosed(),fb.debug("Unable to handle session disconnect, session state: ",t.fsm.state))}),this.connection.on("connect",function(e){t.fsm.change(ab)?(t.token=e.token,e.response===zI.responseCodes.OK?(t.sessionID=e.identity,t.serverMaximumMessageSize=e.maximumMessageSize,t.sessionActivityMonitor.onNewConnection(t.connection,e),t.emitter.emit("connect",e.identity)):e.response!==zI.responseCodes.RECONNECTED&&e.response!==zI.responseCodes.RECONNECTED_WITH_MESSAGE_LOSS||(t.attempts=0,clearTimeout(r),e.response===zI.responseCodes.RECONNECTED_WITH_MESSAGE_LOSS?(t.connection.resetSequences(),t.replaceConversationSet(new Error("Peer is disconnected")),t.topicCache.notifyUnsubscriptionOfAllTopics(t.topicStreamRegistry),fb.info("Reconnected session, but messages may have been lost")):fb.info("Reconnected session"),t.sessionActivityMonitor.onNewConnection(t.connection,e),t.emitter.emit("reconnect"))):fb.trace("Unknown connection response: ",e)}),fb.debug("Connecting with options:",this.opts),fb.trace("Connecting with request:",e);try{this.connection.connect(e,this.opts)}catch(t){fb.warn("Connection error",t),this.emitter.emit("error",t),this.fsm.change(pb)&&this.internalClose(tb.CloseReasonEnum.CONNECTION_ERROR)}this.opts.principal&&(this.principal=this.opts.principal)}else fb.warn("Unable to connect, session state: ",this.fsm.state),this.emitter.emit("error",new Error("Unable to connect, session state: "+this.fsm.state))},e.prototype.close=function(){return this.fsm.change(pb)?(this.sessionActivityMonitor.onConnectionClosed(),this.connection.close(tb.CloseReasonEnum.CLOSED_BY_CLIENT)):fb.debug("Unable to close, session state: ",this.fsm.state),this},e.prototype.getErrorHandler=function(){return function(e){fb.error("Session error:",e.message)}},e.prototype.getServiceLocator=function(){return this.serviceLocator},e.prototype.getServiceAdapter=function(){return this.serviceAdapter},e.prototype.getPrincipal=function(){return this.principal},e.prototype.setPrincipal=function(e){this.principal=e},e.prototype.getStreamRegistry=function(){return this.topicStreamRegistry},e.prototype.getRouting=function(){return this.topicRouting},e.prototype.onSystemPing=function(){this.sessionActivityMonitor.onSystemPing()},e.prototype.lock=function(e,t,r){return this.sessionLocks.lock(e,t,r)},e.prototype.unlock=function(e){return this.sessionLocks.unlock(e)},e.prototype.isShared=function(){return!1},e}(ol.StreamImpl);nb.InternalSessionImpl=hb;var db={};Object.defineProperty(db,"__esModule",{value:!0});var yb=function(){function e(){this.services=new Map,this.listeners=[]}return e.prototype.add=function(t,r){if(this.services.has(t))throw new Error("Service already exists for "+t);this.services.set(t,r),this.listeners.forEach(function(e){e(t,r)})},e.prototype.addListener=function(r){this.listeners.push(r),this.services.forEach(function(e,t){r(t,e)})},e}();db.ServiceRegistryImpl=yb;var vb={};Object.defineProperty(vb,"__esModule",{value:!0}),vb.monitoredPingService={onRequest:function(e,t,r){r.respond(),e.onSystemPing()}};var _b={};Object.defineProperty(_b,"__esModule",{value:!0}),_b.notifySubscriptionService={onRequest:function(e,t,r){r.respond(),e.getRouting().subscribe(t)}};var Sb={};Object.defineProperty(Sb,"__esModule",{value:!0}),Sb.notifyUnsubscriptionService={onRequest:function(e,t,r){r.respond(),e.getRouting().unsubscribe(t.id,t.reason)}};var Eb={};Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.pingService={onRequest:function(e,t,r){r.respond()}};var mb,wb={},gb=this&&this.__extends||(mb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}mb(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Tb=this&&this.__awaiter||function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(r,n)}o((c=c.apply(i,s||[])).next())})},Ob=this&&this.__generator||function(r,n){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ib=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},Rb=this;Object.defineProperty(wb,"__esModule",{value:!0});var bb,Cb,Ab,Pb=(Cb=new Us(0),function(){return Tb(Rb,void 0,void 0,function(){return Ob(this,function(e){return Cb=Cb.add(1),[2,new aa.ConversationId(Cb)]})})});(Ab=bb=wb.Result||(wb.Result={}))[Ab.ALREADY_FINISHED=0]="ALREADY_FINISHED",Ab[Ab.HANDLED_AND_ACTIVE=1]="HANDLED_AND_ACTIVE",Ab[Ab.HANDLED_AND_FINISHED=2]="HANDLED_AND_FINISHED";var Nb=La.create("Conversation Set"),Mb=function(r){function e(e){var t=r.call(this,e)||this;return t.name="NoSuchConversationError",t}return gb(e,r),e}(Error),Lb=function(){function e(e,t){this.reserved=!1,this.closed=!1,this.handler=e,this.completedExceptionally=t}return e.prototype.open=function(e){this.handler.onOpen(e)},e.prototype.respond=function(e,t){if(this.closed)return bb.ALREADY_FINISHED;var r,n=this.reserved;this.reserved=!0;try{r=this.handler.onResponse(e,t)}catch(t){throw this.completedExceptionally(e,this,t),t}return this.closed?(Nb.debug("Conversation already closed",e),bb.HANDLED_AND_FINISHED):r?(Nb.debug("Response handler closed conversation",e),this.closed=!0,bb.HANDLED_AND_FINISHED):this.pendingDiscard?(Nb.debug("Conversation closed with pending reason",e),this.notifyDiscard(e,this.pendingDiscard),bb.HANDLED_AND_FINISHED):(this.reserved=n,bb.HANDLED_AND_ACTIVE)},e.prototype.discard=function(e,t){this.reserved?this.pendingDiscard=t:this.notifyDiscard(e,t)},e.prototype.close=function(){this.closed=!0},e.prototype.notifyDiscard=function(e,t){if(!this.closed){this.closed=!0;try{this.handler.onDiscard(e,t)}catch(t){throw Nb.error("Application handler threw exception [cid="+e+"]",t.stack),t}}},e}(),Db=function(){function e(e){this.nextCID=e,this.conversations={}}return e.prototype.completedExceptionally=function(e,t,r){Nb.debug("Application handler threw exception [cid="+e+"]",r.stack),t.close(),delete this.conversations[e.toString()]},e.prototype.newConversation=function(n){return Tb(this,void 0,void 0,function(){var t,r;return Ob(this,function(e){switch(e.label){case 0:return t=new Lb(n,this.completedExceptionally.bind(this)),[4,this.nextCID()];case 1:r=e.sent(),this.conversations[r.toString()]=t;try{t.open(r)}catch(e){throw this.completedExceptionally(r,t,e),e}return void 0!==this.discardReason&&this.discard(r,this.discardReason),[2,r]}})})},e.prototype.respond=function(e,t){var r=this.conversations[e.toString()];if(void 0===r)throw Nb.debug("No conversation for cid: "+e+", response: ",t),new Mb("No such conversation");switch(r.respond(e,t)){case bb.ALREADY_FINISHED:throw new Mb("No such conversation");case bb.HANDLED_AND_ACTIVE:break;default:delete this.conversations[e.toString()]}},e.prototype.respondIfPresent=function(e,t){try{this.respond(e,t)}catch(e){if("NoSuchConversationError"!==e.name)throw e}},e.prototype.discard=function(e,t){var r=this.conversations[e.toString()];delete this.conversations[e.toString()],r&&r.discard(e,t)},e.prototype.discardAll=function(e){var t,r;if(void 0===this.discardReason){this.discardReason=e;try{for(var n=Ib(Object.keys(this.conversations)),o=n.next();!o.done;o=n.next()){var i=o.value;this.discard(aa.ConversationId.fromString(i),e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}},e.prototype.size=function(){return Object.keys(this.conversations).length},e}();wb.ConversationSet=Db,wb.create=function(){return new Db(Pb)};var jb={};Object.defineProperty(jb,"__esModule",{value:!0});var Ub=10;function xb(e){return e>>Ub}function Bb(e,t){return e&t-1}var kb=function(){function e(e,t){this.messagesLength=wc.findNextPowerOfTwo(e),this.indexCapacity=wc.findNextPowerOfTwo(t),this.messagesMask=Wc.curryR(Bb,this.messagesLength),this.indexMask=Wc.curryR(Bb,this.indexCapacity),this.messages=QI.ofSize(this.messagesLength),this.indices=QI.ofSize(this.indexCapacity,-1),this.times=QI.ofSize(this.indexCapacity),this.timesHead=0,this.timesTail=0,this.messagesTail=this.messagesMask(0),this.messagesSize=0}return e.prototype.size=function(){return this.messagesSize},e.prototype.put=function(e){if(this.messages[this.messagesTail]=e,this.messagesTail=this.messagesMask(this.messagesTail+1),this.messagesSize<this.messagesLength)this.messagesSize=this.messagesSize+1;else for(;this.indices[this.timesHead]===this.messagesTail;)this.indices[this.timesHead]=-1,this.timesHead=this.indexMask(this.timesHead+1)},e.prototype.recover=function(e,t){if(e<0||e>this.messagesSize)return!1;for(var r=e;1<=r;--r)t(this.messages[this.messagesMask(this.messagesTail-r)]);return!0},e.prototype.clear=function(){QI.fill(this.messages,null),QI.fill(this.indices,-1),this.timesHead=0,this.timesTail=0,this.messagesSize=0},e.prototype.removeElements=function(e){var t,r=this.messagesMask(this.messagesTail-this.messagesSize);t=r<e?(QI.fill(this.messages,null,r,e),this.messagesSize-e+r):e<r?(QI.fill(this.messages,null,r,this.messagesLength),QI.fill(this.messages,null,0,e),this.messagesSize-r+e):(QI.fill(this.messages,null),0),this.messagesSize=t},e.prototype.markTime=function(e){if(0<this.messagesSize){var t=this.timesHead,r=this.timesTail,n=this.indices[t],o=xb(e);if(0<=n){var i=this.indexMask(r-1);if(this.indices[i]===this.messagesTail)return;if(this.times[i]===o)return void(this.indices[i]=this.messagesTail)}this.timesTail=this.indexMask(r+1),this.times[r]=o,this.indices[r]=this.messagesTail,t===r&&0<=n&&(this.removeElements(n),this.timesHead=this.timesTail)}},e.prototype.flush=function(e){if(!(0===this.messagesSize||this.indices[this.timesHead]<0)){var t=this.timesTail,r=xb(e);do{var n=t;if(t=this.indexMask(t-1),this.times[t]<=r)return this.removeElements(this.indices[t]),this.timesHead<=n?QI.fill(this.indices,-1,this.timesHead,n):(QI.fill(this.indices,-1,this.timesHead,this.indexCapacity),QI.fill(this.indices,-1,0,n)),void(this.timesHead=n)}while(t!==this.timesHead)}},e}();jb.RecoveryBuffer=kb;var qb={};(function(e){"use strict";var n,t=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(qb,"__esModule",{value:!0});var s=La.create("Connection"),r=e.DIFFUSION_CLOSE_TIMEOUT||1e3,o=e.DIFFUSION_CONNECT_TIMEOUT||1e4,a=e.DIFFUSION_RECOVERY_BUFFER_INDEX_SIZE||8,i=function(i){function e(e,t,r){var n=this,o=gl.Emitter.create();return(n=i.call(this,o)||this).emitter=o.emitter(n),n.fsm=new KR.FSM("disconnected",{connecting:["connected","disconnected","closed"],connected:["disconnecting","disconnected","closed"],disconnecting:["disconnected"],disconnected:["connecting","closed"],closed:[]}),n.transports=e,n.reconnectTimeout=t,n.lastSentSequence=0,n.lastReceivedSequence=0,n.recoveryBuffer=new jb.RecoveryBuffer(r,a),n.fsm.on("change",function(e,t){s.debug("State changed: "+e+" -> "+t)}),n}return t(e,i),e.prototype.onData=function(e){var r=this;s.debug("Received message from transport",e),Ga.parse(e,function(e,t){if(!e&&t){if(t.type===Ga.types.ABORT_NOTIFICATION)return void r.transport.close();r.lastReceivedSequence++,r.emitter.emit("data",t)}else s.warn("Unable to parse message",e),r.fsm.change("closed")&&(r.closeReason=tb.CloseReasonEnum.CONNECTION_ERROR,r.transport.close())})},e.prototype.onClose=function(){this.fsm.change("disconnected")||this.fsm.change("closed")?(clearInterval(this.scheduledRecoveryBufferTrim),clearTimeout(this.scheduledClose),s.trace("Transport closed: ",this.closeReason),"disconnected"===this.fsm.state?this.emitter.emit("disconnect",this.closeReason):this.emitter.close(this.closeReason)):s.debug("Unable to disconnect, current state: ",this.fsm.state)},e.prototype.onError=function(e){s.error("Error from transport",e),this.fsm.change("closed")&&(this.closeReason=tb.CloseReasonEnum.TRANSPORT_ERROR,this.transport.close())},e.prototype.onHandshakeSuccess=function(e){if(e.response===zI.responseCodes.RECONNECTED){var t=this.lastSentSequence-e.sequence+1;if(!this.recoveryBuffer.recover(t,this.dispatch.bind(this))){var r=this.lastSentSequence-this.recoveryBuffer.size()-e.sequence+1;return s.warn("Unable to reconnect due to lost messages ("+r+")"),this.fsm.change("disconnected")&&(this.closeReason=tb.CloseReasonEnum.LOST_MESSAGES,this.transport.close()),e}this.recoveryBuffer.clear(),this.lastSentSequence=e.sequence-1}if(e.success&&this.fsm.change("connected"))s.trace("Connection response: ",e.response),this.closeReason=tb.CloseReasonEnum.TRANSPORT_ERROR,this.emitter.emit("connect",e);else{switch(s.error("Connection failed: ",e.response),e.response){case zI.responseCodes.AUTHENTICATION_FAILED:this.closeReason=tb.CloseReasonEnum.ACCESS_DENIED;break;case zI.responseCodes.LICENSE_EXCEEDED:this.closeReason=tb.CloseReasonEnum.LICENSE_EXCEEDED;break;case zI.responseCodes.DOWNGRADE:this.closeReason=tb.CloseReasonEnum.PROTOCOL_VERSION_MISMATCH;break;default:this.closeReason=tb.CloseReasonEnum.HANDSHAKE_REJECTED}this.transport.close()}return clearTimeout(this.scheduledClose),e},e.prototype.onHandshakeError=function(e){e.reason===OR.DeserialisationErrorReason.PROTOCOL_VERSION_MISMATCH?this.closeReason=tb.CloseReasonEnum.PROTOCOL_VERSION_MISMATCH:this.closeReason=tb.CloseReasonEnum.HANDSHAKE_ERROR,clearTimeout(this.scheduledClose),s.trace("Unable to deserialise handshake response",e)},e.prototype.connect=function(e,t,r){var n=this;if(void 0===r&&(r=o),"disconnected"===this.fsm.state){if(this.fsm.change("connecting")){if(this.closeReason=tb.CloseReasonEnum.CONNECTION_ERROR,this.transport=this.transports.get(t),null===this.transport)throw new Error("No valid transports requested");this.transport.on("data",this.onData.bind(this)),this.transport.on("close",this.onClose.bind(this)),this.transport.on("error",this.onError.bind(this)),this.transport.connect(e,this.onHandshakeSuccess.bind(this),this.onHandshakeError.bind(this)),this.scheduledClose=setTimeout(function(){s.debug("Timed out connection attempt after "+r),n.closeReason=tb.CloseReasonEnum.CONNECTION_TIMEOUT,n.transport.close()},r),this.scheduledRecoveryBufferTrim=setInterval(function(){"connected"===n.fsm.state&&n.recoveryBuffer.flush(Date.now()-n.reconnectTimeout)},this.reconnectTimeout)}}else s.warn("Cannot connect, current state: ",this.fsm.state)},e.prototype.resetSequences=function(){this.recoveryBuffer.clear(),this.lastSentSequence=0,this.lastReceivedSequence=0},e.prototype.getAvailableSequence=function(){return this.lastSentSequence+1-this.recoveryBuffer.size()},e.prototype.dispatch=function(e){var t=new Ba.BufferOutputStream;Ga.writeToBuffer(e,t),this.lastSentSequence+=1,this.recoveryBuffer.put(e),this.recoveryBuffer.markTime(Date.now()),this.transport.dispatch(t.getBuffer())},e.prototype.send=function(e){return"connected"===this.fsm.state&&(this.dispatch(e),!0)},e.prototype.close=function(e){return this.closeReason=e,"disconnected"===this.fsm.state?this.onClose():this.fsm.change("disconnecting")&&(this.dispatch(Ga.create(Ga.types.CLOSE_REQUEST)),this.scheduledClose=setTimeout(this.transport.close.bind(this.transport),r)),this},e.prototype.closeIdleConnection=function(){this.fsm.change("disconnecting")&&(s.debug("Connection detected as idle"),this.closeReason=tb.CloseReasonEnum.IDLE_CONNECTION,this.transport.close())},e.prototype.getState=function(){return this.fsm.state},e}(ol.StreamImpl);qb.Connection=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Vb={};Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.create=function(e,t,r){return new qb.Connection(e,t,r)};var Fb={};Object.defineProperty(Fb,"__esModule",{value:!0});var Gb=function(){function e(){}return e.prototype.read=function(e){return e.readMany(e.count-e.pos)},e.prototype.write=function(e,t){e.writeMany(t)},e}();Fb.BufferSerialiser=new Gb;var Hb={};(function(i){"use strict";var f=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Hb,"__esModule",{value:!0});var s="undefined"!=typeof window&&window.location.hostname?window.location.hostname:"localhost",a="undefined"!=typeof window&&"http:"===window.location.protocol&&window.location.port?parseInt(window.location.port,10):80,c="undefined"!=typeof window&&"https:"===window.location.protocol&&window.location.port?parseInt(window.location.port,10):443,u="undefined"==typeof window||"http:"!==window.location.protocol,p="/diffusion",h=function(e){setTimeout(e,5e3)},d=function(e,t){t()},y=["WEBSOCKET"],e=function(){function l(t){if(void 0===t&&(t={}),void 0===t.host)t.host=s;else if(-1<t.host.indexOf(":")){var e=t.host.split(":");void 0===t.port&&(t.port=parseInt(e[1],10)),t.host=e[0]}var r;void 0===t.path?t.path=p:("/"!==t.path[0]&&(t.path="/"+t.path),t.path.substring(t.path.length-p.length)!==p&&("/"===t.path[t.path.length-1]&&(t.path=t.path.substring(0,t.path.length-1)),t.path=t.path+p)),void 0!==t.port&&"string"==typeof t.port&&(isNaN(parseInt(t.port,10))?t.port=void 0:t.port=parseInt(t.port,10)),void 0===t.secure&&(void 0===t.port?t.secure=u:t.secure=t.port===c),void 0===t.port&&(t.port=t.secure?c:a),this.host=t.host,this.port=t.port,this.path=t.path,this.secure=t.secure,void 0===t.reconnect||"boolean"==typeof t.reconnect&&t.reconnect?this.reconnect={timeout:6e4,strategy:h}:"number"==typeof t.reconnect?this.reconnect={timeout:t.reconnect,strategy:h}:"function"==typeof t.reconnect?this.reconnect={timeout:6e4,strategy:t.reconnect}:"object"==typeof t.reconnect?this.reconnect={timeout:void 0===t.reconnect.timeout?6e4:t.reconnect.timeout,strategy:t.reconnect.strategy||h}:this.reconnect={timeout:0,strategy:d},void 0!==t.principal&&(this.principal=t.principal||"","string"==typeof t.credentials?this.credentials=t.credentials:(r=t.credentials)instanceof Int8Array||r instanceof Int16Array||r instanceof Int32Array||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Uint16Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array?this.credentials=i.from(t.credentials.buffer):Array.isArray(t.credentials)?(t.credentials.forEach(function(e){if("number"!=typeof e||127<e||e<-128)throw new Error("Custom credentials invalid. Element must be octet.")}),this.credentials=i.from(t.credentials)):this.credentials=""),"string"==typeof t.transports?this.transports=[t.transports]:"object"==typeof t.transports&&t.transports instanceof Array&&0<t.transports.length?this.transports=t.transports.slice():this.transports=y.slice(),this.transports=this.transports.slice().map(function(e){return e.toUpperCase()});var n=t.maxMessageSize&&1024<t.maxMessageSize?t.maxMessageSize:2147483647;if(this.maxMessageSize=n,this.activityMonitor=void 0===t.activityMonitor||t.activityMonitor,void 0!==t.properties){var o={};Object.getOwnPropertyNames(t.properties).forEach(function(e){"string"==typeof t.properties[e]&&(o[e]=t.properties[e])}),this.properties=o}this.httpProxyAgent=t.httpProxyAgent}return l.prototype.with=function(e){var t,r,n,o,i,s={};try{for(var a=f(Object.getOwnPropertyNames(this)),c=a.next();!c.done;c=a.next())s[i=c.value]=this[i]}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}try{for(var u=f(Object.getOwnPropertyNames(e)),p=u.next();!p.done;p=u.next())s[i=p.value]=e[i]}catch(e){n={error:e}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return new l(s)},l}();Hb.OptionsImpl=e}).call(this,t({}).Buffer);var Wb,Yb,zb,$b={};Object.defineProperty($b,"__esModule",{value:!0}),(zb=$b.WorkerCommand||($b.WorkerCommand={})).CONNECT="connect",zb.CONNECT_EXISTING="connect-existing",zb.CLOSE="close",zb.MESSAGE="message",zb.STREAM="stream",zb.SERVICE="service",zb.LOCK="lock",zb.CID="cid",(Yb=$b.WorkerSessionLockCommand||($b.WorkerSessionLockCommand={})).ACQUIRED="acquired",Yb.ACQUIRE_ERROR="acquire_error",Yb.OWNED="owned",Yb.REMOVED="removed",Yb.RELEASED="released",Yb.RELEASE_ERROR="release_error",(Wb=$b.WorkerStreamCommand||($b.WorkerStreamCommand={})).OPEN="open",Wb.VALUE="value",Wb.SUBSCRIPTION="subscription",Wb.UNSUBSCRIPTION="unsubscription",Wb.SUBSCRIPTION_ERROR="subscription_error";var Qb={},Kb=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(Qb,"__esModule",{value:!0});var Jb=La.create("InternalSessionLocksProxy"),Xb=function(){function e(e,t,r,n,o){var i=this;this.owned=!0,this.name=e,this.sequence=t,this.scope=r,this.releaseLock=o,n.setOwned=function(e){i.owned=e}}return e.prototype.getName=function(){return this.name},e.prototype.getSequence=function(){return this.sequence},e.prototype.isOwned=function(){return this.owned},e.prototype.getScope=function(){return this.scope},e.prototype.unlock=function(){return this.owned?(this.owned=!1,this.releaseLock(this)):Promise.resolve(!1)},e}(),Zb=function(){function e(e){var i=this;this.activeRequests={},this.releaseRequests={},this.locks={},this.nextRequestId=0,this.connector=e,this.connector.on("lock_event",function(e){var t=Kb(e,3),r=t[0],n=t[1],o=t[2];switch(n){case $b.WorkerSessionLockCommand.ACQUIRED:i.onLockAcquired(r,o);break;case $b.WorkerSessionLockCommand.ACQUIRE_ERROR:i.onLockAcquireError(r,o);break;case $b.WorkerSessionLockCommand.OWNED:i.onLockOwned(r,o);break;case $b.WorkerSessionLockCommand.REMOVED:i.onLockRemoved(r);break;case $b.WorkerSessionLockCommand.RELEASED:i.onLockReleased(o);break;case $b.WorkerSessionLockCommand.RELEASE_ERROR:i.onLockReleaseError(o);break;default:Jb.error("Unrecognised lock_event "+n)}})}return e.prototype.onLockAcquired=function(e,t){var r=Kb(t,3),n=r[0],o=r[1],i=r[2];void 0!==this.activeRequests[n]&&(this.activeRequests[n](void 0,e,Us.fromString(o,10),i),delete this.activeRequests[n])},e.prototype.onLockAcquireError=function(e,t){var r=Kb(t,2),n=r[0],o=r[1];void 0!==this.activeRequests[n]&&(this.activeRequests[n](o,e),delete this.activeRequests[n])},e.prototype.onLockOwned=function(e,t){void 0!==this.locks[e]&&this.locks[e].ownedSetter.setOwned(t)},e.prototype.onLockRemoved=function(e){delete this.locks[e]},e.prototype.onLockReleased=function(e){var t=Kb(e,2),r=t[0],n=t[1];this.releaseRequests[r](void 0,n)},e.prototype.onLockReleaseError=function(e){var t=Kb(e,2),r=t[0],n=t[1];this.releaseRequests[r](n)},e.prototype.handleAcquisition=function(e,t,r){var n=this.locks[e];if(void 0!==n&&n.lock.getSequence().equals(t))return n.lock;var o={setOwned:function(){throw Error("Session lock ownedSetter must be implemented")}},i=new Xb(e,t,r,o,this.releaseLock.bind(this));return this.locks[e]={lock:i,ownedSetter:o},i},e.prototype.releaseLock=function(e){var i=this;return new Promise(function(r,n){var o=i.nextRequestId++;i.releaseRequests[o]=function(e,t){delete i.releaseRequests[o],e?(Jb.debug("Release shared-session lock failed"),n(e)):r(t)},i.connector.send($b.WorkerCommand.LOCK,JSON.stringify({action:"release",requestId:o,name:e.getName(),sequence:e.getSequence().toString(10),scope:e.getScope()}))})},e.prototype.lock=function(e,t){var a=this;return new Promise(function(o,i){if(void 0!==a.locks[e]&&a.locks[e].lock.isOwned())o(a.locks[e].lock);else{var s=a.nextRequestId++;a.activeRequests[s]=function(e,t,r,n){delete a.activeRequests[s],e?(Jb.debug("Acquire shared-session lock failed"),i(e)):o(a.handleAcquisition(t,r,n))},a.connector.send($b.WorkerCommand.LOCK,JSON.stringify({action:"acquire",requestId:s,name:e,scope:t}))}})},e}();Qb.InternalSessionLocksProxy=Zb;var eC={};(function(i){"use strict";function s(e){var t=new Ua.BufferInputStream(i.from(e,"base64"));return Al.read(t)}function a(e,t,r){return e?"any"===t.name()?(r.type===tl.TopicTypeEnum.TIME_SERIES?nl.DataTypes.timeseries(nl.DataTypes.get(r.properties.TIME_SERIES_EVENT_VALUE_TYPE)):nl.DataTypes.get(r.type)).readValue(e):t.readValue(e):null}Object.defineProperty(eC,"__esModule",{value:!0});var e=function(){function e(e,t){this.stream=e,this.datatype=t}return e.prototype.onOpen=function(){this.stream.onOpen()},e.prototype.onValue=function(e){var t=JSON.parse(e),r=s(t.specification),n=t.oldValue?i.from(t.oldValue,"base64"):null,o=i.from(t.newValue,"base64");this.stream.onValue(t.path,r,n,o,a(n,this.datatype,r),a(o,this.datatype,r))},e.prototype.onSubscription=function(e){var t=JSON.parse(e);this.stream.onSubscription(t.path,s(t.specification))},e.prototype.onUnsubscription=function(e){var t=JSON.parse(e),r=void 0!==t.reason?uO.UnsubscribeReasonEnum[uO.UnsubscribeReasonEnum[t.reason]]:uO.UnsubscribeReasonEnum.UNKNOWN_UNSUBSCRIBE_REASON;this.stream.onUnsubscription(t.path,s(t.specification),r)},e.prototype.onSubscriptionError=function(e){this.stream.onSubscriptionError(Wa.ErrorReason[Wa.ErrorReason[parseInt(e,10)]])},e}();eC.ValueStreamWorkerReceiver=e}).call(this,t({}).Buffer);var tC={},rC=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},nC=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(tC,"__esModule",{value:!0});var oC,iC=(oC=new Us(0),function(){return oC=oC.add(1),new aa.ConversationId(oC)}),sC=function(){function e(e){var a=this;this.connector=e,this.adapters={},this.connector.on({stream_event:function(e){var t=rC(e,4),r=t[0],n=t[1],o=t[2],i=t[3],s=a.adapters[r];if(s)switch(n){case $b.WorkerStreamCommand.OPEN:s.onOpen();break;case $b.WorkerStreamCommand.VALUE:s.onValue(i);break;case $b.WorkerStreamCommand.SUBSCRIPTION:s.onSubscription(i);break;case $b.WorkerStreamCommand.UNSUBSCRIPTION:s.onUnsubscription(i);break;case $b.WorkerStreamCommand.SUBSCRIPTION_ERROR:s.onSubscriptionError(o)}}})}return e.prototype.add=function(e,t,r){var n=iC();this.adapters[n.toString()]=new eC.ValueStreamWorkerReceiver(t,r);var o={action:"add",adapterId:n.toString(),topic:e.expression,datatype:r.name()};this.connector.send($b.WorkerCommand.STREAM,JSON.stringify(o))},e.prototype.addFallback=function(e,t){var r=iC();this.adapters[r.toString()]=new eC.ValueStreamWorkerReceiver(e,t);var n={action:"add_fallback",adapterId:r.toString(),datatype:t.name()};this.connector.send($b.WorkerCommand.STREAM,JSON.stringify(n))},e.prototype.remove=function(e){var t,r;try{for(var n=nC(Object.getOwnPropertyNames(this.adapters)),o=n.next();!o.done;o=n.next()){var i=o.value;if(this.adapters[i].stream===e){var s={action:"remove",adapterId:i.toString()};this.connector.send($b.WorkerCommand.STREAM,JSON.stringify(s)),delete this.adapters[i]}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.close=function(){this.connector.send($b.WorkerCommand.STREAM,JSON.stringify({action:"close_registry"}))},e}();tC.StreamRegistryWebworkerProxy=sC;var aC={};(function(u){"use strict";var n,t=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r},p=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(aC,"__esModule",{value:!0});var a=La.create("InternalSessionWebworkerProxy"),e=function(i){function e(e,t,r,n){var c=this,o=gl.Emitter.create();return(c=i.call(this,o)||this).emitter=o.emitter(c),c.connector=r,c.opts=n,c.connected=!1,c.state=Ls.InternalSessionState.INITIALISING,c.connector.on({connect_event:function(e){var t=p(e,3),r=t[0],n=t[1],o=t[2];c.sessionID=bh.SessionId.fromString(r),c.connected=!0;try{c.serverMaximumMessageSize=parseInt(o,10),c.opts=JSON.parse(n),c.emitter.emit("connect",c.sessionID,new Hb.OptionsImpl(c.opts))}catch(e){a.error("Unable to parse options from shared session",e),c.emitter.emit("error",new Error("Unable to parse options from shared session"))}},connect_error:function(e){c.connector.disconnect(),c.emitter.emit("error",tb.CloseReasonEnum[e]||new Error(e))},reconnect_event:function(){c.connected=!0,c.emitter.emit("reconnect")},disconnect_event:function(e){c.connected=!1;var t=tb.CloseReasonEnum[e];c.emitter.emit("disconnect",tb.CloseReasonEnum[t])},close_event:function(e){c.connector.disconnect(),c.connected=!1;var t=tb.CloseReasonEnum[e];c.emitter.close(tb.CloseReasonEnum[t])},error_event:function(e){c.connector.disconnect(),c.connected=!1,c.emitter.emit("error",new Error(e))},command_response:function(e){var t=p(e,2),r=t[0],n=t[1],o=aa.ConversationId.fromString(r),i=new Ua.BufferInputStream(u.from(n,"base64"));c.conversationSet.respondIfPresent(o,i)},command_error:function(e){var t,r=p(e,2),n=r[0],o=r[1],i=aa.ConversationId.fromString(n);try{t=JSON.parse(o)}catch(e){t=new Error("Could not parse error response")}c.conversationSet.discard(i,t)},service_request:function(e){var t=p(e,3),r=t[0],n=t[1],o=t[2],i=aa.ConversationId.fromString(n),s=new Ba.BufferOutputStream;Ra.CommandHeaderSerialiser.write(s,new Ta.CommandHeader(parseInt(r,10),i)),Fb.BufferSerialiser.write(s,u.from(o,"base64"));var a=new Ua.BufferInputStream(s.getBuffer());c.serviceAdapter.onMessage(Ga.types.SERVICE_REQUEST,a)},state_change:function(e){c.state=e}}),c.serviceAdapter=new Ya.ServiceAdapter(c,function(e){c.connector.sendMessage(e)}),c.serviceLocator=new Ka.ServiceLocatorImpl(c,c.serviceAdapter),c.serviceRegistry=t,c.serviceRegistry.addListener(c.serviceAdapter.addService.bind(c.serviceAdapter)),c.serviceRegistry.addListener(function(e){c.connector.send($b.WorkerCommand.SERVICE,JSON.stringify({action:"add",serviceId:e.id}))}),c.topicStreamRegistry=new tC.StreamRegistryWebworkerProxy(c.connector),c.conversationSet=e(),c.sessionLocks=new Qb.InternalSessionLocksProxy(c.connector),c}return t(e,i),e.prototype.connect=function(){if(this.opts){var e=this.opts,t=e.credentials,r=e.reconnect,n=s(e,["credentials","reconnect"]),o=t instanceof u,i=o?t.toString("base64"):t;n.reconnect=r.timeout,this.connector.send($b.WorkerCommand.CONNECT,JSON.stringify([n,o,i]))}else this.connector.send($b.WorkerCommand.CONNECT_EXISTING)},e.prototype.close=function(){return this.state!==Ls.InternalSessionState.CLOSED&&this.connector.send($b.WorkerCommand.CLOSE),this},e.prototype.isConnected=function(){return this.connected},e.prototype.checkConnected=function(e){return!!this.isConnected()||(e(new Error("The session is not connected. Operations are not possible at this time.")),!1)},e.prototype.getSessionId=function(){return this.sessionID},e.prototype.getPrincipal=function(){if(void 0===this.opts)throw new Error("Shared session is not connected");return this.opts.principal},e.prototype.setPrincipal=function(e){if(void 0===this.opts)throw new Error("Shared session is not connected");this.opts.principal=e},e.prototype.getOptions=function(){if(void 0===this.opts)throw new Error("Shared session is not connected");return this.opts},e.prototype.getState=function(){return this.state},e.prototype.getServerMaximumMessageSize=function(){return this.serverMaximumMessageSize},e.prototype.lock=function(e,t){return this.sessionLocks.lock(e,t)},e.prototype.onSystemPing=function(){throw new Error("Method not implemented.")},e.prototype.getStreamRegistry=function(){return this.topicStreamRegistry},e.prototype.getServiceRegistry=function(){return this.serviceRegistry},e.prototype.getRouting=function(){throw new Error("Method not implemented.")},e.prototype.getServiceLocator=function(){return this.serviceLocator},e.prototype.getConversationSet=function(){return this.conversationSet},e.prototype.isShared=function(){return!0},e}(ol.StreamImpl);aC.InternalSessionWebworkerProxy=e}).call(this,t({}).Buffer);var cC,uC={},pC=this&&this.__extends||(cC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}cC(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),lC=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},fC=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},hC=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(fC(arguments[t]));return e};Object.defineProperty(uC,"__esModule",{value:!0});var dC=function(){function e(e){var s=this;this.listeners={},this.worker=new SharedWorker(e),this.worker.port.onmessage=function(e){var t,r,n=e.data[0];if(void 0!==s.listeners[n])try{for(var o=lC(s.listeners[n]),i=o.next();!i.done;i=o.next())i.value.apply(void 0,hC([e.data[1]],e.data.slice(2)))}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}}return e.prototype.getWorker=function(){return this.worker},e.prototype.addListener=function(e,t){void 0===this.listeners[e]?this.listeners[e]=[t]:this.listeners[e].push(t)},e.prototype.removeListener=function(e,t){void 0!==this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(function(e){return e!==t}))},e}(),yC={};var vC=function(o){function e(e,t){var n=this,r=gl.Emitter.create();return(n=o.call(this,r)||this).emitter=r.emitter(n),n.sessionName=e,n.router=function(e){if(!window||!window.SharedWorker)throw new Error("SharedWorker could not be found!");return void 0===yC[e]&&(yC[e]=new dC(e)),yC[e]}(t),n.worker=n.router.getWorker(),n.listener=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];t.length<2?n.emitter.emit(e,t[0]):n.emitter.emit(e,t)},n.router.addListener(e,n.listener),n}return pC(e,o),e.prototype.send=function(e,t){this.worker.port.postMessage([this.sessionName,e,t])},e.prototype.sendMessage=function(e){var t={type:e.type,encoding:e.encoding,data:e.data.toString("base64"),stream:e.getBuffer().toString("base64"),headers:e.headers,id:e.id,topic:e.topic};this.send($b.WorkerCommand.MESSAGE,JSON.stringify(t))},e.prototype.disconnect=function(){this.router.removeListener(this.sessionName,this.listener)},e}(ol.StreamImpl);uC.SharedSessionConnector=vC,uC.getSharedConversationSetFactory=function(t){var r=[];function e(){return new Promise(function(e){r.push(e),t.send($b.WorkerCommand.CID)})}return t.on("cid_event",function(e){0<r.length&&r.shift()(new aa.ConversationId(Us.fromString(e)))}),function(){return new wb.ConversationSet(e)}};var _C={};function SC(e){e=iu.requireNonNull(e,"options");var t=new db.ServiceRegistryImpl;return t.add(UI.USER_PING,Eb.pingService),t.add(UI.SYSTEM_PING,vb.monitoredPingService),t.add(UI.NOTIFY_SUBSCRIPTION,_b.notifySubscriptionService),t.add(UI.UNSUBSCRIPTION_NOTIFICATION,Sb.notifyUnsubscriptionService),new nb.InternalSessionImpl(wb.create,t,Vb.create,e)}function EC(e,t){var r=new db.ServiceRegistryImpl,n=new uC.SharedSessionConnector(e,t),o=uC.getSharedConversationSetFactory(n);return function(e){return new aC.InternalSessionWebworkerProxy(o,r,n,e)}}Object.defineProperty(_C,"__esModule",{value:!0}),_C.createShared=EC,_C.create=function(e,t){if(void 0===e&&void 0===t)return SC;if(void 0!==e&&void 0!==t)return EC(e,t);throw new Error('Missing parameter "name" or "workerJs" when creating a shared session')};var mC={};Object.defineProperty(mC,"__esModule",{value:!0}),mC.escape=function(e){return jl.escape(iu.requireNonNull(e,"string"))},mC.stringToRoles=function(e){return jl.stringToSet(iu.requireNonNull(e,"string"))},mC.rolesToString=function(e){return jl.collectionToString(iu.requireNonNull(e,"roles"))};var wC,gC={},TC=this&&this.__extends||(wC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}wC(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),OC=this&&this.__awaiter||function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(r,n)}o((c=c.apply(i,s||[])).next())})},IC=this&&this.__generator||function(r,n){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},RC=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},bC=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(RC(arguments[t]));return e};Object.defineProperty(gC,"__esModule",{value:!0});var CC,AC,PC=La.create("Registration");(AC=CC=gC.ResponseHandlerState||(gC.ResponseHandlerState={}))[AC.REGISTERING=0]="REGISTERING",AC[AC.ACTIVE=1]="ACTIVE",AC[AC.CLOSED=2]="CLOSED";var NC=function(o){function e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=o.apply(this,bC(t))||this;return n.cause=e,n}return TC(e,o),e}(Error);function MC(o,r,e){var i,s=CC.REGISTERING;return{onDiscard:function(e,t){try{t instanceof ZR.CloseReasonImpl?r.close():r.close(t)}catch(t){PC.error("REGISTERED_HANDLER_EXCEPTION",t)}s=CC.CLOSED},onOpen:function(n){i=function(){return new Promise(function(t,r){s!==CC.CLOSED?e(n,function(e){e?(o.getConversationSet().discard(n,e),r(e)):(o.getConversationSet().respondIfPresent(n,CC.CLOSED),t())}):r(new Error("Handler already closed"))})}},onResponse:function(t,e){if(e===CC.CLOSED){try{r.close()}catch(e){PC.error("REGISTERED_HANDLER_EXCEPTION",e)}return s=e,!0}try{return e===CC.ACTIVE?(r.active(i,t),s=e,!1):r.respond(e)}catch(e){PC.error("REGISTERED_HANDLER_EXCEPTION",e),o.getConversationSet().discard(t,new NC(e,"An error was thrown by the handler")),i().catch(function(e){PC.debug("Failed to deregister with the server",e)})}return!0}}}function LC(t,r,n,o){return function(e){e?(t.discard(r,e),o(e)):(t.respondIfPresent(r,CC.ACTIVE),n())}}function DC(s,a,c,u,p){return OC(this,void 0,void 0,function(){var r,t,n,o,i;return IC(this,function(e){switch(e.label){case 0:return r=s.getConversationSet(),t=s.getServiceLocator(),n=t.obtain(u),o=t.obtain(p),[4,r.newConversation(MC(s,c,function(e,t){o.send(a,t)}))];case 1:return i=e.sent(),[2,new Promise(function(e,t){n.send({params:a,cid:i},LC(r,i,e,t))})]}})})}gC.responseHandler=MC,gC.registrationCallback=LC,gC.registerHandler=DC,gC.registerRequestHandler=function(e,t,r){return DC(e,t,r,UI.MESSAGING_RECEIVER_CONTROL_REGISTRATION,UI.MESSAGING_RECEIVER_CONTROL_DEREGISTRATION)},gC.registerTopicHandler=function(e,t,r){return DC(e,t,r,UI.TOPIC_CONTROL_REGISTRATION,UI.TOPIC_CONTROL_DEREGISTRATION)};var jC={};Object.defineProperty(jC,"__esModule",{value:!0});var UC=function(e,t,r){this.filter=e,this.rolesToRemove=t,this.rolesToAdd=r};jC.ChangeAuthorisationRolesFilterRequest=UC;var xC={};Object.defineProperty(xC,"__esModule",{value:!0});var BC=function(e,t,r){this.sessionID=e,this.rolesToRemove=t,this.rolesToAdd=r};xC.ChangeAuthorisationRolesRequest=BC;var kC={};Object.defineProperty(kC,"__esModule",{value:!0});var qC=function(e,t){this.filter=e,this.conflate=t};kC.SetClientConflationFilterRequest=qC;var VC={};Object.defineProperty(VC,"__esModule",{value:!0});var FC=function(e,t){this.sessionID=e,this.conflate=t};VC.SetClientConflationRequest=FC;var GC={};Object.defineProperty(GC,"__esModule",{value:!0});var HC=function(e,t,r){this.filter=e,this.overwriteProperties=t,this.removeProperties=r};GC.SetSessionPropertiesFilterRequest=HC;var WC,YC={};Object.defineProperty(YC,"__esModule",{value:!0}),(WC=YC.SessionEventType||(YC.SessionEventType={}))[WC.UPDATED=0]="UPDATED",WC[WC.RECONNECTED=1]="RECONNECTED",WC[WC.FAILED_OVER=2]="FAILED_OVER",WC[WC.DISCONNECTED=3]="DISCONNECTED";var zC={},$C=this&&this.__awaiter||function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(r,n)}o((c=c.apply(i,s||[])).next())})},QC=this&&this.__generator||function(r,n){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},KC=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},JC=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},XC=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(JC(arguments[t]));return e};Object.defineProperty(zC,"__esModule",{value:!0});var ZC=La.create("Session.Clients"),eA=function(){function e(e){this.SessionEventType=YC.SessionEventType,this.internal=e,this.serviceLocator=e.getServiceLocator(),this.SET_CLIENT_CONFLATION=this.serviceLocator.obtain(UI.SET_CLIENT_CONFLATION),this.SET_CLIENT_CONFLATION_FILTER=this.serviceLocator.obtain(UI.SET_CLIENT_CONFLATION_FILTER),this.GET_SESSION_PROPERTIES=this.serviceLocator.obtain(UI.GET_SESSION_PROPERTIES),this.SESSION_PROPERTIES_REGISTRATION=this.serviceLocator.obtain(UI.SESSION_PROPERTIES_REGISTRATION_2),this.CHANGE_AUTHORISATION_ROLES=this.serviceLocator.obtain(UI.CHANGE_AUTHORISATION_ROLES),this.CHANGE_AUTHORISATION_ROLES_FILTER=this.serviceLocator.obtain(UI.CHANGE_AUTHORISATION_ROLES_FILTER),this.SET_SESSION_PROPERTIES_FILTER=this.serviceLocator.obtain(UI.SET_SESSION_PROPERTIES_FILTER),this.internal.getServiceRegistry().add(UI.SESSION_PROPERTIES_EVENT_2,{onRequest:function(e,t,r){e.getConversationSet().respondIfPresent(t.cid,t),r.respond()}})}return e.prototype.close=function(t){var o=this;return new Promise(function(r,n){try{iu.requireNonNull(t,"sessions")}catch(e){return void n(e)}if(o.internal.checkConnected(n)){var e=bh.SessionId.validate(t);e?o.serviceLocator.obtain(UI.CLOSE_CLIENT).send({sessionID:e},function(e,t){e?n(e):r(1)}):"string"==typeof t?o.serviceLocator.obtain(UI.CLOSE_CLIENT_FILTER).send(t,function(e,t){BI.responseSuccess(e,t)?0<t.errors.length?n(t.errors):r(t.count):n(e)}):n(new Error("Invalid SessionID: "+t))}})},e.prototype.subscribe=function(o,i){var s=this;return new Promise(function(r,n){try{o=iu.requireNonNull(o,"SessionID or Session Filter"),i=iu.requireNonNull(i,"Topic Selector")}catch(e){return void n(e)}if(s.internal.checkConnected(n)){var e=void 0;try{e=uf.parseSelector(i)}catch(e){return void n(e)}var t=bh.SessionId.validate(o);t?s.serviceLocator.obtain(UI.SUBSCRIBE_CLIENT).send({sessionID:t,selector:e},function(e){e?n(e):r()}):s.serviceLocator.obtain(UI.FILTER_SUBSCRIBE).send({filter:o,selector:e},function(e,t){BI.responseSuccess(e,t)?t.isSuccess()?r(t.selected):n(t.errors):n(e)})}})},e.prototype.unsubscribe=function(o,i){var s=this;return new Promise(function(r,n){try{iu.requireNonNull(o,"SessionID or Session Filter"),iu.requireNonNull(i,"Topic Selector")}catch(e){return void n(e)}if(s.internal.checkConnected(n)){var e=void 0;try{e=uf.parseSelector(i)}catch(e){return void n(e)}var t=bh.SessionId.validate(o);t?s.serviceLocator.obtain(UI.UNSUBSCRIBE_CLIENT).send({sessionID:t,selector:e},function(e){e?n(e):r()}):s.serviceLocator.obtain(UI.FILTER_UNSUBSCRIBE).send({filter:o,selector:e},function(e,t){BI.responseSuccess(e,t)?t.isSuccess()?r(t.selected):n(t.errors):n(e)})}})},e.prototype.getSessionProperties=function(e,t){var o=this;return void 0===t&&(t=[]),new Promise(function(r,n){"string"==typeof e&&(e=bh.SessionId.fromString(e)),o.internal.checkConnected(n)&&o.GET_SESSION_PROPERTIES.send({sessionID:e,propertyKeys:t},function(e,t){BI.responseSuccess(e,t)?null===t?n(new Error("Invalid session ID")):r(t.properties):n(e)})})},e.prototype.setSessionProperties=function(o,i){var s=this;return new Promise(function(r,n){try{iu.requireNonNull(o,"sessionId"),iu.requireNonNull(i,"properties")}catch(e){return void n(e)}if("string"==typeof o&&(o=bh.SessionId.fromString(o)),s.internal.checkConnected(n)){var e={},t=[];s.extractOverwriteAndRemoveProperties(e,t,i),s.serviceLocator.obtain(UI.SET_SESSION_PROPERTIES).send({sessionID:o,overwriteProperties:e,removeProperties:t},function(e,t){BI.responseSuccess(e,t)?r(t.properties):n(e)})}})},e.prototype.setOverwriteOrRemoveProperty=function(e,t,r,n){null===n?t.push(r):e[r]=n},e.prototype.extractOverwriteAndRemoveProperties=function(r,n,e){var t,o,i=this;if(e.forEach instanceof Function)e.forEach(function(e,t){i.setOverwriteOrRemoveProperty(r,n,e,t)});else try{for(var s=KC(Object.getOwnPropertyNames(e)),a=s.next();!a.done;a=s.next()){var c=a.value;this.setOverwriteOrRemoveProperty(r,n,c,e[c])}}catch(r){t={error:r}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(t)throw t.error}}},e.prototype.setSessionPropertiesByFilter=function(i,s){var a=this;return new Promise(function(r,n){try{iu.requireNonNull(i,"filter"),iu.requireNonNull(s,"properties")}catch(e){return void n(e)}if(a.internal.checkConnected(n)){var e={},t=[],o=new GC.SetSessionPropertiesFilterRequest(i,e,t);a.extractOverwriteAndRemoveProperties(e,t,s),a.SET_SESSION_PROPERTIES_FILTER.send(o,function(e,t){BI.responseSuccess(e,t)?0<t.errors.length?n(t.errors):r(t.count):n(e)})}})},e.prototype.setSessionPropertiesListener=function(a,c){var e=this;return new Promise(function(i,s){return $C(e,void 0,void 0,function(){var t,r,n,o=this;return QC(this,function(e){switch(e.label){case 0:return c||s(new Error("Session Properties listener is null or undefined")),this.internal.checkConnected(s)?(ZC.debug("Adding Session Properties Listener"),t={active:function(e){ZC.debug("Session Properties Listener active"),c.onActive(e)},respond:function(e){var t,r;try{for(var n=KC(e.events),o=n.next();!o.done;o=n.next()){var i=o.value;switch(i.type){case dy.SessionPropertiesEventType.OPEN:c.onSessionOpen(i.sessionId,i.oldProperties);break;case dy.SessionPropertiesEventType.UPDATE:c.onSessionEvent(i.sessionId,i.updateType,i.newProperties,i.oldProperties);break;case dy.SessionPropertiesEventType.CLOSE:c.onSessionClose(i.sessionId,i.oldProperties,i.closeReason);break;default:ZC.debug("Unknown event type received for session properties listener",i.type)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!1},close:function(e){ZC.debug("Session Properties Listener closed"),e?c.onError(e):c.onClose()}},[4,(r=this.internal.getConversationSet()).newConversation(gC.responseHandler(this.internal,t,function(e,t){o.SESSION_PROPERTIES_REGISTRATION.send({cid:e},t)}))]):[3,2];case 1:n=e.sent(),this.SESSION_PROPERTIES_REGISTRATION.send({cid:n,properties:a},gC.registrationCallback(r,n,i,s)),e.label=2;case 2:return[2]}})})})},e.prototype.changeRoles=function(t,e,r){var o=this,i=Array.isArray(e)?e:XC(e),s=Array.isArray(r)?r:XC(r);if(0===i.length&&0===s.length)throw new Error("rolesToRemove and rolesToAdd cannot both be empty");var a=bh.SessionId.validate(t);return new Promise(function(r,n){try{iu.requireNonNull(t,"sessions")}catch(e){return void n(e)}if(o.internal.checkConnected(n))if(!1===a){var e=new jC.ChangeAuthorisationRolesFilterRequest(t,i,s);o.CHANGE_AUTHORISATION_ROLES_FILTER.send(e,function(e,t){e?n(e):0<t.errors.length?n(t.errors):r(t.count)})}else e=new xC.ChangeAuthorisationRolesRequest(a,i,s),o.CHANGE_AUTHORISATION_ROLES.send(e,function(e){e?n(e):r(1)})})},e.prototype.setConflated=function(o,i){var s=this;return new Promise(function(r,n){try{iu.requireNonNull(o,"sessions")}catch(e){return void n(e)}if(s.internal.checkConnected(n)){var e=bh.SessionId.validate(o);if(e){var t=new VC.SetClientConflationRequest(e,i);s.SET_CLIENT_CONFLATION.send(t,function(e){e?n(e):r(1)})}else"string"==typeof o?(t=new kC.SetClientConflationFilterRequest(o,i),s.SET_CLIENT_CONFLATION_FILTER.send(t,function(e,t){BI.responseSuccess(e,t)?0<t.errors.length?n(t.errors):r(t.count):n(e)})):n(new Error("Invalid SessionID: "+o))}})},e}();zC.ClientControlImpl=eA;var tA={};Object.defineProperty(tA,"__esModule",{value:!0});var rA=function(){function e(e){this.internal=e,this.FETCH_LOG_ENTRIES_SERVICE=e.getServiceLocator().obtain(UI.FETCH_LOG_ENTRIES_SERVICE)}return e.prototype.fetchEntries=function(e,t){var o=this;return new Promise(function(r,n){o.internal.checkConnected(n)&&o.FETCH_LOG_ENTRIES_SERVICE.send(new Zv.EntriesFetchRequest(e,t),function(e,t){e?n(e):r(t)})})},e}();tA.LogRetrieval=rA;var nA={};Object.defineProperty(nA,"__esModule",{value:!0}),nA.create=function(n){return{onRequest:function(e,t,r){try{n(e,t,r)}catch(e){r.fail(Wa.ErrorReason.CALLBACK_EXCEPTION,e.message)}}}};var oA={},iA=this&&this.__awaiter||function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(r,n)}o((c=c.apply(i,s||[])).next())})},sA=this&&this.__generator||function(r,n){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(oA,"__esModule",{value:!0});var aA=La.create("Session.Messages"),cA=function(e,t,r){this.reqType=e,this.resType=t,this.stream=r},uA=function(){function e(e,t){this.callback=e,this.responseType=t}return e.prototype.respond=function(e){if(0===arguments.length)throw new Error("No argument provided to the responder");if(null==e&&!this.responseType)throw new Error("No response type has been provided and the value provided is null. Unable to determine the response type.");var t=this.responseType?nl.DataTypes.getChecked(this.responseType):nl.DataTypes.getByValue(e);if(void 0===t)throw new Error("Unable to determine the response type.");var r=t.writeValue(e);this.callback.respond({responseDataType:t.name(),data:r})},e.prototype.reject=function(e){this.callback.fail(Wa.ErrorReason.REJECTED_REQUEST,e)},e}(),pA=function(){function e(e){var u=this;this.requestStreams={};var t=(this.internal=e).getServiceLocator();this.MESSAGING_SEND=t.obtain(UI.MESSAGING_SEND),this.MESSAGING_FILTER_SEND=t.obtain(UI.MESSAGING_FILTER_SEND),this.MESSAGING_RECEIVER_SERVER=t.obtain(UI.MESSAGING_RECEIVER_SERVER),this.deregisterRequestHandler=t.obtain(UI.MESSAGING_RECEIVER_CONTROL_DEREGISTRATION);var r=e.getServiceRegistry();r.add(UI.MESSAGING_SEND,nA.create(function(e,t,r){var n=u.requestStreams[t.path];if(void 0!==n){var o=new uA(r,n.resType),i=nl.DataTypes.get(t.dataType),s=n.reqType?n.reqType:i.valueClass;if(i.canReadAs(s)){var a=void 0;try{a=i.readAs(s,t.request)}catch(e){return aA.error("Failed to convert "+i.name()+" datatype to "+s),n.stream.onError(Wa.ErrorReason.INVALID_DATA),void delete u.requestStreams[t.path]}try{n.stream.onRequest(t.path,a,o)}catch(e){aA.error("Messaging request stream threw an error",e),r.fail(Wa.ErrorReason.CALLBACK_EXCEPTION,e.stack)}}else{var c="Messaging request for path "+t.path+" with "+i.name()+"datatype is incompatible for stream ("+s+")";aA.debug(c),r.fail(Wa.ErrorReason.INCOMPATIBLE_DATATYPE,c)}}else r.fail(Wa.ErrorReason.UNHANDLED_MESSAGE,"Session "+e.getSessionId()+" has no registered streams for message sent to path '"+t.path+"'")})),r.add(UI.FILTER_RESPONSE,nA.create(function(e,t,r){r.respond(),e.getConversationSet().respondIfPresent(t.cid,t)})),r.add(UI.MESSAGING_RECEIVER_CLIENT,nA.create(function(e,t,r){e.getConversationSet().respondIfPresent(t.cid,{request:t,callback:r.respond,fail:r.fail})}))}return e.prototype.addRequestHandler=function(i,s,n,a){var c=this;return new Promise(function(t,r){if(c.internal.checkConnected(r)){try{iu.requireNonNull(i,"Message path"),iu.requireNonNull(s,"Request handler")}catch(e){return void r(e)}aA.debug("Adding request handler",i);var o={definition:UI.MESSAGING_RECEIVER_CLIENT,group:ad.DEFAULT,path:i,keys:void 0!==n?n:[]},e={active:function(e,n){aA.debug("Request handler active",i),t({close:function(){return new Promise(function(r){c.deregisterRequestHandler.send(o,function(e,t){e?(c.internal.getConversationSet().discard(n,e),aA.debug("Error with request handler deregistration: ",e)):(s.onClose(),c.internal.getConversationSet().respondIfPresent(n,t)),r()})})}})},respond:function(n){aA.debug("Request handler pair.request",i);var e={sessionId:n.request.sessionID,path:n.request.path,properties:n.request.properties};try{var t=(a||nl.DataTypes.getChecked(n.request.dataType)).readValue(n.request.content),r={respond:function(e,t){var r=nl.DataTypes.getChecked(t?t.name():e);n.callback({responseDataType:r.name(),data:r.writeValue(e)})},reject:function(e){n.fail(Wa.ErrorReason.REJECTED_REQUEST,e)}};return s.onRequest(t,e,r),!1}catch(e){return aA.info("An exception has occurred whilst processing the request:",e),s.onError(e),n.fail(Wa.ErrorReason.CALLBACK_EXCEPTION,e&&e.message),!1}},close:function(){aA.debug("Request handler closed",i),s.onClose()}};gC.registerRequestHandler(c.internal,o,e).then(void 0,function(e){r(e)})}})},e.prototype.sendRequestToController=function(n,o,i,e,t,s){try{iu.requireNonNull(i,"Message path"),iu.requireNonNull(e,"Request")}catch(n){return void o(n)}var r;try{r=t?nl.DataTypes.getChecked(t):nl.DataTypes.getByValue(e)}catch(n){return void o(n)}if(void 0===r)throw new Error("Could not determine request type");aA.debug("Sending request to server",e),this.MESSAGING_SEND.send({path:i,dataType:r.name(),request:r.writeValue(e)},function(e,t){var r;if(BI.responseSuccess(e,t)){aA.debug("Request complete",i);try{r=nl.DataTypes.getChecked(s||t.responseDataType)}catch(e){return void o(e)}n(r.readValue(t.data))}else aA.debug("Request failed",i),o(e)})},e.prototype.sendRequestToSession=function(n,o,i,e,t,r,s){try{iu.requireNonNull(t,"Session ID"),iu.requireNonNull(i,"Message path"),iu.requireNonNull(e,"Request")}catch(n){return void o(n)}var a;try{a=r?nl.DataTypes.getChecked(r):nl.DataTypes.getByValue(e)}catch(n){return void o(n)}if(void 0===a)throw new Error("Could not determine request type");aA.debug("Sending request to session",t,e),this.MESSAGING_RECEIVER_SERVER.send({sessionId:t,path:i,dataType:a.name(),request:a.writeValue(e)},function(e,t){var r;if(BI.responseSuccess(e,t)){aA.debug("Request complete",i);try{r=nl.DataTypes.getChecked(s||t.responseDataType)}catch(e){return void o(e)}n(r.readValue(t.data))}else aA.debug("Request failed",i),o(e)})},e.prototype.sendRequest=function(n,o,i,s,a){var c=this;return new Promise(function(e,t){if(c.internal.checkConnected(t))if(i instanceof bh.SessionId)c.sendRequestToSession(e,t,n,o,i,s,a);else if("string"==typeof i){var r=function(e){try{return bh.SessionId.fromString(e)}catch(e){return!1}}(i);r?c.sendRequestToSession(e,t,n,o,r,s,a):c.sendRequestToController(e,t,n,o,i,s)}else c.sendRequestToController(e,t,n,o,i,s)})},e.prototype.sendRequestToFilter=function(i,p,l,f,h,d){var e=this;return new Promise(function(o,u){return iA(e,void 0,void 0,function(){var t,s,a,c,r,n=this;return sA(this,function(e){switch(e.label){case 0:if(!this.internal.checkConnected(u))return[3,2];try{iu.requireNonNull(p,"Message path"),iu.requireNonNull(i,"Session filter"),iu.requireNonNull(l,"Request"),iu.requireNonNull(f,"Response callback")}catch(e){return u(e),[2]}t=void 0;try{t=h?nl.DataTypes.getChecked(h):nl.DataTypes.getByValue(l)}catch(e){return u(e),[2]}if(void 0===t)throw new Error("Could not determine request type");return s=0,a=-1,c=function(){return a<=s&&-1!==a||0===a},[4,this.internal.getConversationSet().newConversation({onOpen:function(){},onResponse:function(e,t){if(null===t)return!0;if("number"==typeof t)return a=t,c();var r=t.sessionID;if(s++,t.errorReason)f.onResponseError(r,t.errorReason);else{var n=nl.DataTypes.getByName(t.response.responseDataType),o=void 0;try{o=nl.DataTypes.getChecked(d||t.response.responseDataType)}catch(e){return u(e),c()}if(n.canReadAs(o.valueClass)){var i=void 0;try{i=n.readAs(o.valueClass,t.response.data)}catch(e){return f.onResponseError(r,e),c()}try{f.onResponse(r,i)}catch(e){aA.error("Exception within messaging filter callback",e)}}else f.onResponseError(r,new Error("The received response was a "+n+",'\n                                        + ' which cannot be read as: "+o))}return c()},onDiscard:function(e,t){f.onError(t)}})];case 1:r=e.sent(),aA.debug("Sending filter request to server",l),this.MESSAGING_FILTER_SEND.send({cid:r,path:p,filter:i,dataType:t,request:t.writeValue(l)},function(e,t){BI.responseSuccess(e,t)?t.isSuccess?(aA.debug("Request complete",p),n.internal.getConversationSet().respondIfPresent(r,t.numberSent),o(t.numberSent)):(aA.debug("Request failed",p),n.internal.getConversationSet().respondIfPresent(r,null),u(t.errors)):(aA.debug("Request failed",p),n.internal.getConversationSet().respondIfPresent(r,null),u(e))}),e.label=2;case 2:return[2]}})})})},e.prototype.setRequestStream=function(e,t,r,n){var o=new cA(r?nl.DataTypes.getValueClassChecked(r):void 0,n?nl.DataTypes.getValueClassChecked(n):void 0,t),i=this.requestStreams[e];if(this.requestStreams[e]=o,i)return i.stream},e.prototype.removeRequestStream=function(e){var t=this.requestStreams[e];if(delete this.requestStreams[e],t)return t.stream},e}();oA.MessagesImpl=pA;var lA={};Object.defineProperty(lA,"__esModule",{value:!0});var fA=function(){function e(e){this.internal=e}return e.prototype.callService=function(e,t){var o=this;return new Promise(function(r,n){o.internal.checkConnected(n)&&o.internal.getServiceLocator().obtain(e).send(t,function(e,t){e?n(e):r(null===t?void 0:t)})})},e.prototype.putSessionMetricCollector=function(e){return this.callService(UI.PUT_SESSION_METRIC_COLLECTOR,e)},e.prototype.removeSessionMetricCollector=function(e){return this.callService(UI.REMOVE_SESSION_METRIC_COLLECTOR,e)},e.prototype.fetchSessionMetricCollectors=function(){return this.callService(UI.FETCH_SESSION_METRIC_COLLECTORS,null)},e.prototype.putTopicMetricCollector=function(e){return this.callService(UI.PUT_TOPIC_METRIC_COLLECTOR,e)},e.prototype.removeTopicMetricCollector=function(e){return this.callService(UI.REMOVE_TOPIC_METRIC_COLLECTOR,e)},e.prototype.fetchTopicMetricCollectors=function(){return this.callService(UI.FETCH_TOPIC_METRIC_COLLECTORS,null)},e.prototype.getServerMetrics=function(){return this.callService(UI.GET_SERVER_METRICS,null)},e.prototype.getMeasuredEntityClassMetrics=function(e){return this.callService(UI.GET_MEASURED_ENTITY_CLASS_METRICS,e)},e.prototype.fetchJMXValues=function(e){return this.callService(UI.FETCH_JMX_VALUES,new mv.JMXObjectNames(e))},e}();lA.Metrics=fA;var hA={};Object.defineProperty(hA,"__esModule",{value:!0});var dA=function(){function e(e,t){void 0===t&&(t=Date.now),this.currentTime=Date.now,this.internal=e,this.currentTime=t,this.ping=e.getServiceLocator().obtain(UI.USER_PING)}return e.prototype.pingServer=function(){var i=this;return new Promise(function(r,n){if(i.internal.checkConnected(n)){var o=i.currentTime();i.ping.send(null,function(e){if(e)n(e);else{var t=i.currentTime()-o;r({timestamp:o,rtt:t})}})}})},e}();hA.PingImpl=dA;var yA={};Object.defineProperty(yA,"__esModule",{value:!0});var vA=function(e,t,r,n,o){this.name=e,this.url=t,this.principal=r,this.credentials=n,this.connectionOptions=o};yA.RemoteServerDefinition=vA;var _A={};Object.defineProperty(_A,"__esModule",{value:!0});var SA=La.create("RemoteServers"),EA=function(){function e(e){var t=(this.internal=e).getServiceLocator();this.CREATE_REMOTE_SERVER=t.obtain(UI.CREATE_REMOTE_SERVER),this.LIST_REMOTE_SERVERS=t.obtain(UI.LIST_REMOTE_SERVERS),this.CHECK_REMOTE_SERVER=t.obtain(UI.CHECK_REMOTE_SERVER),this.REMOVE_REMOTE_SERVER=t.obtain(UI.REMOVE_REMOTE_SERVER)}return e.prototype.createRemoteServer=function(t,o,i,s,a){var c=this;return new Promise(function(r,n){if(0===iu.requireNonNull(t,"name").length)throw new Error("Remote server name cannot be empty");if(c.internal.checkConnected(n)){var e=new yA.RemoteServerDefinition(t,iu.requireNonNull(o,"url"),iu.requireNonNull(i,"url"),iu.requireNonNull(s,"credentials"),a||{});c.CREATE_REMOTE_SERVER.send(e,function(e,t){BI.responseSuccess(e,t)?t.errors?(n(t.errors.errors),SA.debug("Create remote server failed")):r(t.server):(n(e),SA.debug("Create remote server failed"))})}})},e.prototype.checkRemoteServer=function(e){var t=this;return new Promise(function(r,n){t.internal.checkConnected(n)&&t.CHECK_REMOTE_SERVER.send(iu.requireNonNull(e,"name"),function(e,t){e?(n(e),SA.debug("Check remote server failed")):r(t.status)})})},e.prototype.listRemoteServers=function(){var e=this;return new Promise(function(r,n){e.internal.checkConnected(n)&&e.LIST_REMOTE_SERVERS.send(null,function(e,t){BI.responseSuccess(e,t)?r(t.result):(n(e),SA.debug("List remote servers failed"))})})},e.prototype.removeRemoteServer=function(e){var n=this;return new Promise(function(t,r){n.internal.checkConnected(r)&&n.REMOVE_REMOTE_SERVER.send(iu.requireNonNull(e,"name"),function(e){e?(r(e),SA.debug("Remove remote server failed")):t()})})},e}();_A.RemoteServersImpl=EA;var mA={};(function(r){"use strict";Object.defineProperty(mA,"__esModule",{value:!0});var e=function(){function e(e){this.LICENCE_UPDATE=e.getServiceLocator().obtain(UI.UPDATE_LICENSE)}return e.prototype.updateLicence=function(e){var t=this,o=r.from(e);return new Promise(function(r,n){t.LICENCE_UPDATE.send(o,function(e,t){e?n(e):r(t)})})},e}();mA.LicenceUpdater=e}).call(this,t({}).Buffer);var wA={},gA=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};function TA(e){var t,r,n="";if(e.indexOf("'")<0&&e.indexOf("\\")<0)n+=e;else try{for(var o=gA(e),i=o.next();!i.done;i=o.next()){var s=i.value;"'"!==s&&"\\"!==s||(n+="\\"),n+=s}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return"'"+n+"'"}Object.defineProperty(wA,"__esModule",{value:!0}),wA.quoteAndEscape=TA,wA.setToString=function(e){return"["+e.map(TA).join(" ")+"]"},wA.permissionsToString=function(e){return"["+e.join(" ")+"]"};var OA={};Object.defineProperty(OA,"__esModule",{value:!0});var IA=function(){function e(){this.commands="",this.setDefaultTopicPermissions=this.setDefaultPathPermissions.bind(this)}return e.prototype.maybeApppendNewLine=function(){0<this.commands.length&&(this.commands+="\n")},e.prototype.build=function(){return this.commands},e.prototype.toString=function(){return"ConfigurationScriptBuilder ["+this.commands+"]"},e.prototype.setRolesForAnonymousSessions=function(e){var t=iu.requireNonNull(e,"roles");return this.maybeApppendNewLine(),this.commands+="set roles for anonymous sessions ",this.commands+=wA.setToString(t),this},e.prototype.setRolesForNamedSessions=function(e){var t=iu.requireNonNull(e,"roles");return this.maybeApppendNewLine(),this.commands+="set roles for named sessions ",this.commands+=wA.setToString(t),this},e.prototype.setGlobalPermissions=function(e,t){var r=iu.requireNonNull(e,"role"),n=iu.requireNonNull(t,"permissions");return this.maybeApppendNewLine(),this.commands+="set "+wA.quoteAndEscape(r)+" permissions ",this.commands+=wA.permissionsToString(n),this},e.prototype.setDefaultPathPermissions=function(e,t){var r=iu.requireNonNull(e,"role"),n=iu.requireNonNull(t,"permissions");return this.maybeApppendNewLine(),this.commands+="set "+wA.quoteAndEscape(r)+" default path permissions ",this.commands+=wA.permissionsToString(n),this},e.prototype.removeTopicPermissions=function(e,t){return this.removePathPermissions(e,t)},e.prototype.removePathPermissions=function(e,t){var r=iu.requireNonNull(e,"role"),n=iu.requireNonNull(t,"path");return this.maybeApppendNewLine(),this.commands+="remove "+wA.quoteAndEscape(r)+" permissions for path "+wA.quoteAndEscape(n),this},e.prototype.setTopicPermissions=function(e,t,r){return this.setPathPermissions(e,t,r)},e.prototype.setPathPermissions=function(e,t,r){var n=iu.requireNonNull(e,"role"),o=iu.requireNonNull(t,"path"),i=iu.requireNonNull(r,"permissions");return this.maybeApppendNewLine(),this.commands+="set "+wA.quoteAndEscape(n)+" path "+wA.quoteAndEscape(o)+" permissions ",this.commands+=wA.permissionsToString(i),this},e.prototype.setRoleIncludes=function(e,t){var r=iu.requireNonNull(e,"role"),n=iu.requireNonNull(t,"includedRoles");return this.maybeApppendNewLine(),this.commands+="set "+wA.quoteAndEscape(r)+" includes ",this.commands+=wA.setToString(n),this},e.prototype.setRoleLockedByPrincipal=function(e,t){var r=iu.requireNonNull(e,"role"),n=iu.requireNonNull(t,"lockingPrincipal");return this.maybeApppendNewLine(),this.commands+="set role "+wA.quoteAndEscape(r)+" locked by principal "+wA.quoteAndEscape(n),this},e.prototype.isolatePath=function(e){var t=iu.requireNonNull(e,"path");return this.maybeApppendNewLine(),this.commands+="isolate path "+wA.quoteAndEscape(t),this},e.prototype.deisolatePath=function(e){var t=iu.requireNonNull(e,"path");return this.maybeApppendNewLine(),this.commands+="deisolate path "+wA.quoteAndEscape(t),this},e}();OA.SecurityScriptBuilderImpl=IA;var RA={};Object.defineProperty(RA,"__esModule",{value:!0});var bA=function(){function e(){this.commands=""}return e.prototype.maybeApppendNewLine=function(){0<this.commands.length&&(this.commands+="\n")},e.prototype.build=function(){return this.commands},e.prototype.toString=function(){return"SystemAuthenticationScriptBuilder ["+this.commands+"]"},e.prototype.assignRoles=function(e,t){var r=iu.requireNonNull(t,"roles"),n=iu.requireNonNull(e,"principal");return this.maybeApppendNewLine(),this.commands+="assign roles "+wA.quoteAndEscape(n)+" ",this.commands+=wA.setToString(r),this},e.prototype.addPrincipal=function(e,t,r,n){void 0===r&&(r=[]);var o=iu.requireNonNull(r,"roles"),i=iu.requireNonNull(e,"principal"),s=iu.requireNonNull(t,"password");return this.maybeApppendNewLine(),this.commands+="add principal "+wA.quoteAndEscape(i)+" "+wA.quoteAndEscape(s),o.length&&(this.commands+=" ",this.commands+=wA.setToString(o)),n&&(this.commands+=" locked by "+wA.quoteAndEscape(n)),this},e.prototype.setPassword=function(e,t){var r=iu.requireNonNull(e,"principal"),n=iu.requireNonNull(t,"password");return this.maybeApppendNewLine(),this.commands+="set password "+wA.quoteAndEscape(r)+" "+wA.quoteAndEscape(n),this},e.prototype.verifyPassword=function(e,t){var r=iu.requireNonNull(e,"principal"),n=iu.requireNonNull(t,"password");return this.maybeApppendNewLine(),this.commands+="verify password "+wA.quoteAndEscape(r)+" "+wA.quoteAndEscape(n),this},e.prototype.removePrincipal=function(e){var t=iu.requireNonNull(e,"principal");return this.maybeApppendNewLine(),this.commands+="remove principal "+wA.quoteAndEscape(t),this},e.prototype.allowAnonymousConnections=function(e){var t=iu.requireNonNull(e,"roles");return this.maybeApppendNewLine(),this.commands+="allow anonymous connections"+(e?" ":""),this.commands+=wA.setToString(t),this},e.prototype.denyAnonymousConnections=function(){return this.maybeApppendNewLine(),this.commands+="deny anonymous connections",this},e.prototype.abstainAnonymousConnections=function(){return this.maybeApppendNewLine(),this.commands+="abstain anonymous connections",this},e.prototype.trustClientProposedPropertyIn=function(e,t){var r=iu.requireNonNull(e,"propertyName"),n=iu.requireNonNull(t,"allowedValues");return this.maybeApppendNewLine(),this.commands+="trust client proposed property "+wA.quoteAndEscape(r)+" if value in ",this.commands+=wA.setToString(n),this},e.prototype.trustClientProposedPropertyMatches=function(e,t){var r=iu.requireNonNull(e,"propertyName"),n=iu.requireNonNull(t,"regex");return this.maybeApppendNewLine(),this.commands+="trust client proposed property "+wA.quoteAndEscape(r)+" if value matches "+wA.quoteAndEscape(n),this},e.prototype.ignoreClientProposedProperty=function(e){var t=iu.requireNonNull(e,"propertyName");return this.maybeApppendNewLine(),this.commands+="ignore client proposed property "+wA.quoteAndEscape(t),this},e}();RA.SystemAuthenticationScriptBuilderImpl=bA;var CA={},AA=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(CA,"__esModule",{value:!0});var PA=La.create("Session.Security"),NA=function(){function e(e){this.GlobalPermission=Lf.GlobalPermission,this.PathPermission=Lf.PathPermission,this.TopicPermission=Lf.PathPermission;var t=(this.internal=e).getServiceLocator();this.CHANGE_PRINCIPAL=t.obtain(UI.CHANGE_PRINCIPAL),this.GET_SECURITY_CONFIGURATION=t.obtain(UI.GET_SECURITY_CONFIGURATION),this.GET_SYSTEM_AUTHENTICATION=t.obtain(UI.GET_SYSTEM_AUTHENTICATION),this.UPDATE_SECURITY_CONFIGURATION=t.obtain(UI.UPDATE_SECURITY_CONFIGURATION),this.UPDATE_SYSTEM_AUTHENTICATION=t.obtain(UI.UPDATE_SYSTEM_AUTHENTICATION),this.AUTHENTICATOR_DEREGISTRATION=t.obtain(UI.AUTHENTICATOR_DEREGISTRATION),this.LIST_GLOBAL_PERMISSIONS=t.obtain(UI.LIST_GLOBAL_PERMISSIONS),this.LIST_PATH_PERMISSIONS=t.obtain(UI.LIST_PATH_PERMISSIONS),e.getServiceRegistry().add(UI.AUTHENTICATION,nA.create(function(e,t,r){e.getConversationSet().respondIfPresent(t.cid,{req:t,callback:r})})),e.getServiceRegistry().add(UI.AUTHENTICATOR,nA.create(function(e,t,r){e.getConversationSet().respondIfPresent(t.cid,{req:t,callback:r})}))}return e.prototype.getPrincipal=function(){return this.internal.getPrincipal()},e.prototype.changePrincipal=function(o,e){var i=this;return new Promise(function(r,n){i.internal.checkConnected(n)&&(PA.debug("Changing principal",o),i.CHANGE_PRINCIPAL.send({principal:o,credentials:e},function(e,t){e?n(e):t?(i.internal.setPrincipal(o),r()):n(new Error("Unable to change principal due to authentication failure"))}))})},e.prototype.getSecurityConfiguration=function(){var e=this;return new Promise(function(r,n){e.internal.checkConnected(n)&&(PA.debug("Getting security configuration"),e.GET_SECURITY_CONFIGURATION.send(null,function(e,t){e?n(e):r(t)}))})},e.prototype.getSystemAuthenticationConfiguration=function(){var e=this;return new Promise(function(r,n){e.internal.checkConnected(n)&&(PA.debug("Getting system authentication"),e.GET_SYSTEM_AUTHENTICATION.send(null,function(e,t){e?n(e):r(t)}))})},e.prototype.setAuthenticationHandler=function(o,i,s){var a=this;return new Promise(function(t,e){if(a.internal.checkConnected(e)){PA.debug('Setting Authentication Handler for "'+o+'"');var r={active:function(e){PA.debug('Authentication Handler active for "'+o+'"'),s.onActive(e),t()},respond:function(e){var t=e.req,r=e.callback;try{s.onAuthenticate(t.principal,t.credentials,t.details,{allow:function(e){r.respond(e?AE.allow(e):AE.ALLOW)},abstain:function(){r.respond(AE.ABSTAIN)},deny:function(){r.respond(AE.DENY)}})}catch(e){throw s.onError(e),r.fail(Wa.ErrorReason.CALLBACK_EXCEPTION,e&&e.message),e}return!1},close:function(e){e?(PA.debug("'Authentication Handler closed with error for \""+o+"\"'"),s.onError(e)):(PA.debug("'Authentication Handler closed for \""+o+"\"'"),s.onClose())}},n={definition:UI.AUTHENTICATION,group:ad.DEFAULT,details:i,name:o};return gC.registerHandler(a.internal,n,r,UI.AUTHENTICATION_CONTROL_REGISTRATION,UI.AUTHENTICATION_CONTROL_DEREGISTRATION)}})},e.prototype.setAuthenticator=function(i,c){var s=this;return new Promise(function(t,r){if(s.internal.checkConnected(r)){try{iu.requireNonNull(i,"handlerName"),iu.requireNonNull(c,"authenticator")}catch(e){return void r(e)}"function"==typeof c.authenticate&&"function"==typeof c.onError&&"function"==typeof c.onClose||r(new Error("authenticator does not implement the Authenticator interface")),PA.debug("Adding authenticator",i);var o={name:i,definition:UI.AUTHENTICATOR,group:ad.DEFAULT},e={active:function(e,n){PA.debug("Authenticator active",i),t({close:function(){return new Promise(function(r){s.AUTHENTICATOR_DEREGISTRATION.send(o,function(e,t){e?(s.internal.getConversationSet().discard(n,e),PA.debug("Error with authenticator deregistration: ",e)):(s.internal.getConversationSet().respondIfPresent(n,t),c.onClose()),r()})})}})},respond:function(e){var s=e.req,a=e.callback;try{c.authenticate(s.principal,s.credentials,s.sessionProperties,s.proposedProperties,{allow:function(e){var t,r;if(e){e=Object.assign({},e);try{for(var n=AA(Object.getOwnPropertyNames(s.sessionProperties)),o=n.next();!o.done;o=n.next()){var i=o.value;e[i]===s.sessionProperties[i]&&delete e[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}a.respond(new nm.AuthenticatorResponse(nm.TypeCode.ALLOW,e))},abstain:function(){a.respond(nm.ABSTAIN)},deny:function(){a.respond(nm.DENY)}})}catch(e){throw c.onError(e),a.fail(Wa.ErrorReason.CALLBACK_EXCEPTION,e&&e.message),e}return!1},close:function(e){e?(PA.debug("'Authenticator closed with error for \""+i+"\"'"),c.onError(e)):(PA.debug("'Authentication Handler closed for \""+i+"\"'"),c.onClose())}};gC.registerHandler(s.internal,o,e,UI.AUTHENTICATOR_REGISTRATION,UI.AUTHENTICATOR_DEREGISTRATION).then(void 0,function(e){r(e)})}})},e.prototype.updateStoreCallback=function(e,t,r,n){e?n(e):0<t.errors.length?n(t.errors):r()},e.prototype.updateStore=function(e,t){var o=this;return new Promise(function(r,n){""===t?r():t&&"string"==typeof t?o.internal.checkConnected(n)&&e.send(new mf.SecurityCommandScript(t),function(e,t){o.updateStoreCallback(e,t,r,n)}):n(new Error("Invalid argument for script: "+t))})},e.prototype.updateSecurityStore=function(e){return PA.debug("Updating security store"),this.updateStore(this.UPDATE_SECURITY_CONFIGURATION,e)},e.prototype.updateAuthenticationStore=function(e){return PA.debug("Updating authentication store"),this.updateStore(this.UPDATE_SYSTEM_AUTHENTICATION,e)},e.prototype.securityScriptBuilder=function(){return new OA.SecurityScriptBuilderImpl},e.prototype.authenticationScriptBuilder=function(){return new RA.SystemAuthenticationScriptBuilderImpl},e.prototype.getGlobalPermissions=function(){var e=this;return new Promise(function(r,n){e.internal.checkConnected(n)&&(PA.debug("Getting global permissions"),e.LIST_GLOBAL_PERMISSIONS.send(null,function(e,t){e?n(e):r(t.permissions)}))})},e.prototype.getPathPermissions=function(e){var t=this;return new Promise(function(r,n){t.internal.checkConnected(n)&&(PA.debug("Getting path permissions"),t.LIST_PATH_PERMISSIONS.send(e,function(e,t){e?n(e):r(t.permissions)}))})},e.prototype.getTopicPermissions=function(e){var t=this;return new Promise(function(r,n){t.internal.checkConnected(n)&&(PA.debug("Getting path permissions"),t.LIST_PATH_PERMISSIONS.send(e,function(e,t){e?n(e):r(t.permissions)}))})},e}();CA.SecurityImpl=NA;var MA={};function LA(e,t){return e.withViewRange(t(e.viewRange))}function DA(e,t){return e.withEditRange(t(e.editRange))}Object.defineProperty(MA,"__esModule",{value:!0});var jA=function(){function t(e,t,r,n){this.context=e,this.valueType=t,this.parameters=r,this.mode=n}return t.prototype.withCurrentRange=function(e){return new t(this.context,this.valueType,this.mode(this.parameters,e),this.mode)},t.prototype.selectFrom=function(t){var o=this;return new Promise(function(r,n){if(t){var e={topicPath:t,parameters:o.parameters};o.context.send(e,function(e,t){BI.responseSuccess(e,t)?r(t.createQueryResult(o.valueType,o.parameters.queryType.streamStructure)):n(e)})}else n(new Error("Topic path is null"))})},t.prototype.forValues=function(){return new t(this.context,this.valueType,this.parameters.withQueryType(Zm.QueryTypes.VALUES).withViewRange(Jm.DEFAULT_RANGE),LA)},t.prototype.forEdits=function(){return new t(this.context,this.valueType,this.parameters.withQueryType(Zm.QueryTypes.ALL_EDITS).withViewRange(Jm.DEFAULT_RANGE),LA)},t.prototype.editRange=function(){if(this.parameters.queryType!==Zm.QueryTypes.VALUES)throw new Error(".editRange() cannot be applied to this edit range query");return new t(this.context,this.valueType,this.parameters,DA)},t.prototype.allEdits=function(){if(this.parameters.queryType===Zm.QueryTypes.VALUES)throw new Error(".allEdits() cannot be applied to this value range query");return new t(this.context,this.valueType,this.parameters.withQueryType(Zm.QueryTypes.ALL_EDITS),DA)},t.prototype.latestEdits=function(){if(this.parameters.queryType===Zm.QueryTypes.VALUES)throw new Error(".latestEdits() cannot be applied to this value range query");return new t(this.context,this.valueType,this.parameters.withQueryType(Zm.QueryTypes.LATEST_EDITS),DA)},t.prototype.limit=function(e){return new t(this.context,this.valueType,this.parameters.withLimit(e),this.mode)},t.prototype.as=function(e){if(e&&e.valueClass)return new t(this.context,e.valueClass,this.parameters,this.mode);if(e instanceof Function)return new t(this.context,e,this.parameters,this.mode);throw new Error("Invalid value type: "+e)},t.prototype.from=function(t){return this.withCurrentRange(function(e){return e.from(t)})},t.prototype.fromStart=function(){return this.withCurrentRange(function(e){return e.fromStart()})},t.prototype.fromLast=function(t){return this.withCurrentRange(function(e){return e.fromLast(t)})},t.prototype.fromLastMillis=function(t){return this.withCurrentRange(function(e){return e.fromLastMillis(t)})},t.prototype.to=function(t){return this.withCurrentRange(function(e){return e.to(t)})},t.prototype.toStart=function(){return this.withCurrentRange(function(e){return e.toStart()})},t.prototype.untilLast=function(t){return this.withCurrentRange(function(e){return e.untilLast(t)})},t.prototype.untilLastMillis=function(t){return this.withCurrentRange(function(e){return e.untilLastMillis(t)})},t.prototype.next=function(t){return this.withCurrentRange(function(e){return e.next(t)})},t.prototype.nextMillis=function(t){return this.withCurrentRange(function(e){return e.nextMillis(t)})},t.prototype.previous=function(t){return this.withCurrentRange(function(e){return e.previous(t)})},t.prototype.previousMillis=function(t){return this.withCurrentRange(function(e){return e.previousMillis(t)})},t.createDefault=function(e){return new t(e,qc.BytesImpl,Zm.DEFAULT_RANGE_QUERY,LA)},t.prototype.equals=function(e){return!!(e&&e instanceof t)&&this.parameters.equals(e.parameters)},t.prototype.toString=function(){return this.parameters.toString()},t}();MA.RangeQueryImpl=jA;var UA={};Object.defineProperty(UA,"__esModule",{value:!0});var xA=function(){function e(e){var t=e.getServiceLocator();this.defaultRangeQuery=MA.RangeQueryImpl.createDefault(t.obtain(UI.RANGE_QUERY)),this.appendService=t.obtain(UI.TIME_SERIES_APPEND),this.editService=t.obtain(UI.TIME_SERIES_EDIT)}return e.prototype.rangeQuery=function(){return this.defaultRangeQuery},e.prototype.edit=function(t,o,i,s){var a=this;return new Promise(function(r,n){var e;try{e=s instanceof Gc.AbstractDataType?s:s?nl.DataTypes.getByClass(s):nl.DataTypes.getByValue(i),iu.requireNonNull(t,"Path"),iu.requireNonNull(i,"Value"),iu.requireNonNull(o,"Sequence"),e=iu.requireNonNull(e,"Data type")}catch(e){return void n(e)}a.editService.send({path:t,sequence:o,dataType:e,value:e.writeValue(i)},function(e,t){e?n(e):r(t)})})},e.prototype.append=function(t,o,i){var s=this;return new Promise(function(r,n){var e;try{e=i instanceof Gc.AbstractDataType?i:i?nl.DataTypes.getByClass(i):nl.DataTypes.getByValue(o),iu.requireNonNull(t,"Path"),iu.requireNonNull(o,"Value"),e=iu.requireNonNull(e,"Data type")}catch(e){return void n(e)}s.appendService.send({path:t,value:e.writeValue(o),dataType:e},function(e,t){e?n(e):r(t)})})},e}();UA.TimeSeriesImpl=xA;var BA={};Object.defineProperty(BA,"__esModule",{value:!0});var kA=function(){function e(e){this.SET_SERVICE=e.getServiceLocator().obtain(UI.UPDATE_TOPIC_SET)}return e.prototype.dataToBytes=function(e){return e.$buffer.slice(e.$offset,e.$length)},e.prototype.update=function(e,t,r){var n=nl.DataTypes.get(t);if(n){var o=n.from(t);this.SET_SERVICE.send({path:e,bytes:this.dataToBytes(o)},r)}else r(uO.UpdateFailReasonEnum.INCOMPATIBLE_UPDATE)},e.prototype.updateValue=function(e,t,r,n){var o=nl.DataTypes.getChecked(r).from(t);this.SET_SERVICE.send({path:e,bytes:this.dataToBytes(o)},n)},e}();BA.UniversalUpdater=kA;var qA={},VA=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(qA,"__esModule",{value:!0});var FA=function(){function e(){this.cache={}}return e.prototype.get=function(e){return this.cache[ql.canonicalise(e)]},e.prototype.put=function(e,t){this.cache[ql.canonicalise(e)]=t},e.prototype.remove=function(e){var t,r;try{for(var n=VA(Object.getOwnPropertyNames(this.cache)),o=n.next();!o.done;o=n.next()){var i=o.value;e.selects(i)&&delete this.cache[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e}();qA.ValueCache=FA;var GA={};function HA(e){return e.$buffer.slice(e.$offset,e.$length)}function WA(e,t){var r=uf.parseSelector("?"+ql.canonicalise(t)+"//");e.remove(r)}Object.defineProperty(GA,"__esModule",{value:!0});var YA=function(){function e(e,t){this.isClosed=!1,this.cid=e,this.dispatch=t}return e.prototype.internalUpdate=function(r,n,o){var i=this;return new Promise(function(e,t){i.isClosed?t(new Error("Updater is closed")):r?null==n?t(new Error("Update cannot be null")):i.dispatch(e,t,i.cid,r,n,o):t(new Error("Topic can not be null or empty"))})},e.prototype.update=function(e,t){return this.internalUpdate(e,t,function(e){return nl.DataTypes.get(e)})},e.prototype.updateValue=function(e,t,r){return this.internalUpdate(e,t,function(){return r})},e}(),zA=function(){function e(e,t,r,n){this.state=YO.UpdateSourceState.INIT,this.internal=e,this.valueCache=t,this.topic=r,this.handler=n,this.UPDATE_SOURCE_DEREGISTRATION=e.getServiceLocator().obtain(UI.UPDATE_SOURCE_DEREGISTRATION),this.UPDATE_SOURCE_DELTA=e.getServiceLocator().obtain(UI.UPDATE_SOURCE_DELTA),this.UPDATE_SOURCE_SET=e.getServiceLocator().obtain(UI.UPDATE_SOURCE_SET)}return e.prototype.dispatch=function(r,n,e,o,t,i){var s=function(e,t){e?n(e):t&&t.error?n(new Error("Topic update error for topic "+o+" : "+t.error)):r()};if(this.internal.checkConnected(n)){var a=i(t);if(!a)return void n(uO.UpdateFailReasonEnum.INCOMPATIBLE_UPDATE);var c=a.from(t),u=this.valueCache.get(o);if(u){var p=a.deltaType("binary"),l=p.diff(u,c);if(l===p.noChange())return void s(null);this.UPDATE_SOURCE_DELTA.send({id:0,cid:e,path:o,bytes:HA(l)},s)}else this.UPDATE_SOURCE_SET.send({cid:e,path:o,bytes:HA(c)},s);this.valueCache.put(o,c)}},e.prototype.onOpen=function(n){var o=this;this.close=function(){return new Promise(function(t,r){o.UPDATE_SOURCE_DEREGISTRATION.send({cid:n},function(e){e?(o.internal.getConversationSet().discard(n,e),r(e)):(o.internal.getConversationSet().respond(n,{old:o.state,current:YO.UpdateSourceState.CLOSED}),t())})})}},e.prototype.onResponse=function(e,t){if(t.old!==this.state)return this.internal.getConversationSet().discard(e,new Error("Inconsistent server/client update source state. Current: "+this.state+", expected: "+t.old)),!1;switch(this.state===YO.UpdateSourceState.INIT&&t.current!==YO.UpdateSourceState.CLOSED&&this.handler.onRegister(this.topic,this.close),this.updater&&(this.updater.isClosed=!0),this.state=t.current,this.state){case YO.UpdateSourceState.ACTIVE:return this.updater=new YA(e,this.dispatch.bind(this)),WA(this.valueCache,this.topic),this.handler.onActive(this.topic,this.updater),!1;case YO.UpdateSourceState.STANDBY:return this.handler.onStandBy(this.topic),!1;default:return WA(this.valueCache,this.topic),this.handler.onClose(this.topic),!0}},e.prototype.onDiscard=function(e,t){this.state=YO.UpdateSourceState.CLOSED,this.updater&&(this.updater.isClosed=!0),WA(this.valueCache,this.topic),t instanceof ZR.CloseReasonImpl?this.handler.onClose(this.topic):this.handler.onClose(this.topic,t)},e}();GA.UpdateResponseHandler=zA;var $A={},QA=this&&this.__awaiter||function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(r,n)}o((c=c.apply(i,s||[])).next())})},KA=this&&this.__generator||function(r,n){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty($A,"__esModule",{value:!0});var JA=La.create("Session.Topics"),XA={103:uO.TopicAddFailReasonEnum.PERMISSIONS_FAILURE,110:uO.TopicAddFailReasonEnum.CLUSTER_REPARTITION,9004:uO.TopicAddFailReasonEnum.EXISTS_MISMATCH,9005:uO.TopicAddFailReasonEnum.INVALID_NAME,9006:uO.TopicAddFailReasonEnum.INVALID_DETAILS,9007:uO.TopicAddFailReasonEnum.EXCEEDED_LICENSE_LIMIT,9008:uO.TopicAddFailReasonEnum.INCOMPATIBLE_PARENT,9009:uO.TopicAddFailReasonEnum.INCOMPATIBLE_MASTER,9010:uO.TopicAddFailReasonEnum.EXISTS_INCOMPATIBLE,9011:uO.TopicAddFailReasonEnum.UNEXPECTED_ERROR},ZA=function(){function e(e){var t=(this.internal=e).getServiceLocator();this.TOPIC_ADD_SERVICE=t.obtain(UI.TOPIC_ADD),this.TOPIC_REMOVAL=t.obtain(UI.TOPIC_REMOVAL),this.TOPIC_WILL_REGISTRATION=t.obtain(UI.TOPIC_SCOPED_WILL_REGISTRATION),this.TOPIC_WILL_DEREGISTRATION=t.obtain(UI.TOPIC_SCOPED_WILL_DEREGISTRATION),this.UPDATE_SOURCE_REGISTRATION=t.obtain(UI.UPDATE_SOURCE_REGISTRATION),this.valueCache=new qA.ValueCache,this.universalUpdater=new BA.UniversalUpdater(e);var r=e.getServiceRegistry();r.add(UI.UPDATE_SOURCE_STATE,nA.create(function(e,t,r){r.respond(),e.getConversationSet().respondIfPresent(t.cid,{old:t.old,current:t.current})})),r.add(UI.MISSING_TOPIC,nA.create(function(e,t,r){e.getConversationSet().respondIfPresent(t.cid,{request:t,callback:r})}))}return e.prototype.isSupportedTopicType=function(t){return Object.keys(tl.TopicTypeEnum).some(function(e){return tl.TopicTypeEnum[e]===t})},e.prototype.add=function(o,t){var i=this;return new Promise(function(r,n){if(o){if(i.internal.checkConnected(n)){JA.debug("Adding topic",o);var e=i.isSupportedTopicType(t)?new Rl.TopicSpecification(t):t;if(!(e instanceof Rl.TopicSpecification))throw new Error("Invalid topic specification or type");i.TOPIC_ADD_SERVICE.send({path:o,specification:e},function(e,t){e?n(XA[e.id]):(i.valueCache.put(o,void 0),r({topic:o,added:t.status===qw.TopicAddResponseStatus.OK}))})}}else n({id:0,reason:"Path cannot be empty or null"})})},e.prototype.remove=function(n){for(var e=this,t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=arguments;return new Promise(function(t,r){if(e.internal.checkConnected(r)){JA.debug("Removing topics",n);try{e.TOPIC_REMOVAL.send({selector:1<o.length?uf.parseSelector(Array.prototype.slice.call(o)):uf.parseSelector(n)},function(e){e?(JA.debug("Topic removal failed",n),r(e)):(JA.debug("Topic removal complete",n),t())})}catch(e){JA.debug("Error parsing selector",n),r(e)}}})},e.prototype.removeWithSession=function(s){var a=this;return new Promise(function(r,o){if(a.internal.checkConnected(o)){JA.debug("Registering removeWithSession",s);var i=new TI.TopicWillParameters(s,TI.Will.REMOVE_TOPICS);a.TOPIC_WILL_REGISTRATION.send(i,function(e,t){if(BI.responseSuccess(e,t))if(t.result===PI.WillRegistrationResultEnum.SUCCESS){JA.debug("removeWithSession registration complete",s);var n=!0;r({deregister:function(){return new Promise(function(t,r){n&&a.internal.checkConnected(r)&&(JA.debug("Deregistering removeWithSession",s),a.TOPIC_WILL_DEREGISTRATION.send(i,function(e){e?r(e):(n=!1,t({topic:s}))}))})}})}else JA.debug("removeWithSession registration failed",s),o(new Error("REGISTRATION_CONFLICT"));else JA.debug("removeWithSession registration failed",s),o(e)})}})},e.prototype.update=function(o,e){var t=this;return new Promise(function(r,n){t.internal.checkConnected(n)&&(JA.debug("Updating topic",o),t.universalUpdater.update(o,e,function(e,t){e?(JA.debug("Update failed",o),n(e)):t.isError?(JA.debug("Update failed",o),n(t.reason)):(JA.debug("Update complete",o),r(o))}))})},e.prototype.updateValue=function(o,e,t){var i=this;return new Promise(function(r,n){t?i.internal.checkConnected(n)&&(JA.debug("Updating topic",o),i.universalUpdater.updateValue(o,e,t,function(e,t){e?(JA.debug("Update failed",o),n(e)):t.isError?(JA.debug("Update failed",o),n(t.reason)):(JA.debug("Update complete",o),r(o))})):n(new Error("Data type is required"))})},e.prototype.registerUpdateSource=function(t,s){var e=this;return new Promise(function(o,i){return QA(e,void 0,void 0,function(){var r,n;return KA(this,function(e){switch(e.label){case 0:return[4,(r=this.internal.getConversationSet()).newConversation(new GA.UpdateResponseHandler(this.internal,this.valueCache,t,s))];case 1:return n=e.sent(),this.internal.checkConnected(i)&&this.UPDATE_SOURCE_REGISTRATION.send({cid:n,path:t},function(e,t){BI.responseSuccess(e,t)&&t.state!==YO.UpdateSourceState.CLOSED?(r.respond(n,{old:YO.UpdateSourceState.INIT,current:t.state}),o()):(r.discard(n,e),i(e))}),[2]}})})})},e.prototype.addMissingTopicHandler=function(o,i){var s=this;return new Promise(function(t,e){if(i){if(s.internal.checkConnected(e)){var r={active:function(e){JA.debug("Missing Topic Handler registered for "+o),i.onRegister(o,e),t()},respond:function(e){var t=e.callback;JA.debug("Missing Topic Handler notification for "+e.request.sessionID+" using "+e.request.selector);try{i.onMissingTopic({path:e.request.selector.prefix,selector:e.request.selector,sessionID:e.request.sessionID,proceed:function(){t.respond(!0)},cancel:function(){t.respond(!1)}})}catch(e){throw i.onError(o,e),t.fail(Wa.ErrorReason.CALLBACK_EXCEPTION,e&&e.message),e}return!1},close:function(e){JA.debug("Missing Topic Handler closed for "+o),e?i.onError(o,e):i.onClose(o)}},n={definition:UI.MISSING_TOPIC,group:ad.DEFAULT,path:o};t(gC.registerTopicHandler(s.internal,n,r))}}else e(new Error("Missing Topic handler is null or undefined"))})},e}();$A.TopicControlImpl=ZA;var eP={},tP=this&&this.__awaiter||function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function n(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(r,n)}o((c=c.apply(i,s||[])).next())})},rP=this&&this.__generator||function(r,n){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(eP,"__esModule",{value:!0});var nP=La.create("Session.Notifications"),oP=function(){function e(e){this.TopicNotificationType=Jw.TopicNotificationType;var t=(this.internal=e).getServiceLocator();this.conversationSet=e.getConversationSet(),this.TOPIC_NOTIFICATION_SELECTION=t.obtain(UI.TOPIC_NOTIFICATION_SELECTION),this.TOPIC_NOTIFICATION_DESELECTION=t.obtain(UI.TOPIC_NOTIFICATION_DESELECTION),this.TOPIC_NOTIFICATION_DEREGISTRATION=t.obtain(UI.TOPIC_NOTIFICATION_DEREGISTRATION);var r=e.getServiceRegistry(),n=nA.create(function(e,t,r){r.respond(),e.getConversationSet().respond(t.cid,t)});r.add(UI.TOPIC_NOTIFICATION_EVENTS,n),r.add(UI.TOPIC_DESCENDANT_EVENTS,n)}return e.prototype.addListener=function(a){var e=this;return new Promise(function(n,o){return tP(e,void 0,void 0,function(){var t,r,s=this;return rP(this,function(e){switch(e.label){case 0:return a?this.internal.checkConnected(o)?(nP.debug("Adding Topic Notification Listener"),t={active:function(e,i){nP.debug("Topic Notification Listener active"),n({select:function(n){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return new Promise(function(t,r){if(n)try{var e=0<o.length?uf.parseSelector([n].concat(o)):uf.parseSelector(n);s.TOPIC_NOTIFICATION_SELECTION.send({cid:i,selector:e},function(e){e?(s.conversationSet.discard(i,e),r(e)):t()})}catch(e){r(e)}else r(new Error("No topic selector provided"))})},deselect:function(n){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return new Promise(function(t,r){if(n)try{var e=0<o.length?uf.parseSelector([n].concat(o)):uf.parseSelector(n);s.TOPIC_NOTIFICATION_DESELECTION.send({cid:i,selector:e},function(e){e?(s.conversationSet.discard(i,e),r(e)):t()})}catch(e){r(e)}else r(new Error("No topic selector provided"))})},close:function(){s.TOPIC_NOTIFICATION_DEREGISTRATION.send({cid:i},function(e,t){e?(s.conversationSet.discard(i,e),nP.debug("Error with topic notification deregistration: ",e)):(a.onClose(),s.conversationSet.respondIfPresent(i,t))})}})},respond:function(e){return e.isDescendantEvent?a.onDescendantNotification(e.path,e.type):a.onTopicNotification(e.path,e.specification,e.type),!1},close:function(e){nP.debug("Topic Notification Listener closed"),e?a.onError(e):a.onClose()}},[4,this.conversationSet.newConversation(gC.responseHandler(this.internal,t,function(e,t){s.TOPIC_NOTIFICATION_DEREGISTRATION.send({cid:e},t)}))]):[3,2]:(o(new Error("Topic Notification Listener is null or undefined")),[2]);case 1:r=e.sent(),gC.registrationCallback(this.conversationSet,r,function(){},function(){})(void 0),e.label=2;case 2:return[2]}})})})},e}();eP.TopicNotificationsImpl=oP;var iP={};Object.defineProperty(iP,"__esModule",{value:!0});var sP=function(e,t,r,n){this.path=e,this.topicSpecification=t,this.value=r,this.constraint=n};iP.AddAndSetTopicRequest=sP;var aP={};Object.defineProperty(aP,"__esModule",{value:!0});var cP=function(e,t,r){this.path=e,this.topicSpecification=t,this.constraint=r};aP.UpdateStreamAddTopicRequest=cP;var uP={};Object.defineProperty(uP,"__esModule",{value:!0});var pP=function(e,t){this.streamId=e,this.update=t};uP.UpdateStreamRequest=pP;var lP={};Object.defineProperty(lP,"__esModule",{value:!0});var fP=function(){function e(e,t){this.value=t,this.err=e}return e.prototype.set=function(){return Promise.reject(this.err)},e.prototype.get=function(){return this.value},e.prototype.validate=function(){return Promise.reject(this.err)},e.prototype.onSetComplete=function(){},e.prototype.onSetFailed=function(){},e.prototype.onValidateComplete=function(){},e.prototype.onValidateFailed=function(){},e}();lP.InvalidSetStream=fP;var hP={};Object.defineProperty(hP,"__esModule",{value:!0});var dP=La.create("diffusion.TopicUpdate"),yP=function(){function e(e,t,r,n,o){this.streamServices=e,this.options=t,this.stream=r,this.streamId=n,this.cache=o}return e.prototype.set=function(n){var o=this;return this.options.checkOperation(n),new Promise(function(t,r){var e=o.options.toBuffer(o.cache,n);o.cache=n,o.options.deltaService.send(new uP.UpdateStreamRequest(o.streamId,e),function(e){e?(dP.debug("Set update stream failed"),o.stream.onSetFailed(e),r(e)):(o.stream.onSetComplete(o.streamId),t())})})},e.prototype.get=function(){return this.cache},e.prototype.validate=function(){var n=this;return new Promise(function(t,r){n.streamServices.CHECK_UPDATE_STREAM.send(n.streamId,function(e){e?(dP.debug("Validate update stream failed"),n.stream.onValidateFailed(e),r(e)):(n.stream.onValidateComplete(n.streamId),t(Yg.TopicCreationResult.EXISTS))})})},e.prototype.onSetComplete=function(){},e.prototype.onSetFailed=function(e){this.stream.setDelegate(new lP.InvalidSetStream(e,this.cache))},e.prototype.onValidateComplete=function(){},e.prototype.onValidateFailed=function(e){this.stream.setDelegate(new lP.InvalidSetStream(e,this.cache))},e}();hP.SetStream=yP;var vP={};(function(i){"use strict";Object.defineProperty(vP,"__esModule",{value:!0});var e=function(){function e(e,t,r,n,o){this.streamServices=e,this.options=t,this.stream=r,this.pendingResult=n,this.deferredResolvers=[],this.value=o,this.nextValue=o}return e.prototype.set=function(e){var r=this;return this.options.checkOperation(e),this.nextValue=e,new Promise(function(e,t){r.deferredResolvers.push({resolve:e,reject:t})})},e.prototype.get=function(){return this.nextValue},e.prototype.validate=function(){var e=this;return new Promise(function(t,r){e.pendingResult.then(function(e){return t(Yg.TopicCreationResult.EXISTS),e},function(e){r(e)})})},e.prototype.onSetComplete=function(e){var r=this;this.stream.setDelegate(new hP.SetStream(this.streamServices,this.options,this.stream,e,this.nextValue));var t=this.options.dataType.toBytes(this.value).asBuffer(),n=this.options.dataType.toBytes(this.nextValue).asBuffer();if(0!==i.compare(t,n)){var o=this.options.toBuffer(this.value,this.nextValue);this.options.deltaService.send(new uP.UpdateStreamRequest(e,o),function(t){t?r.deferredResolvers.forEach(function(e){e.reject(t)}):r.deferredResolvers.forEach(function(e){e.resolve()})})}else this.deferredResolvers.forEach(function(e){e.resolve()})},e.prototype.onSetFailed=function(t){this.stream.setDelegate(new lP.InvalidSetStream(t,this.nextValue)),this.deferredResolvers.forEach(function(e){e.reject(t)})},e.prototype.onValidateComplete=function(){throw new Error("No validate request has been sent")},e.prototype.onValidateFailed=function(){throw new Error("No validate request has been sent")},e}();vP.PendingSetStream=e}).call(this,t({}).Buffer);var _P={};Object.defineProperty(_P,"__esModule",{value:!0});var SP=function(){function e(e){this.err=e}return e.prototype.set=function(){return Promise.reject(this.err)},e.prototype.get=function(){throw new Error("No value has been set")},e.prototype.validate=function(){return Promise.reject(this.err)},e.prototype.onSetComplete=function(){},e.prototype.onSetFailed=function(){},e.prototype.onValidateComplete=function(){},e.prototype.onValidateFailed=function(){},e}();_P.InvalidUnsetStream=SP;var EP={};Object.defineProperty(EP,"__esModule",{value:!0});var mP=function(){function e(e,t,r,n,o,i){this.streamServices=e,this.options=t,this.stream=r,this.pendingResult=n,this.deferredResolvers=[o],this.nextValue=i}return e.prototype.set=function(e){var r=this;return this.options.checkOperation(e),this.nextValue=e,new Promise(function(e,t){r.deferredResolvers.push({resolve:e,reject:t})})},e.prototype.get=function(){return this.nextValue},e.prototype.validate=function(){var e=this;return new Promise(function(t,r){e.pendingResult.then(function(e){return t(Yg.TopicCreationResult.EXISTS),e},function(e){r(e)})})},e.prototype.onSetComplete=function(){throw new Error("No set request has been sent")},e.prototype.onSetFailed=function(){throw new Error("No set request has been sent")},e.prototype.onValidateComplete=function(e){var r=this;this.stream.setDelegate(new hP.SetStream(this.streamServices,this.options,this.stream,e,this.nextValue));var t=this.options.dataType.toBytes(this.nextValue).asBuffer();this.streamServices.STREAM_SET_TOPIC_SERVICE.send(new uP.UpdateStreamRequest(e,t),function(t){t?r.deferredResolvers.forEach(function(e){e.reject(t)}):r.deferredResolvers.forEach(function(e){e.resolve()})})},e.prototype.onValidateFailed=function(t){this.stream.setDelegate(new lP.InvalidSetStream(t,this.nextValue)),this.deferredResolvers.forEach(function(e){e.reject(t)})},e}();EP.PendingValidateAndSetStream=mP;var wP={};Object.defineProperty(wP,"__esModule",{value:!0});var gP=La.create("diffusion.TopicUpdate"),TP=function(){function e(e,t,r,n){this.streamServices=e,this.options=t,this.stream=r,this.streamId=n}return e.prototype.set=function(n){var o=this;return this.options.checkOperation(n),new Promise(function(t,r){o.stream.setDelegate(new hP.SetStream(o.streamServices,o.options,o.stream,o.streamId,n));var e=o.options.dataType.toBytes(n).asBuffer();o.streamServices.STREAM_SET_TOPIC_SERVICE.send(new uP.UpdateStreamRequest(o.streamId,e),function(e){e?(gP.debug("Stream set topic failed"),o.stream.onSetFailed(e),r(e)):(o.stream.onSetComplete(o.streamId),t())})})},e.prototype.get=function(){throw new Error("The set method has not been called")},e.prototype.validate=function(){var n=this;return new Promise(function(t,r){n.streamServices.CHECK_UPDATE_STREAM.send(n.streamId,function(e){e?(gP.debug("Validate update stream failed"),n.stream.onValidateFailed(e),r(e)):(n.stream.onValidateComplete(n.streamId),t(Yg.TopicCreationResult.EXISTS))})})},e.prototype.onSetComplete=function(){throw new Error("The set method has not been called")},e.prototype.onSetFailed=function(){throw new Error("The set method has not been called")},e.prototype.onValidateComplete=function(){},e.prototype.onValidateFailed=function(e){this.stream.setDelegate(new _P.InvalidUnsetStream(e))},e}();wP.ValidatedStream=TP;var OP={};Object.defineProperty(OP,"__esModule",{value:!0});var IP=function(){function e(e,t,r,n){this.streamServices=e,this.options=t,this.stream=r,this.pendingResult=n}return e.prototype.set=function(r){var n=this;return this.options.checkOperation(r),new Promise(function(e,t){n.stream.setDelegate(new EP.PendingValidateAndSetStream(n.streamServices,n.options,n.stream,n.pendingResult,{resolve:e,reject:t},r))})},e.prototype.get=function(){throw new Error("The set method has not been called")},e.prototype.validate=function(){var e=this;return new Promise(function(t,r){e.pendingResult.then(function(e){return t(Yg.TopicCreationResult.EXISTS),e},function(e){r(e)})})},e.prototype.onSetComplete=function(){throw new Error("No set request has been sent")},e.prototype.onSetFailed=function(){throw new Error("No set request has been sent")},e.prototype.onValidateComplete=function(e){this.stream.setDelegate(new wP.ValidatedStream(this.streamServices,this.options,this.stream,e))},e.prototype.onValidateFailed=function(e){this.stream.setDelegate(new _P.InvalidUnsetStream(e))},e}();OP.PendingValidateStream=IP;var RP={};Object.defineProperty(RP,"__esModule",{value:!0});var bP=La.create("diffusion.TopicUpdate"),CP=function(){function e(e,t,r,n,o,i){this.streamServices=e,this.options=t,this.stream=r,this.path=n,this.specification=o,this.constraint=i}return e.prototype.set=function(t){var o=this;this.options.checkOperation(t);var e=new Promise(function(r,n){var e=o.options.dataType.toBytes(t).asBuffer();o.streamServices.STREAM_ADD_AND_SET_TOPIC_SERVICE.send(new iP.AddAndSetTopicRequest(o.path,o.specification,e,o.constraint),function(e,t){BI.responseSuccess(e,t)?(o.stream.onSetComplete(t.streamId),r(t.creationResult)):(bP.debug("Stream add and set topic failed"),o.stream.onSetFailed(e),n(e))})});return this.stream.setDelegate(new vP.PendingSetStream(this.streamServices,this.options,this.stream,e,t)),e},e.prototype.get=function(){throw new Error("The set method has not been called")},e.prototype.validate=function(){var o=this,e=new Promise(function(r,n){o.streamServices.STREAM_ADD_TOPIC_SERVICE.send(new aP.UpdateStreamAddTopicRequest(o.path,o.specification,o.constraint),function(e,t){BI.responseSuccess(e,t)?(o.stream.onValidateComplete(t.streamId),r(t.creationResult)):(bP.debug("Stream add topic failed"),o.stream.onValidateFailed(e),n(e))})});return this.stream.setDelegate(new OP.PendingValidateStream(this.streamServices,this.options,this.stream,e)),e},e.prototype.onSetComplete=function(){throw new Error("No set request has been sent")},e.prototype.onSetFailed=function(){throw new Error("No set request has been sent")},e.prototype.onValidateComplete=function(){throw new Error("No validate request has been sent")},e.prototype.onValidateFailed=function(){throw new Error("No validate request has been sent")},e}();RP.NewAddTopicAndUpdateStream=CP;var AP={};Object.defineProperty(AP,"__esModule",{value:!0});var PP=function(e,t,r,n){this.path=e,this.topicType=t,this.value=r,this.constraint=n};AP.CreateUpdateStreamAndSetRequest=PP;var NP={};Object.defineProperty(NP,"__esModule",{value:!0});var MP=function(e,t,r){this.path=e,this.topicType=t,this.constraint=r};NP.CreateUpdateStreamRequest=MP;var LP={};Object.defineProperty(LP,"__esModule",{value:!0});var DP=La.create("diffusion.TopicUpdate"),jP=function(){function e(e,t,r,n,o,i){this.streamServices=e,this.options=t,this.stream=r,this.path=n,this.topicType=o,this.constraint=i}return e.prototype.set=function(t){var o=this;this.options.checkOperation(t);var e=new Promise(function(r,n){var e=o.options.dataType.toBytes(t).asBuffer();o.streamServices.CREATE_UPDATE_STREAM_AND_SET.send(new AP.CreateUpdateStreamAndSetRequest(o.path,o.topicType,e,o.constraint),function(e,t){BI.responseSuccess(e,t)?(o.stream.onSetComplete(t),r(Yg.TopicCreationResult.EXISTS)):(DP.debug("Failed to create update stream and set"),o.stream.onSetFailed(e),n(e))})});return this.stream.setDelegate(new vP.PendingSetStream(this.streamServices,this.options,this.stream,e,t)),e},e.prototype.get=function(){throw new Error("The set method has not been called")},e.prototype.validate=function(){var o=this,e=new Promise(function(r,n){o.streamServices.CREATE_UPDATE_STREAM.send(new NP.CreateUpdateStreamRequest(o.path,o.topicType,o.constraint),function(e,t){BI.responseSuccess(e,t)?(o.stream.onValidateComplete(t),r(Yg.TopicCreationResult.EXISTS)):(DP.debug("Create update stream failed"),o.stream.onValidateFailed(e),n(e))})});return this.stream.setDelegate(new OP.PendingValidateStream(this.streamServices,this.options,this.stream,e)),e},e.prototype.onSetComplete=function(){throw new Error("No set request has been sent")},e.prototype.onSetFailed=function(){throw new Error("No set request has been sent")},e.prototype.onValidateComplete=function(){throw new Error("No validate request has been sent")},e.prototype.onValidateFailed=function(){throw new Error("No validate request has been sent")},e}();LP.NewUpdateStream=jP;var UP={};Object.defineProperty(UP,"__esModule",{value:!0});var xP=function(){function e(e){this.delegate=e(this)}return e.prototype.set=function(e){return this.delegate.set(e)},e.prototype.get=function(){return this.delegate.get()},e.prototype.validate=function(){return this.delegate.validate()},e.prototype.onSetComplete=function(e){this.delegate.onSetComplete(e)},e.prototype.onSetFailed=function(e){this.delegate.onSetFailed(e)},e.prototype.onValidateComplete=function(e){this.delegate.onValidateComplete(e)},e.prototype.onValidateFailed=function(e){this.delegate.onValidateFailed(e)},e.prototype.setDelegate=function(e){this.delegate=e},e}();UP.UpdateStreamImpl=xP;var BP={};Object.defineProperty(BP,"__esModule",{value:!0});var kP=function(){function e(e){this.streamServices=e}return e.prototype.getValueCheckOperation=function(e){switch(e.name()){case"int64":case"double":case"string":return function(){};default:return function(e){iu.requireNonNull(e,"null can only be passed for int64, double or string topics")}}},e.prototype.getChangeService=function(e){return void 0===e?this.streamServices.STREAM_SET_TOPIC_SERVICE:this.streamServices.STREAM_APPLY_DELTA_SERVICE},e.prototype.getToBytesFunction=function(r,n){return void 0===n?function(e,t){return r.toBytes(t).asBuffer()}:function(e,t){var r=n.diff(e,t);return r.$buffer.slice(r.$offset,r.$offset+r.$length)}},e.prototype.binaryDeltaType=function(e){try{return e.binaryDeltaType()}catch(e){return}},e.prototype.createUpdateStream=function(t,e,r){var n=this,o=this.binaryDeltaType(e),i={dataType:e,checkOperation:this.getValueCheckOperation(e),toBuffer:this.getToBytesFunction(e,o),deltaService:this.getChangeService(o)},s=tl.TopicTypeEnum[e.name().toUpperCase()];return new UP.UpdateStreamImpl(function(e){return new LP.NewUpdateStream(n.streamServices,i,e,t,s,r)})},e.prototype.createUpdateStreamThatAddsTopic=function(t,r,e,n){var o=this,i=this.binaryDeltaType(e),s={dataType:e,checkOperation:this.getValueCheckOperation(e),toBuffer:this.getToBytesFunction(e,i),deltaService:this.getChangeService(i)};return new UP.UpdateStreamImpl(function(e){return new RP.NewAddTopicAndUpdateStream(o.streamServices,s,e,t,r,n)})},e}();BP.UpdateStreamFactory=kP;var qP={};Object.defineProperty(qP,"__esModule",{value:!0});var VP=La.create("Session.TopicUpdate"),FP=new mg.Unconstrained,GP=function(){function e(e){var t=e.getServiceLocator();this.SET_TOPIC=t.obtain(UI.SET_TOPIC),this.ADD_AND_SET_TOPIC=t.obtain(UI.ADD_AND_SET_TOPIC),this.APPLY_JSON_PATCH=t.obtain(UI.APPLY_JSON_PATCH);var r={CREATE_UPDATE_STREAM:t.obtain(UI.CREATE_UPDATE_STREAM),CREATE_UPDATE_STREAM_AND_SET:t.obtain(UI.CREATE_UPDATE_STREAM_AND_SET),CHECK_UPDATE_STREAM:t.obtain(UI.CHECK_UPDATE_STREAM),STREAM_SET_TOPIC_SERVICE:t.obtain(UI.STREAM_SET_TOPIC_SERVICE),STREAM_APPLY_DELTA_SERVICE:t.obtain(UI.STREAM_APPLY_DELTA_SERVICE),STREAM_ADD_TOPIC_SERVICE:t.obtain(UI.STREAM_ADD_TOPIC_SERVICE),STREAM_ADD_AND_SET_TOPIC_SERVICE:t.obtain(UI.STREAM_ADD_AND_SET_TOPIC_SERVICE)};this.updateStreamFactory=new BP.UpdateStreamFactory(r)}return e.prototype.setTopic=function(e,n,o,i){var s=this;return new Promise(function(t,r){s.SET_TOPIC.send({path:e,topicType:tl.TopicTypeEnum[n.name().toUpperCase()],value:n.toBytes(o).asBuffer(),constraint:i},function(e){e?(VP.debug("Set topic failed"),r(e)):t()})})},e.prototype.addAndSetTopic=function(e,t,r,n,o){var i=this;if(t.type!==tl.TopicTypeEnum[r.name().toUpperCase()])throw new Error("The specification and value have different data types");var s=r.toBytes(n).asBuffer();return new Promise(function(r,n){i.ADD_AND_SET_TOPIC.send({path:e,topicSpecification:t,value:s,constraint:o},function(e,t){e?(VP.debug("Add and set topic failed"),n(e)):r(t.result)})})},e.prototype.set=function(e,t,r,n){var o=void 0!==n&&void 0!==n.constraint?n.constraint:FP;return void 0!==n&&void 0!==n.specification?this.addAndSetTopic(e,n.specification,t,r,o):this.setTopic(e,t,r,o)},e.prototype.createUpdateStream=function(e,t,r){var n=void 0!==r&&void 0!==r.constraint?r.constraint:FP;return void 0!==r&&void 0!==r.specification?this.updateStreamFactory.createUpdateStreamThatAddsTopic(e,r.specification,t,n):this.updateStreamFactory.createUpdateStream(e,t,n)},e.prototype.applyJsonPatch=function(e,t,o){var i=this;return new Promise(function(r,n){i.APPLY_JSON_PATCH.send({path:e,patch:"string"==typeof t?t:JSON.stringify(t),constraint:o||FP},function(e,t){e?(VP.debug("Apply JSON patch failed"),n(e)):r(t)})})},e}();qP.TopicUpdateImpl=GP;var HP={};Object.defineProperty(HP,"__esModule",{value:!0});var WP=function(e,t){this.name=e,this.specification=t};HP.NamedTopicViewSpecification=WP;var YP={};Object.defineProperty(YP,"__esModule",{value:!0});var zP=La.create("TopicViews"),$P=function(){function e(e){var t=(this.internal=e).getServiceLocator();this.CREATE_TOPIC_VIEW=t.obtain(UI.CREATE_TOPIC_VIEW),this.LIST_TOPIC_VIEWS=t.obtain(UI.LIST_TOPIC_VIEWS),this.REMOVE_TOPIC_VIEW=t.obtain(UI.REMOVE_TOPIC_VIEW)}return e.prototype.createTopicView=function(t,o){var i=this;return new Promise(function(r,n){if(0===iu.requireNonNull(t,"name").length)throw new Error("Topic View name cannot be empty");if(i.internal.checkConnected(n)){var e=new HP.NamedTopicViewSpecification(t,iu.requireNonNull(o,"specification"));i.CREATE_TOPIC_VIEW.send(e,function(e,t){BI.responseSuccess(e,t)?t.errors?(n(t.errors.errors),zP.debug("Create topic view failed")):r(t.view):(n(e),zP.debug("Create topic view failed"))})}})},e.prototype.listTopicViews=function(){var e=this;return new Promise(function(r,n){e.internal.checkConnected(n)&&e.LIST_TOPIC_VIEWS.send(null,function(e,t){BI.responseSuccess(e,t)?r(t.result):(n(e),zP.debug("List topic views failed"))})})},e.prototype.removeTopicView=function(e){var n=this;return new Promise(function(t,r){n.internal.checkConnected(r)&&n.REMOVE_TOPIC_VIEW.send(iu.requireNonNull(e,"name"),function(e){e?(r(e),zP.debug("Remove topic view failed")):t()})})},e}();YP.TopicViewsImpl=$P;var QP={};Object.defineProperty(QP,"__esModule",{value:!0});var KP=function(){function e(e,t,r,n){this.mPath=e,this.mType=t,this.mValue=r,this.mProperties=n}return e.prototype.path=function(){return this.mPath},e.prototype.type=function(){return this.mType},e.prototype.value=function(){return this.mValue},e.prototype.specification=function(){return new Rl.TopicSpecification(this.mType,this.mProperties)},e}();QP.TopicResultImpl=KP;var JP={};Object.defineProperty(JP,"__esModule",{value:!0}),JP.TIME_SERIES_DATA_TYPE=Jp.TimeSeriesEventDataType.create({name:function(){return"event data type"},readValue:function(e){return e},toBytes:function(e){return e}});var XP=function(){function e(r,n){this.resultList=n.results.map(function(e){var t;return void 0!==e.value&&(t=e.type===tl.TopicTypeEnum.TIME_SERIES?JP.TIME_SERIES_DATA_TYPE.readAs(JP.TIME_SERIES_DATA_TYPE.valueClass,e.value):nl.DataTypes.get(e.type).readAs(r.valueClass,e.value)),new QP.TopicResultImpl(e.path,e.type,t,0===n.properties.length?{}:n.properties[e.propertiesIndex])}),this.hasMoreFlag=n.hasMore}return e.prototype.results=function(){return this.resultList},e.prototype.hasMore=function(){return this.hasMoreFlag},e.prototype.size=function(){return this.resultList.length},e.prototype.isEmpty=function(){return 0===this.resultList.length},e}();JP.FetchResultImpl=XP;var ZP={};Object.defineProperty(ZP,"__esModule",{value:!0});var eN=function(e,t,r,n,o,i,s,a,c,u){this.selector=iu.requireNonNull(e,"FetchQuery.selector"),this.range=t,this.topicTypes=iu.requireNonNull(r,"FetchQuery.topicTypes"),this.withValues=n,this.withProperties=o,this.limit=i,this.maximumResultSize=s,this.deepBranchDepth=a,this.deepBranchLimit=c,this.withUnpublishedDelayedTopics=u};ZP.FetchQuery=eN;var tN,rN={},nN=this&&this.__extends||(tN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}tN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(rN,"__esModule",{value:!0});var oN=La.create("Fetch Request"),iN=function(e,t){this.path=e,this.includesPath=t},sN=function(){function e(e,t){this.from=e,this.to=t}return e.prototype.isUnbounded=function(){return void 0===this.from&&void 0===this.to},e}();function aN(e,t){if(e===tl.TopicTypeEnum.TIME_SERIES)return JP.TIME_SERIES_DATA_TYPE.canReadAs(t);var r=nl.DataTypes.getByValue(e);return null!==r&&void 0!==t.valueClass&&r.canReadAs(t.valueClass)}function cN(e,t){if(!Number.isInteger(e)||e<0)throw new Error("Invalid argument "+t+": "+e);return e}var uN=function(o){function n(e,t){var r=o.call(this)||this,n={range:new sN,topicTypes:aO.FetchRequest.getAllTypes(),dataType:void 0,withProperties:!1,limit:wc.MAX_INT32,maximumResultSize:e.getOptions().maxMessageSize,deepBranchDepth:wc.MAX_INT32,deepBranchLimit:wc.MAX_INT32,withUnpublishedDelayedTopics:!1};return r.internal=e,r.options=Object.assign(n,t),r}return nN(n,o),n.prototype.copyOptions=function(){return{range:new sN(this.options.range.from,this.options.range.to),topicTypes:new Set(this.options.topicTypes),dataType:this.options.dataType,withProperties:this.options.withProperties,limit:this.options.limit,maximumResultSize:this.options.maximumResultSize,deepBranchDepth:this.options.deepBranchDepth,deepBranchLimit:this.options.deepBranchLimit,withUnpublishedDelayedTopics:this.options.withUnpublishedDelayedTopics}},n.prototype.from=function(e){var t=new iN(e,!0);return new n(this.internal,Object.assign(this.copyOptions(),{range:new sN(t,this.options.range.to)}))},n.prototype.after=function(e){var t=new iN(e,!1);return new n(this.internal,Object.assign(this.copyOptions(),{range:new sN(t,this.options.range.to)}))},n.prototype.to=function(e){var t=new iN(e,!0);return new n(this.internal,Object.assign(this.copyOptions(),{range:new sN(this.options.range.from,t)}))},n.prototype.before=function(e){var t=new iN(e,!1);return new n(this.internal,Object.assign(this.copyOptions(),{range:new sN(this.options.range.from,t)}))},n.prototype.topicTypes=function(e){var t=this;if(0===e.length)throw new Error("No types specified");var r=aO.FetchRequest.getAllTypes();return e.forEach(function(e){if(!r.has(e))throw new Error("Invalid topic type "+e.id);if(void 0!==t.options.dataType&&!aN(e,t.options.dataType))throw new Error("Topic type "+e.id+" cannot be read as "+t.options.dataType)}),new n(this.internal,Object.assign(this.copyOptions(),{topicTypes:new Set(e)}))},n.prototype.withValues=function(t){var r;if(void 0===t||t instanceof tc.AnyDataTypeImpl)r=this.options.topicTypes;else if(r=new Set(this.options.topicTypes),this.options.topicTypes.forEach(function(e){aN(e,t)||r.delete(e)}),0===r.size)throw new Error("No selected topic types can be read as "+t);return new n(this.internal,Object.assign(this.copyOptions(),{topicTypes:r,dataType:t}))},n.prototype.withProperties=function(){return new n(this.internal,Object.assign(this.copyOptions(),{withProperties:!0}))},n.prototype.first=function(e){return new n(this.internal,Object.assign(this.copyOptions(),{limit:cN(e,"count")}))},n.prototype.last=function(e){return new n(this.internal,Object.assign(this.copyOptions(),{limit:0-cN(e,"count")}))},n.prototype.maximumResultSize=function(e){return new n(this.internal,Object.assign(this.copyOptions(),{maximumResultSize:Math.min(cN(e,"maximumSize"),this.internal.getOptions().maxMessageSize)}))},n.prototype.limitDeepBranches=function(e,t){return new n(this.internal,Object.assign(this.copyOptions(),{deepBranchDepth:cN(e,"deepBranchDepth"),deepBranchLimit:cN(t,"deepBranchLimit")}))},n.prototype.withUnpublishedDelayedTopics=function(){return new n(this.internal,Object.assign(this.copyOptions(),{withUnpublishedDelayedTopics:!0}))},n.prototype.fetch=function(e){var i=this,t=this.internal.getServiceLocator().obtain(UI.FETCH_QUERY),r=1<arguments.length?uf.parseSelector(Array.prototype.slice.call(arguments)):uf.parseSelector(e),s=new ZP.FetchQuery(r,this.options.range,this.options.topicTypes,void 0!==this.options.dataType,this.options.withProperties,this.options.limit,this.options.maximumResultSize,this.options.deepBranchDepth,this.options.deepBranchLimit,this.options.withUnpublishedDelayedTopics);return new Promise(function(n,o){t.send(s,function(e,t){if(BI.responseSuccess(e,t)){var r=new JP.FetchResultImpl(i.options.dataType,t);n(r)}else oN.debug("Fetch query failed"),o(e)})})},n}(aO.FetchRequest);rN.FetchRequestImpl=uN;var pN,lN={},fN=this&&this.__extends||(pN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}pN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(lN,"__esModule",{value:!0});var hN=function(t){function e(e){return t.call(this,e)||this}return fN(e,t),e}(ol.StreamImpl);lN.FetchStreamImpl=hN;var dN,yN={},vN=this&&this.__extends||(dN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}dN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(yN,"__esModule",{value:!0});var _N=function(n){function e(e,t){var r=n.call(this,e)||this;return r.selector=t,r}return vN(e,n),e}(ol.StreamImpl);yN.ValueStreamImpl=_N;var SN={};Object.defineProperty(SN,"__esModule",{value:!0});var EN=function(){function e(e,t,r){this.stream=e,this.datatype=t,this.sourceDatatype=nl.DataTypes.getByValue(r)}return e.prototype.selects=function(e){return this.stream.selects(e)},e.prototype.onOpen=function(){return this.stream.onOpen()},e.prototype.onDelta=function(e,t,r,n,o,i,s){return this.stream.onDelta(e,t,r,n,o,null!==r?this.sourceDatatype.readAs(this.datatype.valueClass,r):null,this.sourceDatatype.readAs(this.datatype.valueClass,n))},e.prototype.onValue=function(e,t,r,n,o,i){return this.stream.onValue(e,t,r,n,null!==r?this.sourceDatatype.readAs(this.datatype.valueClass,r):null,this.sourceDatatype.readAs(this.datatype.valueClass,n))},e.prototype.onSubscription=function(e,t){return this.stream.onSubscription(e,t)},e.prototype.onUnsubscription=function(e,t,r){return this.stream.onUnsubscription(e,t,r)},e.prototype.onSubscriptionError=function(e){return this.stream.onSubscriptionError(e)},e}();SN.ValueStreamAdapter=EN;var mN={};Object.defineProperty(mN,"__esModule",{value:!0});var wN=function(){function e(n,o,i,s,e,t){var a=this;this.pending=!0;var r=gl.Emitter.create();this.subscription=e(r,o),this.emitter=r.emitter(this.subscription),this.subscription.on("close",function(){n.remove(a)}),this.adapterFactory=t,this.datatype=i,this.registry=n;var c=this.subscription.on.bind(this.subscription);this.subscription.on=function(e,t){var r=c(e,t);return a.pending&&(s?n.addFallback(a,i):n.add(o,a,i),a.pending=!1),r}}return e.prototype.selects=function(e){if(e){if(e.type!==tl.TopicTypeEnum.TIME_SERIES)return nl.DataTypes.getByValue(e.type).canReadAs(this.datatype.valueClass);var t=nl.DataTypes.get(e.properties.TIME_SERIES_EVENT_VALUE_TYPE),r=this.datatype instanceof Jp.TimeSeriesEventDataType?nl.DataTypes.get(this.datatype.valueTypeName):this.datatype;return!!t&&t.canReadAs(r.valueClass)}return!1},e.prototype.adapter=function(e){return e.type===tl.TopicTypeEnum.TIME_SERIES||e.type===tl.TopicTypeEnum[this.datatype.name().toUpperCase()]?this:this.adapterFactory(this,this.datatype,e.type)},e.prototype.onOpen=function(){this.emitter.emit("open",this.subscription)},e.prototype.onDelta=function(e,t,r,n,o,i,s){this.emitter.emit("value",e,t,s,i)},e.prototype.onValue=function(e,t,r,n,o,i){this.emitter.emit("value",e,t,i,o)},e.prototype.onSubscription=function(e,t){this.emitter.emit("subscribe",e,t)},e.prototype.onUnsubscription=function(e,t,r){this.emitter.emit("unsubscribe",e,t,r)},e.prototype.onSubscriptionError=function(e){this.emitter.error(e),this.registry.remove(this)},e}(),gN=new ef.SelectorSet([]);mN.create=function(e,t,r,n){return void 0===n&&(n=gN),new wN(e,n,t,r,function(e,t){return new yN.ValueStreamImpl(e,t)},function(e,t,r){return new SN.ValueStreamAdapter(e,t,r)}).subscription};var TN,ON={},IN=this&&this.__extends||(TN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}TN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(ON,"__esModule",{value:!0});var RN=La.create("Session"),bN=function(o){function e(e,t,r){var n=o.call(this,t,r)||this;return n.internal=e,n.UNSUBSCRIBE=e.getServiceLocator().obtain(UI.UNSUBSCRIBE),n.SUBSCRIBE=e.getServiceLocator().obtain(UI.SUBSCRIBE),n.FETCH=e.getServiceLocator().obtain(UI.FETCH),n.streamRegistry=e.getStreamRegistry(),n}return IN(e,o),e.prototype.unsubscribe=function(n){for(var o=this,e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var i=arguments;return new Promise(function(t,r){try{var e=1<i.length?uf.parseSelector(Array.prototype.slice.call(i)):uf.parseSelector(n);o.internal.checkConnected(r)&&(RN.debug("Unsubscribing",n),o.UNSUBSCRIBE.send(e,function(e){e?(RN.debug("Unsubscribe failed",n),r(e)):(RN.debug("Unsubscribe complete",n),t())}))}catch(e){r(e)}})},e.prototype.fetch=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(RN.debug("Fetch request for: ",e),this.internal.isShared())throw new Error("Deprecated fetch is not implemented for shared sessions");iu.requireNonNull(e,"Selector");var o=gl.Emitter.create(),i=new lN.FetchStreamImpl(o),s=o.emitter(i);try{var a=1<arguments.length?uf.parseSelector(Array.prototype.slice.call(arguments)):uf.parseSelector(e);this.internal.checkConnected(function(e){s.error(e)})&&this.internal.getConversationSet().newConversation({onOpen:function(){s.emit("open")},onResponse:function(e,t){var r=t.data,n=t.topic;return n?(s.emit("value",r,n),!1):(1===r.length&&1===r[0]?s.close():s.error(new Error("Unexpected end of fetch stream")),!0)},onDiscard:function(e,t){t instanceof ZR.CloseReasonImpl?s.close():s.error(t)}}).then(function(e){t.FETCH.send({cid:e,selector:a},function(e){e&&s.error(e)})})}catch(e){s.error(e)}return i},e.prototype.fetchRequest=function(){return new rN.FetchRequestImpl(this.internal)},e.prototype.select=function(n){for(var o=this,e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var i=arguments;return new Promise(function(t,r){RN.debug("Subscribing",n);try{var e=1<i.length?uf.parseSelector(Array.prototype.slice.call(i)):uf.parseSelector(n);o.internal.checkConnected(r)&&o.SUBSCRIBE.send(e,function(e){e?r(e):t()})}catch(e){r(e)}})},e.prototype.addStream=function(e,t){if(2!==arguments.length)throw new Error("Both topic selector and value type are needed");if(!t||nl.DataTypes.get(t))throw new Error("Data type required");var r=uf.parseSelector(e);return mN.create(this.streamRegistry,t,!1,r)},e.prototype.addFallbackStream=function(e){if(!e||nl.DataTypes.get(e))throw new Error("Data type required");return mN.create(this.streamRegistry,e,!0)},e}(ol.StreamImpl);ON.TopicsImpl=bN;var CN,AN={},PN=this&&this.__extends||(CN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}CN(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(AN,"__esModule",{value:!0});var NN=function(s){function a(e,t,r){var n=this,o=gl.Emitter.create();n=s.call(this,r,o)||this;var i=o.emitter(n);return r.on({reconnect:function(){i.emit("reconnect")},disconnect:function(e){i.emit("disconnect",e)},error:function(e){i.emit("error",e)},close:function(e){i.emit("close",e)}}),n.topics=new $A.TopicControlImpl(r),n.clients=new zC.ClientControlImpl(r),n.messages=new oA.MessagesImpl(r),n.notifications=new eP.TopicNotificationsImpl(r),n.remoteServers=new _A.RemoteServersImpl(r),n.security=new CA.SecurityImpl(r),n.timeseries=new UA.TimeSeriesImpl(r),n.topicUpdate=new qP.TopicUpdateImpl(r),n.topicViews=new YP.TopicViewsImpl(r),n.logRetrieval=new tA.LogRetrieval(r),n.metrics=new lA.Metrics(r),n.licenceUpdater=new mA.LicenceUpdater(r),n.sessionId=e,n.sessionID=e.toString(),n.ping=new hA.PingImpl(r),n.options=void 0!==t?t.with({credentials:void 0}):{},n}return PN(a,s),a.prototype.close=function(){return this.internal.close(),this},a.prototype.closeSession=function(){var r=this;return new Promise(function(e,t){r.on("close",e),r.close()})},a.prototype.isClosed=function(){var e=this.internal.getState();return"closing"===e||"closed"===e},a.prototype.isConnected=function(){return this.internal.isConnected()},a.prototype.toString=function(){return"Session<"+this.sessionId+" "+this.internal.getState()+">"},a.prototype.getPrincipal=function(){return this.options.principal||""},a.prototype.lock=function(e,t){return void 0===t&&(t=jm.SessionLockScope.UNLOCK_ON_SESSION_LOSS),this.internal.lock(e,t)},a.prototype.pingServer=function(){return this.ping.pingServer()},a.prototype.getServerMaximumMessageSize=function(){return this.internal.getServerMaximumMessageSize()},a.create=function(e,t){var s;return void 0!==t&&(s="string"==typeof t?new Hb.OptionsImpl({host:t}):new Hb.OptionsImpl(t)),new Promise(function(r,t){var n=e(s);function o(e,t){n.off("connect",o),n.off("close",i),n.off("error",i),r(new a(e,t||s,n))}function i(e){n.off("connect",o),n.off("close",i),n.off("error",i),t(e)}n.on("connect",o),n.on("close",i),n.on("error",i),n.connect()})},a}(ON.TopicsImpl);AN.SessionImpl=NN;var MN={};Object.defineProperty(MN,"__esModule",{value:!0});var LN=function(){function e(){}return e.prototype.locked=function(e){return new mg.Locked(e)},e.prototype.value=function(e,t){iu.requireNonNull(e,"value");var r=void 0!==t?t:nl.DataTypes.getByValue(e);if(void 0===r)throw new Error("Datatype invalid or could not be inferred");return new mg.BinaryValue(r.toBytes(e))},e.prototype.noValue=function(){return new mg.NoValue},e.prototype.noTopic=function(){return new mg.NoTopic},e.prototype.jsonValue=function(){return new mg.PartialJSONImpl},e}(),DN=Object.freeze(new LN);MN.updateConstraintFactory=DN;var jN={};Object.defineProperty(jN,"__esModule",{value:!0}),jN.ClientControlOptions={PropertyKeys:Object.freeze({ALL_FIXED_PROPERTIES:["*F"],ALL_USER_PROPERTIES:["*U"],ALL_PROPERTIES:["*F","*U"],SESSION_ID:"$SessionId",PRINCIPAL:"$Principal",CONNECTOR:"$Connector",TRANSPORT:"$Transport",CLIENT_TYPE:"$ClientType",COUNTRY:"$Country",LANGUAGE:"$Language",SERVER_NAME:"$ServerName",CLIENT_IP:"$ClientIP",LATITUDE:"$Latitude",LONGITUDE:"$Longitude",START_TIME:"$StartTime",ROLES:"$Roles"}),ANONYMOUS:"",ClientType:_E.ClientType,TransportType:_E.TransportType,AddressType:hE.AddressType,DetailType:KS.DetailType,CloseReason:tb.CloseReasonEnum};var UN={},xN=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},BN=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xN(arguments[t]));return e};Object.defineProperty(UN,"__esModule",{value:!0});var kN=function(){function e(){this.Prefix=kl.Prefix,this.Type=kl.Type}return e.prototype.parse=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return uf.parseSelector.apply(void 0,BN([e],t))},e}();UN.TopicSelectors=kN;var qN,VN={};Object.defineProperty(VN,"__esModule",{value:!0}),(qN=VN.LogLevel||(VN.LogLevel={})).trace="trace",qN.debug="debug",qN.info="info",qN.warn="warn",qN.error="error",qN.silent="silent";var FN={};return Object.defineProperty(FN,"__esModule",{value:!0}),La.setLevel("warn"),FN.version="6.5.3",FN.build="73820",FN.log=function(e){La.setLevel(e)},FN.connect=function(e,t,r){return AN.SessionImpl.create(_C.create(t,r),e)},FN.connectShared=function(e,t){return AN.SessionImpl.create(_C.createShared(e,t),void 0)},FN.escape=function(e){return mC.escape(e)},FN.stringToRoles=function(e){return mC.stringToRoles(e)},FN.rolesToString=function(e){return mC.rolesToString(e)},FN.updateConstraints=function(){return MN.updateConstraintFactory},FN.datatypes=nl.DataTypes,FN.selectors=new UN.TopicSelectors,FN.topics=uO.topicsNamespace,FN.topicUpdate=Yg.TopicUpdateNamespace,FN.errors=Wa.ErrorReason,FN.clients=jN.ClientControlOptions,FN.locks=jm.SessionLockOptions,FN.AddressType=hE.AddressType,FN.ClientType=_E.ClientType,FN.TransportType=_E.TransportType,FN.CloseReasonEnum=tb.CloseReasonEnum,FN.DetailType=KS.DetailType,FN.SessionEventType=YC.SessionEventType,FN.ConnectionOption=uS.ConnectionOption,FN.ConnectionState=uS.ConnectionState,FN.GlobalPermission=Lf.GlobalPermission,FN.PathPermission=Lf.PathPermission,FN.ValidationType=Lf.ValidationType,FN.SessionLockScope=jm.SessionLockScope,FN.TopicNotificationType=Jw.TopicNotificationType,FN.Prefix=kl.Prefix,FN.Type=kl.Type,FN.TopicCreationResult=Yg.TopicCreationResult,FN.LogLevel=VN.LogLevel,FN.TopicPermission=Lf.PathPermission,FN});
//# sourceMappingURL=libs-a23beda84f.js.map
